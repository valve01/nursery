(function(){var __webpack_modules__={124:function(t,e,i){"use strict";var s=i(81),a=i.n(s),n=i(645),r=i.n(n)()(a());r.push([t.id,".f-progress{position:absolute;top:0;left:0;right:0;height:3px;transform:scaleX(0);transform-origin:0;transition-property:transform;transition-timing-function:linear;background:var(--f-progress-color, var(--f-carousel-theme-color, #0091ff));z-index:30;user-select:none;pointer-events:none}",""]),e.Z=r},755:function(t,e,i){"use strict";var s=i(81),a=i.n(s),n=i(645),r=i.n(n)()(a());r.push([t.id,":root{--f-spinner-width: 36px;--f-spinner-height: 36px;--f-spinner-color-1: rgba(0, 0, 0, 0.1);--f-spinner-color-2: rgba(17, 24, 28, 0.8);--f-spinner-stroke: 2.75}.f-spinner{margin:auto;padding:0;width:var(--f-spinner-width);height:var(--f-spinner-height)}.f-spinner svg{width:100%;height:100%;vertical-align:top;animation:f-spinner-rotate 2s linear infinite}.f-spinner svg *{stroke-width:var(--f-spinner-stroke);fill:none}.f-spinner svg *:first-child{stroke:var(--f-spinner-color-1)}.f-spinner svg *:last-child{stroke:var(--f-spinner-color-2);animation:f-spinner-dash 2s ease-in-out infinite}@keyframes f-spinner-rotate{100%{transform:rotate(360deg)}}@keyframes f-spinner-dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}.f-throwOutUp{animation:var(--f-throw-out-duration, 0.175s) ease-out both f-throwOutUp}.f-throwOutDown{animation:var(--f-throw-out-duration, 0.175s) ease-out both f-throwOutDown}@keyframes f-throwOutUp{to{transform:translate3d(0, calc(var(--f-throw-out-distance, 150px) * -1), 0);opacity:0}}@keyframes f-throwOutDown{to{transform:translate3d(0, var(--f-throw-out-distance, 150px), 0);opacity:0}}.f-zoomInUp{animation:var(--f-transition-duration, 0.2s) ease .1s both f-zoomInUp}.f-zoomOutDown{animation:var(--f-transition-duration, 0.2s) ease both f-zoomOutDown}@keyframes f-zoomInUp{from{transform:scale(0.975) translate3d(0, 16px, 0);opacity:0}to{transform:scale(1) translate3d(0, 0, 0);opacity:1}}@keyframes f-zoomOutDown{to{transform:scale(0.975) translate3d(0, 16px, 0);opacity:0}}.f-fadeIn{animation:var(--f-transition-duration, 0.2s) var(--f-transition-easing, ease) var(--f-transition-delay, 0s) both f-fadeIn;z-index:2}.f-fadeOut{animation:var(--f-transition-duration, 0.2s) var(--f-transition-easing, ease) var(--f-transition-delay, 0s) both f-fadeOut;z-index:1}@keyframes f-fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes f-fadeOut{100%{opacity:0}}.f-fadeFastIn{animation:var(--f-transition-duration, 0.2s) ease-out both f-fadeFastIn;z-index:2}.f-fadeFastOut{animation:var(--f-transition-duration, 0.1s) ease-out both f-fadeFastOut;z-index:2}@keyframes f-fadeFastIn{0%{opacity:.75}100%{opacity:1}}@keyframes f-fadeFastOut{100%{opacity:0}}.f-fadeSlowIn{animation:var(--f-transition-duration, 0.5s) ease both f-fadeSlowIn;z-index:2}.f-fadeSlowOut{animation:var(--f-transition-duration, 0.5s) ease both f-fadeSlowOut;z-index:1}@keyframes f-fadeSlowIn{0%{opacity:0}100%{opacity:1}}@keyframes f-fadeSlowOut{100%{opacity:0}}.f-crossfadeIn{animation:var(--f-transition-duration, 0.2s) ease-out both f-crossfadeIn;z-index:2}.f-crossfadeOut{animation:calc(var(--f-transition-duration, 0.2s)*.5) linear .1s both f-crossfadeOut;z-index:1}@keyframes f-crossfadeIn{0%{opacity:0}100%{opacity:1}}@keyframes f-crossfadeOut{100%{opacity:0}}.f-slideIn.from-next{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-slideInNext}.f-slideIn.from-prev{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-slideInPrev}.f-slideOut.to-next{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-slideOutNext}.f-slideOut.to-prev{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-slideOutPrev}@keyframes f-slideInPrev{0%{transform:translateX(100%)}100%{transform:translate3d(0, 0, 0)}}@keyframes f-slideInNext{0%{transform:translateX(-100%)}100%{transform:translate3d(0, 0, 0)}}@keyframes f-slideOutNext{100%{transform:translateX(-100%)}}@keyframes f-slideOutPrev{100%{transform:translateX(100%)}}.f-classicIn.from-next{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-classicInNext;z-index:2}.f-classicIn.from-prev{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-classicInPrev;z-index:2}.f-classicOut.to-next{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-classicOutNext;z-index:1}.f-classicOut.to-prev{animation:var(--f-transition-duration, 0.85s) cubic-bezier(0.16, 1, 0.3, 1) f-classicOutPrev;z-index:1}@keyframes f-classicInNext{0%{transform:translateX(-75px);opacity:0}100%{transform:translate3d(0, 0, 0);opacity:1}}@keyframes f-classicInPrev{0%{transform:translateX(75px);opacity:0}100%{transform:translate3d(0, 0, 0);opacity:1}}@keyframes f-classicOutNext{100%{transform:translateX(-75px);opacity:0}}@keyframes f-classicOutPrev{100%{transform:translateX(75px);opacity:0}}.f-carousel{--f-carousel-theme-color: #706f6c;--f-carousel-spacing: 0px;--f-carousel-slide-width: 100%;--f-carousel-slide-height: auto;--f-carousel-slide-padding: 0;--f-button-width: 42px;--f-button-height: 42px;--f-button-color: var(--f-carousel-theme-color, currentColor);--f-button-hover-color: var(--f-carousel-theme-color, currentColor);--f-button-bg: transparent;--f-button-hover-bg: var(--f-button-bg);--f-button-active-bg: var(--f-button-bg);--f-button-svg-width: 24px;--f-button-svg-height: 24px;--f-button-next-pos: 10px;--f-button-prev-pos: 10px;--f-spinner-color-1: rgba(0, 0, 0, 0.1);--f-spinner-color-2: rgba(17, 24, 28, 0.8);--f-spinner-stroke: 2.75;position:relative;box-sizing:border-box}.f-carousel *,.f-carousel *:before,.f-carousel *:after{box-sizing:inherit}.f-carousel.is-ltr{direction:ltr}.f-carousel.is-rtl{direction:rtl}.f-carousel__viewport{overflow:hidden;transform:translate3d(0, 0, 0);backface-visibility:hidden;width:100%;height:100%}.f-carousel__viewport.is-draggable{cursor:move;cursor:grab}.f-carousel__viewport.is-dragging{cursor:move;cursor:grabbing}.f-carousel__track{display:flex;margin:0 auto;padding:0;height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}.f-carousel__slide{position:relative;flex:0 0 auto;width:var(--f-carousel-slide-width);max-width:100%;height:var(--f-carousel-slide-height);margin:0 var(--f-carousel-spacing) 0 0;padding:var(--f-carousel-slide-padding);outline:0;transform-origin:center center}.f-carousel__slide img.is-preloading{visibility:hidden}.f-carousel__slide>.f-spinner{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.f-carousel.is-vertical{--f-carousel-slide-height: 100%}.f-carousel.is-vertical .f-carousel__track{flex-wrap:wrap}.f-carousel.is-vertical .f-carousel__slide{margin:0 0 var(--f-carousel-spacing) 0}:root{--f-carousel-dots-width: 24px;--f-carousel-dots-height: 30px;--f-carousel-dot-width: 8px;--f-carousel-dot-height: 8px;--f-carousel-dot-radius: 50%;--f-carousel-dot-color: var(--f-carousel-theme-color, currentColor);--f-carousel-dot-opacity: 0.2;--f-carousel-dot-hover-opacity: 0.4}.f-carousel.has-dots{margin-bottom:var(--f-carousel-dots-height)}.f-carousel__dots{position:absolute;bottom:calc(var(--f-carousel-dots-height)*-1);left:0;right:0;display:flex;justify-content:center;align-items:center;flex-wrap:wrap;margin:0 auto !important;padding:0;list-style:none !important;user-select:none}.f-carousel__dots li{margin:0;padding:0;border:0;display:flex;align-items:center;justify-content:center;opacity:var(--f-carousel-dot-opacity);transition:opacity .15s ease-in-out}.f-carousel__dots li+li{margin:0}.f-carousel__dots li:hover{opacity:var(--f-carousel-dot-hover-opacity)}.f-carousel__dots li.is-current{opacity:1}.f-carousel__dots li button{appearance:none;display:flex;align-items:center;justify-content:center;margin:0;padding:0;width:var(--f-carousel-dots-width);height:var(--f-carousel-dots-height);border:0;background:rgba(0,0,0,0);cursor:pointer;transition:all .2s linear}.f-carousel__dot{display:block;margin:0;padding:0;border:0;width:var(--f-carousel-dot-width);height:var(--f-carousel-dot-height);border-radius:var(--f-carousel-dot-radius);background-color:var(--f-carousel-dot-color);line-height:0;font-size:0;cursor:pointer;pointer-events:none}.f-carousel__dots.is-dynamic li:not(.is-prev,.is-next,.is-current,.is-after-next,.is-before-prev) button{transform:scale(0);width:0}.f-carousel__dots.is-dynamic li.is-before-prev button,.f-carousel__dots.is-dynamic li.is-after-next button{transform:scale(0.22)}.f-carousel__dots.is-dynamic li.is-prev button,.f-carousel__dots.is-dynamic li.is-next button{transform:scale(0.66)}.f-carousel__dots.is-dynamic li.is-current button{transform:scale(1)}.f-carousel__dots.is-dynamic li.is-before-prev button,.f-carousel__dots.is-dynamic li.is-after-next button{transform:scale(0.33)}.f-carousel__dots.is-dynamic li.is-current:first-child{margin-left:calc(var(--f-carousel-dots-width)*2)}.f-carousel__dots.is-dynamic li.is-prev:first-child{margin-left:var(--f-carousel-dots-width)}.f-carousel__dots.is-dynamic li.is-next:last-child{margin-right:var(--f-carousel-dots-width)}.f-carousel__dots.is-dynamic li.is-current:last-child{margin-right:calc(var(--f-carousel-dots-width)*2)}.f-carousel.is-rtl .f-carousel__dots.is-dynamic .is-current:first-child{margin-left:0;margin-right:var(--f-carousel-dots-width)}.f-carousel.is-rtl .f-carousel__dots.is-dynamic .is-prev:first-child{margin-left:0;margin-right:var(--f-carousel-dots-width)}.f-carousel.is-rtl .f-carousel__dots.is-dynamic .is-current:last-child{margin-left:0;margin-right:var(--f-carousel-dots-width)}.f-carousel.is-rtl .f-carousel__dots.is-dynamic .is-next:last-child{margin-right:0;margin-left:var(--f-carousel-dots-width)}:root{--f-button-width: 40px;--f-button-height: 40px;--f-button-border: 0;--f-button-border-radius: 0;--f-button-color: #374151;--f-button-bg: #f8f8f8;--f-button-hover-bg: #e0e0e0;--f-button-active-bg: #d0d0d0;--f-button-shadow: none;--f-button-transition: all 0.15s ease;--f-button-transform: none;--f-button-svg-width: 20px;--f-button-svg-height: 20px;--f-button-svg-stroke-width: 1.5;--f-button-svg-fill: none;--f-button-svg-filter: none;--f-button-svg-disabled-opacity: 0.65}.f-button{display:flex;justify-content:center;align-items:center;box-sizing:content-box;position:relative;margin:0;padding:0;width:var(--f-button-width);height:var(--f-button-height);border:var(--f-button-border);border-radius:var(--f-button-border-radius);color:var(--f-button-color);background:var(--f-button-bg);box-shadow:var(--f-button-shadow);pointer-events:all;cursor:pointer;transition:var(--f-button-transition)}@media(hover: hover){.f-button:hover:not([disabled]){color:var(--f-button-hover-color);background-color:var(--f-button-hover-bg)}}.f-button:active:not([disabled]){background-color:var(--f-button-active-bg)}.f-button:focus:not(:focus-visible){outline:none}.f-button:focus-visible{outline:none;box-shadow:inset 0 0 0 var(--f-button-outline, 2px) var(--f-button-outline-color, var(--f-button-color))}.f-button svg{width:var(--f-button-svg-width);height:var(--f-button-svg-height);fill:var(--f-button-svg-fill);stroke:currentColor;stroke-width:var(--f-button-svg-stroke-width);stroke-linecap:round;stroke-linejoin:round;transition:opacity .15s ease;transform:var(--f-button-transform);filter:var(--f-button-svg-filter);pointer-events:none}.f-button[disabled]{cursor:default}.f-button[disabled] svg{opacity:var(--f-button-svg-disabled-opacity)}.f-carousel__nav .f-button.is-prev,.f-carousel__nav .f-button.is-next,.fancybox__nav .f-button.is-prev,.fancybox__nav .f-button.is-next{position:absolute;z-index:1}.is-horizontal .f-carousel__nav .f-button.is-prev,.is-horizontal .f-carousel__nav .f-button.is-next,.is-horizontal .fancybox__nav .f-button.is-prev,.is-horizontal .fancybox__nav .f-button.is-next{top:50%;transform:translateY(-50%)}.is-horizontal .f-carousel__nav .f-button.is-prev,.is-horizontal .fancybox__nav .f-button.is-prev{left:var(--f-button-prev-pos)}.is-horizontal .f-carousel__nav .f-button.is-next,.is-horizontal .fancybox__nav .f-button.is-next{right:var(--f-button-next-pos)}.is-horizontal.is-rtl .f-carousel__nav .f-button.is-prev,.is-horizontal.is-rtl .fancybox__nav .f-button.is-prev{left:auto;right:var(--f-button-next-pos)}.is-horizontal.is-rtl .f-carousel__nav .f-button.is-next,.is-horizontal.is-rtl .fancybox__nav .f-button.is-next{right:auto;left:var(--f-button-prev-pos)}.is-vertical .f-carousel__nav .f-button.is-prev,.is-vertical .f-carousel__nav .f-button.is-next,.is-vertical .fancybox__nav .f-button.is-prev,.is-vertical .fancybox__nav .f-button.is-next{top:auto;left:50%;transform:translateX(-50%)}.is-vertical .f-carousel__nav .f-button.is-prev,.is-vertical .fancybox__nav .f-button.is-prev{top:var(--f-button-next-pos)}.is-vertical .f-carousel__nav .f-button.is-next,.is-vertical .fancybox__nav .f-button.is-next{bottom:var(--f-button-next-pos)}.is-vertical .f-carousel__nav .f-button.is-prev svg,.is-vertical .f-carousel__nav .f-button.is-next svg,.is-vertical .fancybox__nav .f-button.is-prev svg,.is-vertical .fancybox__nav .f-button.is-next svg{transform:rotate(90deg)}.f-carousel__nav .f-button:disabled,.fancybox__nav .f-button:disabled{pointer-events:none}",""]),e.Z=r},645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,a,n){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(s)for(var o=0;o<this.length;o++){var g=this[o][0];null!=g&&(r[g]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);s&&r[h[0]]||(void 0!==n&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=n),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),a&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=a):h[4]="".concat(a)),e.push(h))}},e}},81:function(t){"use strict";t.exports=function(t){return t[1]}},281:function(t){t.exports=function(t){var e=function(i,s,a){var n=i.splice(0,50);a=(a=a||[]).concat(t.add(n)),i.length>0?setTimeout((function(){e(i,s,a)}),1):(t.update(),s(a))};return e}},332:function(t){t.exports=function(t){return t.handlers.filterStart=t.handlers.filterStart||[],t.handlers.filterComplete=t.handlers.filterComplete||[],function(e){if(t.trigger("filterStart"),t.i=1,t.reset.filter(),void 0===e)t.filtered=!1;else{t.filtered=!0;for(var i=t.items,s=0,a=i.length;s<a;s++){var n=i[s];e(n)?n.filtered=!0:n.filtered=!1}}return t.update(),t.trigger("filterComplete"),t.visibleItems}}},916:function(t,e,i){i(650);var s=i(744),a=i(841),n=i(631),r=i(209),o=i(294);t.exports=function(t,e){e=a({location:0,distance:100,threshold:.4,multiSearch:!0,searchClass:"fuzzy-search"},e=e||{});var i={search:function(s,a){for(var n=e.multiSearch?s.replace(/ +$/,"").split(/ +/):[s],r=0,o=t.items.length;r<o;r++)i.item(t.items[r],a,n)},item:function(t,e,s){for(var a=!0,n=0;n<s.length;n++){for(var r=!1,o=0,g=e.length;o<g;o++)i.values(t.values(),e[o],s[n])&&(r=!0);r||(a=!1)}t.found=a},values:function(t,i,s){if(t.hasOwnProperty(i)){var a=n(t[i]).toLowerCase();if(o(a,s,e))return!0}return!1}};return s.bind(r(t.listContainer,e.searchClass),"keyup",t.utils.events.debounce((function(e){var s=e.target||e.srcElement;t.search(s.value,i.search)}),t.searchDelay)),function(e,s){t.search(e,s,i.search)}}},709:function(t,e,i){var s=i(915),a=i(209),n=i(841),r=i(191),o=i(744),g=i(631),l=i(650),h=i(961),I=i(63);t.exports=function(t,e,c){var C,d=this,p=i(266)(d),m=i(281)(d),u=i(101)(d);C={start:function(){d.listClass="list",d.searchClass="search",d.sortClass="sort",d.page=1e4,d.i=1,d.items=[],d.visibleItems=[],d.matchingItems=[],d.searched=!1,d.filtered=!1,d.searchColumns=void 0,d.searchDelay=0,d.handlers={updated:[]},d.valueNames=[],d.utils={getByClass:a,extend:n,indexOf:r,events:o,toString:g,naturalSort:s,classes:l,getAttribute:h,toArray:I},d.utils.extend(d,e),d.listContainer="string"==typeof t?document.getElementById(t):t,d.listContainer&&(d.list=a(d.listContainer,d.listClass,!0),d.parse=i(607)(d),d.templater=i(269)(d),d.search=i(108)(d),d.filter=i(332)(d),d.sort=i(771)(d),d.fuzzySearch=i(916)(d,e.fuzzySearch),this.handlers(),this.items(),this.pagination(),d.update())},handlers:function(){for(var t in d.handlers)d[t]&&d.handlers.hasOwnProperty(t)&&d.on(t,d[t])},items:function(){d.parse(d.list),void 0!==c&&d.add(c)},pagination:function(){if(void 0!==e.pagination){!0===e.pagination&&(e.pagination=[{}]),void 0===e.pagination[0]&&(e.pagination=[e.pagination]);for(var t=0,i=e.pagination.length;t<i;t++)u(e.pagination[t])}}},this.reIndex=function(){d.items=[],d.visibleItems=[],d.matchingItems=[],d.searched=!1,d.filtered=!1,d.parse(d.list)},this.toJSON=function(){for(var t=[],e=0,i=d.items.length;e<i;e++)t.push(d.items[e].values());return t},this.add=function(t,e){if(0!==t.length){if(!e){var i=[],s=!1;void 0===t[0]&&(t=[t]);for(var a=0,n=t.length;a<n;a++){var r;s=d.items.length>d.page,r=new p(t[a],void 0,s),d.items.push(r),i.push(r)}return d.update(),i}m(t.slice(0),e)}},this.show=function(t,e){return this.i=t,this.page=e,d.update(),d},this.remove=function(t,e,i){for(var s=0,a=0,n=d.items.length;a<n;a++)d.items[a].values()[t]==e&&(d.templater.remove(d.items[a],i),d.items.splice(a,1),n--,a--,s++);return d.update(),s},this.get=function(t,e){for(var i=[],s=0,a=d.items.length;s<a;s++){var n=d.items[s];n.values()[t]==e&&i.push(n)}return i},this.size=function(){return d.items.length},this.clear=function(){return d.templater.clear(),d.items=[],d},this.on=function(t,e){return d.handlers[t].push(e),d},this.off=function(t,e){var i=d.handlers[t],s=r(i,e);return s>-1&&i.splice(s,1),d},this.trigger=function(t){for(var e=d.handlers[t].length;e--;)d.handlers[t][e](d);return d},this.reset={filter:function(){for(var t=d.items,e=t.length;e--;)t[e].filtered=!1;return d},search:function(){for(var t=d.items,e=t.length;e--;)t[e].found=!1;return d}},this.update=function(){var t=d.items,e=t.length;d.visibleItems=[],d.matchingItems=[],d.templater.clear();for(var i=0;i<e;i++)t[i].matching()&&d.matchingItems.length+1>=d.i&&d.visibleItems.length<d.page?(t[i].show(),d.visibleItems.push(t[i]),d.matchingItems.push(t[i])):t[i].matching()?(d.matchingItems.push(t[i]),t[i].hide()):t[i].hide();return d.trigger("updated"),d},C.start()}},266:function(t){t.exports=function(t){return function(e,i,s){var a=this;this._values={},this.found=!1,this.filtered=!1,this.values=function(e,i){if(void 0===e)return a._values;for(var s in e)a._values[s]=e[s];!0!==i&&t.templater.set(a,a.values())},this.show=function(){t.templater.show(a)},this.hide=function(){t.templater.hide(a)},this.matching=function(){return t.filtered&&t.searched&&a.found&&a.filtered||t.filtered&&!t.searched&&a.filtered||!t.filtered&&t.searched&&a.found||!t.filtered&&!t.searched},this.visible=function(){return!(!a.elm||a.elm.parentNode!=t.list)},function(e,i,s){if(void 0===i)s?a.values(e,s):a.values(e);else{a.elm=i;var n=t.templater.get(a,e);a.values(n)}}(e,i,s)}}},101:function(t,e,i){var s=i(650),a=i(744),n=i(709);t.exports=function(t){var e=!1,i=function(i,a){if(t.page<1)return t.listContainer.style.display="none",void(e=!0);e&&(t.listContainer.style.display="block");var n,o=t.matchingItems.length,g=t.i,l=t.page,h=Math.ceil(o/l),I=Math.ceil(g/l),c=a.innerWindow||2,C=a.left||a.outerWindow||0,d=a.right||a.outerWindow||0;d=h-d,i.clear();for(var p=1;p<=h;p++){var m=I===p?"active":"";r.number(p,C,d,I,c)?(n=i.add({page:p,dotted:!1})[0],m&&s(n.elm).add(m),n.elm.firstChild.setAttribute("data-i",p),n.elm.firstChild.setAttribute("data-page",l)):r.dotted(i,p,C,d,I,c,i.size())&&(n=i.add({page:"...",dotted:!0})[0],s(n.elm).add("disabled"))}},r={number:function(t,e,i,s,a){return this.left(t,e)||this.right(t,i)||this.innerWindow(t,s,a)},left:function(t,e){return t<=e},right:function(t,e){return t>e},innerWindow:function(t,e,i){return t>=e-i&&t<=e+i},dotted:function(t,e,i,s,a,n,r){return this.dottedLeft(t,e,i,s,a,n)||this.dottedRight(t,e,i,s,a,n,r)},dottedLeft:function(t,e,i,s,a,n){return e==i+1&&!this.innerWindow(e,a,n)&&!this.right(e,s)},dottedRight:function(t,e,i,s,a,n,r){return!t.items[r-1].values().dotted&&e==s&&!this.innerWindow(e,a,n)&&!this.right(e,s)}};return function(e){var s=new n(t.listContainer.id,{listClass:e.paginationClass||"pagination",item:e.item||"<li><a class='page' href='#'></a></li>",valueNames:["page","dotted"],searchClass:"pagination-search-that-is-not-supposed-to-exist",sortClass:"pagination-sort-that-is-not-supposed-to-exist"});a.bind(s.listContainer,"click",(function(e){var i=e.target||e.srcElement,s=t.utils.getAttribute(i,"data-page"),a=t.utils.getAttribute(i,"data-i");a&&t.show((a-1)*s+1,s)})),t.on("updated",(function(){i(s,e)})),i(s,e)}}},607:function(t,e,i){t.exports=function(t){var e=i(266)(t),s=function(i,s){for(var a=0,n=i.length;a<n;a++)t.items.push(new e(s,i[a]))},a=function(e,i){var n=e.splice(0,50);s(n,i),e.length>0?setTimeout((function(){a(e,i)}),1):(t.update(),t.trigger("parseComplete"))};return t.handlers.parseComplete=t.handlers.parseComplete||[],function(){var e=function(t){for(var e=t.childNodes,i=[],s=0,a=e.length;s<a;s++)void 0===e[s].data&&i.push(e[s]);return i}(t.list),i=t.valueNames;t.indexAsync?a(e,i):s(e,i)}}},108:function(t){t.exports=function(t){var e,i,s,a={resetList:function(){t.i=1,t.templater.clear(),s=void 0},setOptions:function(t){2==t.length&&t[1]instanceof Array?e=t[1]:2==t.length&&"function"==typeof t[1]?(e=void 0,s=t[1]):3==t.length?(e=t[1],s=t[2]):e=void 0},setColumns:function(){0!==t.items.length&&void 0===e&&(e=void 0===t.searchColumns?a.toArray(t.items[0].values()):t.searchColumns)},setSearchString:function(e){e=(e=t.utils.toString(e).toLowerCase()).replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),i=e},toArray:function(t){var e=[];for(var i in t)e.push(i);return e}},n=function(n){return t.trigger("searchStart"),a.resetList(),a.setSearchString(n),a.setOptions(arguments),a.setColumns(),""===i?(t.reset.search(),t.searched=!1):(t.searched=!0,s?s(i,e):function(){for(var s,a=[],n=i;null!==(s=n.match(/"([^"]+)"/));)a.push(s[1]),n=n.substring(0,s.index)+n.substring(s.index+s[0].length);(n=n.trim()).length&&(a=a.concat(n.split(/\s+/)));for(var r=0,o=t.items.length;r<o;r++){var g=t.items[r];if(g.found=!1,a.length){for(var l=0,h=a.length;l<h;l++){for(var I=!1,c=0,C=e.length;c<C;c++){var d=g.values(),p=e[c];if(d.hasOwnProperty(p)&&void 0!==d[p]&&null!==d[p]&&-1!==("string"!=typeof d[p]?d[p].toString():d[p]).toLowerCase().indexOf(a[l])){I=!0;break}}if(!I)break}g.found=I}}}()),t.update(),t.trigger("searchComplete"),t.visibleItems};return t.handlers.searchStart=t.handlers.searchStart||[],t.handlers.searchComplete=t.handlers.searchComplete||[],t.utils.events.bind(t.utils.getByClass(t.listContainer,t.searchClass),"keyup",t.utils.events.debounce((function(e){var i=e.target||e.srcElement;""===i.value&&!t.searched||n(i.value)}),t.searchDelay)),t.utils.events.bind(t.utils.getByClass(t.listContainer,t.searchClass),"input",(function(t){""===(t.target||t.srcElement).value&&n("")})),n}},771:function(t){t.exports=function(t){var e={els:void 0,clear:function(){for(var i=0,s=e.els.length;i<s;i++)t.utils.classes(e.els[i]).remove("asc"),t.utils.classes(e.els[i]).remove("desc")},getOrder:function(e){var i=t.utils.getAttribute(e,"data-order");return"asc"==i||"desc"==i?i:t.utils.classes(e).has("desc")?"asc":t.utils.classes(e).has("asc")?"desc":"asc"},getInSensitive:function(e,i){var s=t.utils.getAttribute(e,"data-insensitive");i.insensitive="false"!==s},setOrder:function(i){for(var s=0,a=e.els.length;s<a;s++){var n=e.els[s];if(t.utils.getAttribute(n,"data-sort")===i.valueName){var r=t.utils.getAttribute(n,"data-order");"asc"==r||"desc"==r?r==i.order&&t.utils.classes(n).add(i.order):t.utils.classes(n).add(i.order)}}}},i=function(){t.trigger("sortStart");var i={},s=arguments[0].currentTarget||arguments[0].srcElement||void 0;s?(i.valueName=t.utils.getAttribute(s,"data-sort"),e.getInSensitive(s,i),i.order=e.getOrder(s)):((i=arguments[1]||i).valueName=arguments[0],i.order=i.order||"asc",i.insensitive=void 0===i.insensitive||i.insensitive),e.clear(),e.setOrder(i);var a,n=i.sortFunction||t.sortFunction||null,r="desc"===i.order?-1:1;a=n?function(t,e){return n(t,e,i)*r}:function(e,s){var a=t.utils.naturalSort;return a.alphabet=t.alphabet||i.alphabet||void 0,!a.alphabet&&i.insensitive&&(a=t.utils.naturalSort.caseInsensitive),a(e.values()[i.valueName],s.values()[i.valueName])*r},t.items.sort(a),t.update(),t.trigger("sortComplete")};return t.handlers.sortStart=t.handlers.sortStart||[],t.handlers.sortComplete=t.handlers.sortComplete||[],e.els=t.utils.getByClass(t.listContainer,t.sortClass),t.utils.events.bind(e.els,"click",i),t.on("searchStart",e.clear),t.on("filterStart",e.clear),i}},269:function(t){var e=function(t){var e,i=this,s=function(t){if("string"==typeof t){if(/<tr[\s>]/g.exec(t)){var e=document.createElement("tbody");return e.innerHTML=t,e.firstElementChild}if(-1!==t.indexOf("<")){var i=document.createElement("div");return i.innerHTML=t,i.firstElementChild}}},a=function(e,i,s){var a=void 0,n=function(e){for(var i=0,s=t.valueNames.length;i<s;i++){var a=t.valueNames[i];if(a.data){for(var n=a.data,r=0,o=n.length;r<o;r++)if(n[r]===e)return{data:e}}else{if(a.attr&&a.name&&a.name==e)return a;if(a===e)return e}}}(i);n&&(n.data?e.elm.setAttribute("data-"+n.data,s):n.attr&&n.name?(a=t.utils.getByClass(e.elm,n.name,!0))&&a.setAttribute(n.attr,s):(a=t.utils.getByClass(e.elm,n,!0))&&(a.innerHTML=s))};this.get=function(e,s){i.create(e);for(var a={},n=0,r=s.length;n<r;n++){var o=void 0,g=s[n];if(g.data)for(var l=0,h=g.data.length;l<h;l++)a[g.data[l]]=t.utils.getAttribute(e.elm,"data-"+g.data[l]);else g.attr&&g.name?(o=t.utils.getByClass(e.elm,g.name,!0),a[g.name]=o?t.utils.getAttribute(o,g.attr):""):(o=t.utils.getByClass(e.elm,g,!0),a[g]=o?o.innerHTML:"")}return a},this.set=function(t,e){if(!i.create(t))for(var s in e)e.hasOwnProperty(s)&&a(t,s,e[s])},this.create=function(t){return void 0===t.elm&&(t.elm=e(t.values()),i.set(t,t.values()),!0)},this.remove=function(e){e.elm.parentNode===t.list&&t.list.removeChild(e.elm)},this.show=function(e){i.create(e),t.list.appendChild(e.elm)},this.hide=function(e){void 0!==e.elm&&e.elm.parentNode===t.list&&t.list.removeChild(e.elm)},this.clear=function(){if(t.list.hasChildNodes())for(;t.list.childNodes.length>=1;)t.list.removeChild(t.list.firstChild)},function(){var i;if("function"!=typeof t.item){if(!(i="string"==typeof t.item?-1===t.item.indexOf("<")?document.getElementById(t.item):s(t.item):function(){for(var e=t.list.childNodes,i=0,s=e.length;i<s;i++)if(void 0===e[i].data)return e[i].cloneNode(!0)}()))throw new Error("The list needs to have at least one item on init otherwise you'll have to add a template.");i=function(e,i){var s=e.cloneNode(!0);s.removeAttribute("id");for(var a=0,n=i.length;a<n;a++){var r=void 0,o=i[a];if(o.data)for(var g=0,l=o.data.length;g<l;g++)s.setAttribute("data-"+o.data[g],"");else o.attr&&o.name?(r=t.utils.getByClass(s,o.name,!0))&&r.setAttribute(o.attr,""):(r=t.utils.getByClass(s,o,!0))&&(r.innerHTML="")}return s}(i,t.valueNames),e=function(){return i.cloneNode(!0)}}else e=function(e){var i=t.item(e);return s(i)}}()};t.exports=function(t){return new e(t)}},650:function(t,e,i){var s=i(191),a=/\s+/;function n(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}Object.prototype.toString,t.exports=function(t){return new n(t)},n.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~s(e,t)||e.push(t),this.el.className=e.join(" "),this},n.prototype.remove=function(t){if(this.list)return this.list.remove(t),this;var e=this.array(),i=s(e,t);return~i&&e.splice(i,1),this.el.className=e.join(" "),this},n.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},n.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(a);return""===t[0]&&t.shift(),t},n.prototype.has=n.prototype.contains=function(t){return this.list?this.list.contains(t):!!~s(this.array(),t)}},744:function(t,e,i){var s=window.addEventListener?"addEventListener":"attachEvent",a=window.removeEventListener?"removeEventListener":"detachEvent",n="addEventListener"!==s?"on":"",r=i(63);e.bind=function(t,e,i,a){for(var o=0,g=(t=r(t)).length;o<g;o++)t[o][s](n+e,i,a||!1)},e.unbind=function(t,e,i,s){for(var o=0,g=(t=r(t)).length;o<g;o++)t[o][a](n+e,i,s||!1)},e.debounce=function(t,e,i){var s;return e?function(){var a=this,n=arguments,r=i&&!s;clearTimeout(s),s=setTimeout((function(){s=null,i||t.apply(a,n)}),e),r&&t.apply(a,n)}:t}},841:function(t){t.exports=function(t){for(var e,i=Array.prototype.slice.call(arguments,1),s=0;e=i[s];s++)if(e)for(var a in e)t[a]=e[a];return t}},294:function(t){t.exports=function(t,e,i){var s=i.location||0,a=i.distance||100,n=i.threshold||.4;if(e===t)return!0;if(e.length>32)return!1;var r=s,o=function(){var t,i={};for(t=0;t<e.length;t++)i[e.charAt(t)]=0;for(t=0;t<e.length;t++)i[e.charAt(t)]|=1<<e.length-t-1;return i}();function g(t,i){var s=t/e.length,n=Math.abs(r-i);return a?s+n/a:n?1:s}var l=n,h=t.indexOf(e,r);-1!=h&&(l=Math.min(g(0,h),l),-1!=(h=t.lastIndexOf(e,r+e.length))&&(l=Math.min(g(0,h),l)));var I,c,C=1<<e.length-1;h=-1;for(var d,p=e.length+t.length,m=0;m<e.length;m++){for(I=0,c=p;I<c;)g(m,r+c)<=l?I=c:p=c,c=Math.floor((p-I)/2+I);p=c;var u=Math.max(1,r-c+1),A=Math.min(r+c,t.length)+e.length,f=Array(A+2);f[A+1]=(1<<m)-1;for(var y=A;y>=u;y--){var b=o[t.charAt(y-1)];if(f[y]=0===m?(f[y+1]<<1|1)&b:(f[y+1]<<1|1)&b|(d[y+1]|d[y])<<1|1|d[y+1],f[y]&C){var v=g(m,y-1);if(v<=l){if(l=v,!((h=y-1)>r))break;u=Math.max(1,2*r-h)}}}if(g(m+1,r)>l)break;d=f}return!(h<0)}},961:function(t){t.exports=function(t,e){var i=t.getAttribute&&t.getAttribute(e)||null;if(!i)for(var s=t.attributes,a=s.length,n=0;n<a;n++)void 0!==s[n]&&s[n].nodeName===e&&(i=s[n].nodeValue);return i}},209:function(t){t.exports=function(t,e,i,s){return(s=s||{}).test&&s.getElementsByClassName||!s.test&&document.getElementsByClassName?function(t,e,i){return i?t.getElementsByClassName(e)[0]:t.getElementsByClassName(e)}(t,e,i):s.test&&s.querySelector||!s.test&&document.querySelector?function(t,e,i){return e="."+e,i?t.querySelector(e):t.querySelectorAll(e)}(t,e,i):function(t,e,i){for(var s=[],a=t.getElementsByTagName("*"),n=a.length,r=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0,g=0;o<n;o++)if(r.test(a[o].className)){if(i)return a[o];s[g]=a[o],g++}return s}(t,e,i)}},191:function(t){var e=[].indexOf;t.exports=function(t,i){if(e)return t.indexOf(i);for(var s=0,a=t.length;s<a;++s)if(t[s]===i)return s;return-1}},63:function(t){t.exports=function(t){if(void 0===t)return[];if(null===t)return[null];if(t===window)return[window];if("string"==typeof t)return[t];if(function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t))return t;if("number"!=typeof t.length)return[t];if("function"==typeof t&&t instanceof Function)return[t];for(var e=[],i=0,s=t.length;i<s;i++)(Object.prototype.hasOwnProperty.call(t,i)||i in t)&&e.push(t[i]);return e.length?e:[]}},631:function(t){t.exports=function(t){return(t=null===(t=void 0===t?"":t)?"":t).toString()}},248:function(module,exports,__webpack_require__){var factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var i,s,a=t.length;for(i=0;i<a;i+=1)for(var n in s=t[i].prototype)Object.prototype.hasOwnProperty.call(s,n)&&(e.prototype[n]=s[n])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(t,e){var i,s=0,a=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(s=0;s<e;s+=1)a.push(i);return a}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,i){return"float32"===e?new Float32Array(i):"int16"===e?new Int16Array(i):"uint8c"===e?new Uint8ClampedArray(i):t(e,i)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],i=e.length;for(t=0;t<i;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===_typeof$6(t)&&t.length){var e,i=createSizedArray(t.length),s=t.length;for(e=0;e<s;e+=1)i[e]=Math.abs(t[e]);return i}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){_shouldRoundValues=!!t}function bmRnd(t){return _shouldRoundValues?Math.round(t):t}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,i,s){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=s<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,i,s){this.type=t,this.currentLoop=i,this.totalLoops=e,this.direction=s<0?-1:1}function BMSegmentStartEvent(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(t,e,i){var s,a,n,r,o,g,l,h;switch(g=i*(1-e),l=i*(1-(o=6*t-(r=Math.floor(6*t)))*e),h=i*(1-(1-o)*e),r%6){case 0:s=i,a=h,n=g;break;case 1:s=l,a=i,n=g;break;case 2:s=g,a=i,n=h;break;case 3:s=g,a=l,n=i;break;case 4:s=h,a=g,n=i;break;case 5:s=i,a=g,n=l}return[s,a,n]}function RGBtoHSV(t,e,i){var s,a=Math.max(t,e,i),n=Math.min(t,e,i),r=a-n,o=0===a?0:r/a,g=a/255;switch(a){case n:s=0;break;case t:s=e-i+r*(e<i?6:0),s/=6*r;break;case e:s=i-t+2*r,s/=6*r;break;case i:s=t-e+4*r,s/=6*r}return[s,o,g]}function addSaturationToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}var rgbToHex=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1===e.length?"0"+e:e;return function(t,e,s){return t<0&&(t=0),e<0&&(e=0),s<0&&(s=0),"#"+i[t]+i[e]+i[s]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t},getIdPrefix=function(){return idPrefix$1};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(t)}var dataManager=function(){var t,e,i=1,s=[],a={onmessage:function(){},postMessage:function(e){t({data:e})}},n={postMessage:function(t){a.onmessage({data:t})}};function r(){e||(e=function(e){if(window.Worker&&window.Blob&&getWebWorker()){var i=new Blob(["var _workerSelf = self; self.onmessage = ",e.toString()],{type:"text/javascript"}),s=URL.createObjectURL(i);return new Worker(s)}return t=e,a}((function(t){if(n.dataManager||(n.dataManager=function(){function t(a,n){var r,o,g,l,h,I,c,C=a.length;for(o=0;o<C;o+=1)if("ks"in(r=a[o])&&!r.completed){if(r.completed=!0,r.hasMask){var d=r.masksProperties;for(l=d.length,g=0;g<l;g+=1)if(d[g].pt.k.i)s(d[g].pt.k);else for(I=d[g].pt.k.length,h=0;h<I;h+=1)d[g].pt.k[h].s&&s(d[g].pt.k[h].s[0]),d[g].pt.k[h].e&&s(d[g].pt.k[h].e[0])}0===r.ty?(r.layers=e(r.refId,n),t(r.layers,n)):4===r.ty?i(r.shapes):5===r.ty&&(0===(c=r).t.a.length&&c.t.p)}}function e(t,e){var i=function(t,e){for(var i=0,s=e.length;i<s;){if(e[i].id===t)return e[i];i+=1}return null}(t,e);return i?i.layers.__used?JSON.parse(JSON.stringify(i.layers)):(i.layers.__used=!0,i.layers):null}function i(t){var e,a,n;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)s(t[e].ks.k);else for(n=t[e].ks.k.length,a=0;a<n;a+=1)t[e].ks.k[a].s&&s(t[e].ks.k[a].s[0]),t[e].ks.k[a].e&&s(t[e].ks.k[a].e[0]);else"gr"===t[e].ty&&i(t[e].it)}function s(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function a(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&null))}var n,r=function(){var t=[4,4,14];function e(t){var e,i,s,a=t.length;for(e=0;e<a;e+=1)5===t[e].ty&&(void 0,s=(i=t[e]).t.d,i.t.d={k:[{s:s,t:0}]})}return function(i){if(a(t,i.v)&&(e(i.layers),i.assets)){var s,n=i.assets.length;for(s=0;s<n;s+=1)i.assets[s].layers&&e(i.assets[s].layers)}}}(),o=(n=[4,7,99],function(t){if(t.chars&&!a(n,t.v)){var e,s=t.chars.length;for(e=0;e<s;e+=1){var r=t.chars[e];r.data&&r.data.shapes&&(i(r.data.shapes),r.data.ip=0,r.data.op=99999,r.data.st=0,r.data.sr=1,r.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[e].t||(r.data.shapes.push({ty:"no"}),r.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),g=function(){var t=[5,7,15];function e(t){var e,i,s=t.length;for(e=0;e<s;e+=1)5===t[e].ty&&(i=void 0,"number"==typeof(i=t[e].t.p).a&&(i.a={a:0,k:i.a}),"number"==typeof i.p&&(i.p={a:0,k:i.p}),"number"==typeof i.r&&(i.r={a:0,k:i.r}))}return function(i){if(a(t,i.v)&&(e(i.layers),i.assets)){var s,n=i.assets.length;for(s=0;s<n;s+=1)i.assets[s].layers&&e(i.assets[s].layers)}}}(),l=function(){var t=[4,1,9];function e(t){var i,s,a,n=t.length;for(i=0;i<n;i+=1)if("gr"===t[i].ty)e(t[i].it);else if("fl"===t[i].ty||"st"===t[i].ty)if(t[i].c.k&&t[i].c.k[0].i)for(a=t[i].c.k.length,s=0;s<a;s+=1)t[i].c.k[s].s&&(t[i].c.k[s].s[0]/=255,t[i].c.k[s].s[1]/=255,t[i].c.k[s].s[2]/=255,t[i].c.k[s].s[3]/=255),t[i].c.k[s].e&&(t[i].c.k[s].e[0]/=255,t[i].c.k[s].e[1]/=255,t[i].c.k[s].e[2]/=255,t[i].c.k[s].e[3]/=255);else t[i].c.k[0]/=255,t[i].c.k[1]/=255,t[i].c.k[2]/=255,t[i].c.k[3]/=255}function i(t){var i,s=t.length;for(i=0;i<s;i+=1)4===t[i].ty&&e(t[i].shapes)}return function(e){if(a(t,e.v)&&(i(e.layers),e.assets)){var s,n=e.assets.length;for(s=0;s<n;s+=1)e.assets[s].layers&&i(e.assets[s].layers)}}}(),h=function(){var t=[4,4,18];function e(t){var i,s,a;for(i=t.length-1;i>=0;i-=1)if("sh"===t[i].ty)if(t[i].ks.k.i)t[i].ks.k.c=t[i].closed;else for(a=t[i].ks.k.length,s=0;s<a;s+=1)t[i].ks.k[s].s&&(t[i].ks.k[s].s[0].c=t[i].closed),t[i].ks.k[s].e&&(t[i].ks.k[s].e[0].c=t[i].closed);else"gr"===t[i].ty&&e(t[i].it)}function i(t){var i,s,a,n,r,o,g=t.length;for(s=0;s<g;s+=1){if((i=t[s]).hasMask){var l=i.masksProperties;for(n=l.length,a=0;a<n;a+=1)if(l[a].pt.k.i)l[a].pt.k.c=l[a].cl;else for(o=l[a].pt.k.length,r=0;r<o;r+=1)l[a].pt.k[r].s&&(l[a].pt.k[r].s[0].c=l[a].cl),l[a].pt.k[r].e&&(l[a].pt.k[r].e[0].c=l[a].cl)}4===i.ty&&e(i.shapes)}}return function(e){if(a(t,e.v)&&(i(e.layers),e.assets)){var s,n=e.assets.length;for(s=0;s<n;s+=1)e.assets[s].layers&&i(e.assets[s].layers)}}}();var I={completeData:function(i){i.__complete||(l(i),r(i),o(i),g(i),h(i),t(i.layers,i.assets),function(i,s){if(i){var a=0,n=i.length;for(a=0;a<n;a+=1)1===i[a].t&&(i[a].data.layers=e(i[a].data.refId,s),t(i[a].data.layers,s))}}(i.chars,i.assets),i.__complete=!0)}};return I.checkColors=l,I.checkChars=o,I.checkPathProperties=g,I.checkShapes=h,I.completeLayers=t,I}()),n.assetLoader||(n.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===_typeof$5(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(e,i,s,a){var n,r=new XMLHttpRequest;try{r.responseType="json"}catch(t){}r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)n=t(r),s(n);else try{n=t(r),s(n)}catch(t){a&&a(t)}};try{r.open(["G","E","T"].join(""),e,!0)}catch(t){r.open(["G","E","T"].join(""),i+"/"+e,!0)}r.send()}}}()),"loadAnimation"===t.data.type)n.assetLoader.load(t.data.path,t.data.fullPath,(function(e){n.dataManager.completeData(e),n.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){n.postMessage({id:t.data.id,status:"error"})}));else if("complete"===t.data.type){var e=t.data.animation;n.dataManager.completeData(e),n.postMessage({id:t.data.id,payload:e,status:"success"})}else"loadData"===t.data.type&&n.assetLoader.load(t.data.path,t.data.fullPath,(function(e){n.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){n.postMessage({id:t.data.id,status:"error"})}))})),e.onmessage=function(t){var e=t.data,i=e.id,a=s[i];s[i]=null,"success"===e.status?a.onComplete(e.payload):a.onError&&a.onError()})}function o(t,e){var a="processId_"+(i+=1);return s[a]={onComplete:t,onError:e},a}return{loadAnimation:function(t,i,s){r();var a=o(i,s);e.postMessage({type:"loadAnimation",path:t,fullPath:window.location.origin+window.location.pathname,id:a})},loadData:function(t,i,s){r();var a=o(i,s);e.postMessage({type:"loadData",path:t,fullPath:window.location.origin+window.location.pathname,id:a})},completeAnimation:function(t,i,s){r();var a=o(i,s);e.postMessage({type:"complete",animation:t,id:a})}}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(t,e,i){var s="";if(t.e)s=t.p;else if(e){var a=t.p;-1!==a.indexOf("images/")&&(a=a.split("/")[1]),s=e+a}else s=i,s+=t.u?t.u:"",s+=t.p;return s}function a(t){var e=0,i=setInterval(function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(i)),e+=1}.bind(this),50)}function n(t){var e={assetData:t},i=s(t,this.assetsPath,this.path);return dataManager.loadData(i,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}function r(){this._imageLoaded=e.bind(this),this._footageLoaded=i.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=n.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return r.prototype={loadAssets:function(t,e){var i;this.imagesLoadedCb=e;var s=t.length;for(i=0;i<s;i+=1)t[i].layers||(t[i].t&&"seq"!==t[i].t?3===t[i].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[i]))):(this.totalImages+=1,this.images.push(this._createImageData(t[i]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,i=this.images.length;e<i;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(e){var i=s(e,this.assetsPath,this.path),a=createTag("img");a.crossOrigin="anonymous",a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",function(){n.img=t,this._imageLoaded()}.bind(this),!1),a.src=i;var n={img:a,assetData:e};return n},createImageData:function(e){var i=s(e,this.assetsPath,this.path),a=createNS("image");isSafari?this.testImageLoaded(a):a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",function(){n.img=t,this._imageLoaded()}.bind(this),!1),a.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this._elementHelper.append?this._elementHelper.append(a):this._elementHelper.appendChild(a);var n={img:a,assetData:e};return n},imageLoaded:e,footageLoaded:i,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},r}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var i=this._cbs[t],s=0;s<i.length;s+=1)i[s](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var i=0,s=this._cbs[t].length;i<s;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,s-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var markerParser=function(){function t(t){for(var e,i=t.split("\r\n"),s={},a=0,n=0;n<i.length;n+=1)2===(e=i[n].split(":")).length&&(s[e[0]]=e[1].trim(),a+=1);if(0===a)throw new Error;return s}return function(e){for(var i=[],s=0;s<e.length;s+=1){var a=e[s],n={time:a.tm,duration:a.dr};try{n.payload=JSON.parse(e[s].cm)}catch(i){try{n.payload=t(e[s].cm)}catch(t){n.payload={name:e[s].cm}}}i.push(n)}return i}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,i=this.compositions.length;e<i;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var i=getRenderer(e);this.renderer=new i(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&"object"!==_typeof$4(e)&&(e=JSON.parse(e));var i={wrapper:t,animationData:e},s=t.attributes;i.path=s.getNamedItem("data-animation-path")?s.getNamedItem("data-animation-path").value:s.getNamedItem("data-bm-path")?s.getNamedItem("data-bm-path").value:s.getNamedItem("bm-path")?s.getNamedItem("bm-path").value:"",i.animType=s.getNamedItem("data-anim-type")?s.getNamedItem("data-anim-type").value:s.getNamedItem("data-bm-type")?s.getNamedItem("data-bm-type").value:s.getNamedItem("bm-type")?s.getNamedItem("bm-type").value:s.getNamedItem("data-bm-renderer")?s.getNamedItem("data-bm-renderer").value:s.getNamedItem("bm-renderer")?s.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=s.getNamedItem("data-anim-loop")?s.getNamedItem("data-anim-loop").value:s.getNamedItem("data-bm-loop")?s.getNamedItem("data-bm-loop").value:s.getNamedItem("bm-loop")?s.getNamedItem("bm-loop").value:"";"false"===a?i.loop=!1:"true"===a?i.loop=!0:""!==a&&(i.loop=parseInt(a,10));var n=s.getNamedItem("data-anim-autoplay")?s.getNamedItem("data-anim-autoplay").value:s.getNamedItem("data-bm-autoplay")?s.getNamedItem("data-bm-autoplay").value:!s.getNamedItem("bm-autoplay")||s.getNamedItem("bm-autoplay").value;i.autoplay="false"!==n,i.name=s.getNamedItem("data-name")?s.getNamedItem("data-name").value:s.getNamedItem("data-bm-name")?s.getNamedItem("data-bm-name").value:s.getNamedItem("bm-name")?s.getNamedItem("bm-name").value:"","false"===(s.getNamedItem("data-anim-prerender")?s.getNamedItem("data-anim-prerender").value:s.getNamedItem("data-bm-prerender")?s.getNamedItem("data-bm-prerender").value:s.getNamedItem("bm-prerender")?s.getNamedItem("bm-prerender").value:"")&&(i.prerender=!1),i.path?this.setParams(i):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,i,s=this.animationData.layers,a=s.length,n=t.layers,r=n.length;for(i=0;i<r;i+=1)for(e=0;e<a;){if(s[e].id===n[i].id){s[e]=n[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(a=t.assets.length,e=0;e<a;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(i,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var i="number"==typeof t?t:void 0,s="number"==typeof e?e:void 0;this.renderer.updateContainerSize(i,s)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,i=0;i<this.markers.length;i+=1)if((e=this.markers[i]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,i){if(!i||this.name===i){var s=Number(t);if(isNaN(s)){var a=this.getMarkerData(t);a&&this.goToAndStop(a.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,i){if(!i||this.name===i){var s=Number(t);if(isNaN(s)){var a=this.getMarkerData(t);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(s,e,i);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,i=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(i=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(i=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),i&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==i&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===_typeof$4(t[0])){var i,s=t.length;for(i=0;i<s;i+=1)this.segments.push(t[i])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,i){try{this.renderer.getElementByPath(t).updateDocumentData(e,i)}catch(t){}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],i=0,s=0,a=0,n=!0,r=!1;function o(t){for(var i=0,a=t.target;i<s;)e[i].animation===a&&(e.splice(i,1),i-=1,s-=1,a.isPaused||h()),i+=1}function g(t,i){if(!t)return null;for(var a=0;a<s;){if(e[a].elem===t&&null!==e[a].elem)return e[a].animation;a+=1}var n=new AnimationItem;return I(n,t),n.setData(t,i),n}function l(){a+=1,d()}function h(){a-=1}function I(t,i){t.addEventListener("destroy",o),t.addEventListener("_active",l),t.addEventListener("_idle",h),e.push({elem:i,animation:t}),s+=1}function c(t){var o,g=t-i;for(o=0;o<s;o+=1)e[o].animation.advanceTime(g);i=t,a&&!r?window.requestAnimationFrame(c):n=!0}function C(t){i=t,window.requestAnimationFrame(c)}function d(){!r&&a&&n&&(window.requestAnimationFrame(C),n=!1)}return t.registerAnimation=g,t.loadAnimation=function(t){var e=new AnimationItem;return I(e,null),e.setParams(t),e},t.setSpeed=function(t,i){var a;for(a=0;a<s;a+=1)e[a].animation.setSpeed(t,i)},t.setDirection=function(t,i){var a;for(a=0;a<s;a+=1)e[a].animation.setDirection(t,i)},t.play=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.play(t)},t.pause=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.pause(t)},t.stop=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.stop(t)},t.togglePause=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.togglePause(t)},t.searchAnimations=function(t,e,i){var s,a=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),n=a.length;for(s=0;s<n;s+=1)i&&a[s].setAttribute("data-bm-type",i),g(a[s],t);if(e&&0===n){i||(i="svg");var r=document.getElementsByTagName("body")[0];r.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",i),r.appendChild(o),g(o,t)}},t.resize=function(){var t;for(t=0;t<s;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,i,a){var n;for(n=0;n<s;n+=1)e[n].animation.goToAndStop(t,i,a)},t.destroy=function(t){var i;for(i=s-1;i>=0;i-=1)e[i].animation.destroy(t)},t.freeze=function(){r=!0},t.unfreeze=function(){r=!1,d()},t.setVolume=function(t,i){var a;for(a=0;a<s;a+=1)e[a].animation.setVolume(t,i)},t.mute=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.mute(t)},t.unmute=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,i=e.length,s=[];for(t=0;t<i;t+=1)s.push(e[t].animation);return s},t}(),BezierFactory=function(){var t={getBezierEasing:function(t,i,s,a,n){var r=n||("bez_"+t+"_"+i+"_"+s+"_"+a).replace(/\./g,"p");if(e[r])return e[r];var o=new h([t,i,s,a]);return e[r]=o,o}},e={},i=11,s=1/(i-1),a="function"==typeof Float32Array;function n(t,e){return 1-3*e+3*t}function r(t,e){return 3*e-6*t}function o(t){return 3*t}function g(t,e,i){return((n(e,i)*t+r(e,i))*t+o(e))*t}function l(t,e,i){return 3*n(e,i)*t*t+2*r(e,i)*t+o(e)}function h(t){this._p=t,this._mSampleValues=a?new Float32Array(i):new Array(i),this._precomputed=!1,this.get=this.get.bind(this)}return h.prototype={get:function(t){var e=this._p[0],i=this._p[1],s=this._p[2],a=this._p[3];return this._precomputed||this._precompute(),e===i&&s===a?t:0===t?0:1===t?1:g(this._getTForX(t),i,a)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],s=this._p[3];this._precomputed=!0,t===e&&i===s||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],a=0;a<i;++a)this._mSampleValues[a]=g(a*s,t,e)},_getTForX:function(t){for(var e=this._p[0],a=this._p[2],n=this._mSampleValues,r=0,o=1,h=i-1;o!==h&&n[o]<=t;++o)r+=s;var I=r+(t-n[--o])/(n[o+1]-n[o])*s,c=l(I,e,a);return c>=.001?function(t,e,i,s){for(var a=0;a<4;++a){var n=l(e,i,s);if(0===n)return e;e-=(g(e,i,s)-t)/n}return e}(t,I,e,a):0===c?I:function(t,e,i,s,a){var n,r,o=0;do{(n=g(r=e+(i-e)/2,s,a)-t)>0?i=r:e=r}while(Math.abs(n)>1e-7&&++o<10);return r}(t,r,r+s,e,a)}},t}(),pooling={double:function(t){return t.concat(createSizedArray(t.length))}},poolFactory=function(t,e,i){var s=0,a=t,n=createSizedArray(a);return{newElement:function(){return s?n[s-=1]:e()},release:function(t){s===a&&(n=pooling.double(n),a*=2),i&&i(t),n[s]=t,s+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(t){var e,i=t.lengths.length;for(e=0;e<i;e+=1)bezierLengthPool.release(t.lengths[e]);t.lengths.length=0}));function bezFunction(){var t=Math;function e(t,e,i,s,a,n){var r=t*s+e*a+i*n-a*s-n*t-i*e;return r>-.001&&r<.001}var i=function(t,e,i,s){var a,n,r,o,g,l,h=getDefaultCurveSegments(),I=0,c=[],C=[],d=bezierLengthPool.newElement();for(r=i.length,a=0;a<h;a+=1){for(g=a/(h-1),l=0,n=0;n<r;n+=1)o=bmPow(1-g,3)*t[n]+3*bmPow(1-g,2)*g*i[n]+3*(1-g)*bmPow(g,2)*s[n]+bmPow(g,3)*e[n],c[n]=o,null!==C[n]&&(l+=bmPow(c[n]-C[n],2)),C[n]=c[n];l&&(I+=l=bmSqrt(l)),d.percents[a]=g,d.lengths[a]=I}return d.addedLength=I,d};function s(t){this.segmentLength=0,this.points=new Array(t)}function a(t,e){this.partialLength=t,this.point=e}var n,r=(n={},function(t,i,r,o){var g=(t[0]+"_"+t[1]+"_"+i[0]+"_"+i[1]+"_"+r[0]+"_"+r[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!n[g]){var l,h,I,c,C,d,p,m=getDefaultCurveSegments(),u=0,A=null;2===t.length&&(t[0]!==i[0]||t[1]!==i[1])&&e(t[0],t[1],i[0],i[1],t[0]+r[0],t[1]+r[1])&&e(t[0],t[1],i[0],i[1],i[0]+o[0],i[1]+o[1])&&(m=2);var f=new s(m);for(I=r.length,l=0;l<m;l+=1){for(p=createSizedArray(I),C=l/(m-1),d=0,h=0;h<I;h+=1)c=bmPow(1-C,3)*t[h]+3*bmPow(1-C,2)*C*(t[h]+r[h])+3*(1-C)*bmPow(C,2)*(i[h]+o[h])+bmPow(C,3)*i[h],p[h]=c,null!==A&&(d+=bmPow(p[h]-A[h],2));u+=d=bmSqrt(d),f.points[l]=new a(d,p),A=p}f.segmentLength=u,n[g]=f}return n[g]});function o(t,e){var i=e.percents,s=e.lengths,a=i.length,n=bmFloor((a-1)*t),r=t*e.addedLength,o=0;if(n===a-1||0===n||r===s[n])return i[n];for(var g=s[n]>r?-1:1,l=!0;l;)if(s[n]<=r&&s[n+1]>r?(o=(r-s[n])/(s[n+1]-s[n]),l=!1):n+=g,n<0||n>=a-1){if(n===a-1)return i[n];l=!1}return i[n]+(i[n+1]-i[n])*o}var g=createTypedArray("float32",8);return{getSegmentsLength:function(t){var e,s=segmentsLengthPool.newElement(),a=t.c,n=t.v,r=t.o,o=t.i,g=t._length,l=s.lengths,h=0;for(e=0;e<g-1;e+=1)l[e]=i(n[e],n[e+1],r[e],o[e+1]),h+=l[e].addedLength;return a&&g&&(l[e]=i(n[e],n[0],r[e],o[0]),h+=l[e].addedLength),s.totalLength=h,s},getNewSegment:function(e,i,s,a,n,r,l){n<0?n=0:n>1&&(n=1);var h,I=o(n,l),c=o(r=r>1?1:r,l),C=e.length,d=1-I,p=1-c,m=d*d*d,u=I*d*d*3,A=I*I*d*3,f=I*I*I,y=d*d*p,b=I*d*p+d*I*p+d*d*c,v=I*I*p+d*I*c+I*d*c,S=I*I*c,G=d*p*p,B=I*p*p+d*c*p+d*p*c,w=I*c*p+d*c*c+I*p*c,Z=I*c*c,k=p*p*p,P=c*p*p+p*c*p+p*p*c,W=c*c*p+p*c*c+c*p*c,x=c*c*c;for(h=0;h<C;h+=1)g[4*h]=t.round(1e3*(m*e[h]+u*s[h]+A*a[h]+f*i[h]))/1e3,g[4*h+1]=t.round(1e3*(y*e[h]+b*s[h]+v*a[h]+S*i[h]))/1e3,g[4*h+2]=t.round(1e3*(G*e[h]+B*s[h]+w*a[h]+Z*i[h]))/1e3,g[4*h+3]=t.round(1e3*(k*e[h]+P*s[h]+W*a[h]+x*i[h]))/1e3;return g},getPointInSegment:function(e,i,s,a,n,r){var g=o(n,r),l=1-g;return[t.round(1e3*(l*l*l*e[0]+(g*l*l+l*g*l+l*l*g)*s[0]+(g*g*l+l*g*g+g*l*g)*a[0]+g*g*g*i[0]))/1e3,t.round(1e3*(l*l*l*e[1]+(g*l*l+l*g*l+l*l*g)*s[1]+(g*g*l+l*g*g+g*l*g)*a[1]+g*g*g*i[1]))/1e3]},buildBezierData:r,pointOnLine2D:e,pointOnLine3D:function(i,s,a,n,r,o,g,l,h){if(0===a&&0===o&&0===h)return e(i,s,n,r,g,l);var I,c=t.sqrt(t.pow(n-i,2)+t.pow(r-s,2)+t.pow(o-a,2)),C=t.sqrt(t.pow(g-i,2)+t.pow(l-s,2)+t.pow(h-a,2)),d=t.sqrt(t.pow(g-n,2)+t.pow(l-r,2)+t.pow(h-o,2));return(I=c>C?c>d?c-C-d:d-C-c:d>C?d-C-c:C-c-d)>-1e-4&&I<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var i,s=this.offsetTime;"multidimensional"===this.propType&&(i=createTypedArray("float32",this.pv.length));for(var a,n,r,o,g,l,h,I,c,C=e.lastIndex,d=C,p=this.keyframes.length-1,m=!0;m;){if(a=this.keyframes[d],n=this.keyframes[d+1],d===p-1&&t>=n.t-s){a.h&&(a=n),C=0;break}if(n.t-s>t){C=d;break}d<p-1?d+=1:(C=0,m=!1)}r=this.keyframesMetadata[d]||{};var u,A=n.t-s,f=a.t-s;if(a.to){r.bezierData||(r.bezierData=bez.buildBezierData(a.s,n.s||a.e,a.to,a.ti));var y=r.bezierData;if(t>=A||t<f){var b=t>=A?y.points.length-1:0;for(g=y.points[b].point.length,o=0;o<g;o+=1)i[o]=y.points[b].point[o]}else{r.__fnct?c=r.__fnct:(c=BezierFactory.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y,a.n).get,r.__fnct=c),l=c((t-f)/(A-f));var v,S=y.segmentLength*l,G=e.lastFrame<t&&e._lastKeyframeIndex===d?e._lastAddedLength:0;for(I=e.lastFrame<t&&e._lastKeyframeIndex===d?e._lastPoint:0,m=!0,h=y.points.length;m;){if(G+=y.points[I].partialLength,0===S||0===l||I===y.points.length-1){for(g=y.points[I].point.length,o=0;o<g;o+=1)i[o]=y.points[I].point[o];break}if(S>=G&&S<G+y.points[I+1].partialLength){for(v=(S-G)/y.points[I+1].partialLength,g=y.points[I].point.length,o=0;o<g;o+=1)i[o]=y.points[I].point[o]+(y.points[I+1].point[o]-y.points[I].point[o])*v;break}I<h-1?I+=1:m=!1}e._lastPoint=I,e._lastAddedLength=G-y.points[I].partialLength,e._lastKeyframeIndex=d}}else{var B,w,Z,k,P;if(p=a.s.length,u=n.s||a.e,this.sh&&1!==a.h)t>=A?(i[0]=u[0],i[1]=u[1],i[2]=u[2]):t<=f?(i[0]=a.s[0],i[1]=a.s[1],i[2]=a.s[2]):quaternionToEuler(i,slerp(createQuaternion(a.s),createQuaternion(u),(t-f)/(A-f)));else for(d=0;d<p;d+=1)1!==a.h&&(t>=A?l=1:t<f?l=0:(a.o.x.constructor===Array?(r.__fnct||(r.__fnct=[]),r.__fnct[d]?c=r.__fnct[d]:(B=void 0===a.o.x[d]?a.o.x[0]:a.o.x[d],w=void 0===a.o.y[d]?a.o.y[0]:a.o.y[d],Z=void 0===a.i.x[d]?a.i.x[0]:a.i.x[d],k=void 0===a.i.y[d]?a.i.y[0]:a.i.y[d],c=BezierFactory.getBezierEasing(B,w,Z,k).get,r.__fnct[d]=c)):r.__fnct?c=r.__fnct:(B=a.o.x,w=a.o.y,Z=a.i.x,k=a.i.y,c=BezierFactory.getBezierEasing(B,w,Z,k).get,a.keyframeMetadata=c),l=c((t-f)/(A-f)))),u=n.s||a.e,P=1===a.h?a.s[d]:a.s[d]+(u[d]-a.s[d])*l,"multidimensional"===this.propType?i[d]=P:i=P}return e.lastIndex=C,i}function slerp(t,e,i){var s,a,n,r,o,g=[],l=t[0],h=t[1],I=t[2],c=t[3],C=e[0],d=e[1],p=e[2],m=e[3];return(a=l*C+h*d+I*p+c*m)<0&&(a=-a,C=-C,d=-d,p=-p,m=-m),1-a>1e-6?(s=Math.acos(a),n=Math.sin(s),r=Math.sin((1-i)*s)/n,o=Math.sin(i*s)/n):(r=1-i,o=i),g[0]=r*l+o*C,g[1]=r*h+o*d,g[2]=r*I+o*p,g[3]=r*c+o*m,g}function quaternionToEuler(t,e){var i=e[0],s=e[1],a=e[2],n=e[3],r=Math.atan2(2*s*n-2*i*a,1-2*s*s-2*a*a),o=Math.asin(2*i*s+2*a*n),g=Math.atan2(2*i*n-2*s*a,1-2*i*i-2*a*a);t[0]=r/degToRads,t[1]=o/degToRads,t[2]=g/degToRads}function createQuaternion(t){var e=t[0]*degToRads,i=t[1]*degToRads,s=t[2]*degToRads,a=Math.cos(e/2),n=Math.cos(i/2),r=Math.cos(s/2),o=Math.sin(e/2),g=Math.sin(i/2),l=Math.sin(s/2);return[o*g*r+a*n*l,o*n*r+a*g*l,a*g*r-o*n*l,a*n*r-o*g*l]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=i&&t>=i||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var s=this.interpolateValue(t,this._caching);this.pv=s}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if("unidimensional"===this.propType)e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var i=0,s=this.v.length;i<s;)e=t[i]*this.mult,mathAbs(this.v[i]-e)>1e-5&&(this.v[i]=e,this._mdf=!0),i+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)i=this.effectsSequence[t](i);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,i,s){this.propType="unidimensional",this.mult=i||1,this.data=e,this.v=i?e.k*i:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,i,s){var a;this.propType="multidimensional",this.mult=i||1,this.data=e,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var n=e.k.length;for(this.v=createTypedArray("float32",n),this.pv=createTypedArray("float32",n),this.vel=createTypedArray("float32",n),a=0;a<n;a+=1)this.v[a]=e.k[a]*this.mult,this.pv[a]=e.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,i,s){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=i||1,this.elem=t,this.container=s,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,i,s){var a;this.propType="multidimensional";var n,r,o,g,l=e.k.length;for(a=0;a<l-1;a+=1)e.k[a].to&&e.k[a].s&&e.k[a+1]&&e.k[a+1].s&&(n=e.k[a].s,r=e.k[a+1].s,o=e.k[a].to,g=e.k[a].ti,(2===n.length&&(n[0]!==r[0]||n[1]!==r[1])&&bez.pointOnLine2D(n[0],n[1],r[0],r[1],n[0]+o[0],n[1]+o[1])&&bez.pointOnLine2D(n[0],n[1],r[0],r[1],r[0]+g[0],r[1]+g[1])||3===n.length&&(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2])&&bez.pointOnLine3D(n[0],n[1],n[2],r[0],r[1],r[2],n[0]+o[0],n[1]+o[1],n[2]+o[2])&&bez.pointOnLine3D(n[0],n[1],n[2],r[0],r[1],r[2],r[0]+g[0],r[1]+g[1],r[2]+g[2]))&&(e.k[a].to=null,e.k[a].ti=null),n[0]===r[0]&&n[1]===r[1]&&0===o[0]&&0===o[1]&&0===g[0]&&0===g[1]&&(2===n.length||n[2]===r[2]&&0===o[2]&&0===g[2])&&(e.k[a].to=null,e.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=i||1,this.elem=t,this.container=s,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var h=e.k[0].s.length;for(this.v=createTypedArray("float32",h),this.pv=createTypedArray("float32",h),a=0;a<h;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",h)},this.addEffect=addEffect}var PropertyFactory={getProp:function(t,e,i,s,a){var n;if(e.sid&&(e=t.globalData.slotManager.getProp(e)),e.k.length)if("number"==typeof e.k[0])n=new MultiDimensionalProperty(t,e,s,a);else switch(i){case 0:n=new KeyframedValueProperty(t,e,s,a);break;case 1:n=new KeyframedMultidimensionalProperty(t,e,s,a)}else n=new ValueProperty(t,e,s,a);return n.effectsSequence.length&&a.addDynamicProperty(n),n}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var t;this._mdf=!1;var e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=pointPool.newElement(),this.o[i]=pointPool.newElement(),this.i[i]=pointPool.newElement(),i+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,i,s,a){var n;switch(this._length=Math.max(this._length,s+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":n=this.v;break;case"i":n=this.i;break;case"o":n=this.o;break;default:n=[]}(!n[s]||n[s]&&!a)&&(n[s]=pointPool.newElement()),n[s][0]=t,n[s][1]=e},ShapePath.prototype.setTripleAt=function(t,e,i,s,a,n,r,o){this.setXYAt(t,e,"v",r,o),this.setXYAt(i,s,"o",r,o),this.setXYAt(a,n,"i",r,o)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,i=this.o,s=this.i,a=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],s[0][0],s[0][1],i[0][0],i[0][1],0,!1),a=1);var n,r=this._length-1,o=this._length;for(n=a;n<o;n+=1)t.setTripleAt(e[r][0],e[r][1],s[r][0],s[r][1],i[r][0],i[r][1],n,!1),r-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(t){var e,i=t._length;for(e=0;e<i;e+=1)pointPool.release(t.v[e]),pointPool.release(t.i[e]),pointPool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1})),factory.clone=function(t){var e,i=factory.newElement(),s=void 0===t._length?t.v.length:t._length;for(i.setLength(s),i.c=t.c,e=0;e<s;e+=1)i.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return i},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(t){var e,i=t._length;for(e=0;e<i;e+=1)shapePool.release(t.shapes[e]);t._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=t,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var t=-999999;function e(t,e,i){var s,a,n,r,o,g,l,h,I,c=i.lastIndex,C=this.keyframes;if(t<C[0].t-this.offsetTime)s=C[0].s[0],n=!0,c=0;else if(t>=C[C.length-1].t-this.offsetTime)s=C[C.length-1].s?C[C.length-1].s[0]:C[C.length-2].e[0],n=!0;else{for(var d,p,m,u=c,A=C.length-1,f=!0;f&&(d=C[u],!((p=C[u+1]).t-this.offsetTime>t));)u<A-1?u+=1:f=!1;if(m=this.keyframesMetadata[u]||{},c=u,!(n=1===d.h)){if(t>=p.t-this.offsetTime)h=1;else if(t<d.t-this.offsetTime)h=0;else{var y;m.__fnct?y=m.__fnct:(y=BezierFactory.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y).get,m.__fnct=y),h=y((t-(d.t-this.offsetTime))/(p.t-this.offsetTime-(d.t-this.offsetTime)))}a=p.s?p.s[0]:d.e[0]}s=d.s[0]}for(g=e._length,l=s.i[0].length,i.lastIndex=c,r=0;r<g;r+=1)for(o=0;o<l;o+=1)I=n?s.i[r][o]:s.i[r][o]+(a.i[r][o]-s.i[r][o])*h,e.i[r][o]=I,I=n?s.o[r][o]:s.o[r][o]+(a.o[r][o]-s.o[r][o])*h,e.o[r][o]=I,I=n?s.v[r][o]:s.v[r][o]+(a.v[r][o]-s.v[r][o])*h,e.v[r][o]=I}function i(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime,a=this._caching.lastFrame;return a!==t&&(a<i&&e<i||a>s&&e>s)||(this._caching.lastIndex=a<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function s(){this.paths=this.localShapeCollection}function a(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var i,s=t._length;for(i=0;i<s;i+=1)if(t.v[i][0]!==e.v[i][0]||t.v[i][1]!==e.v[i][1]||t.o[i][0]!==e.o[i][0]||t.o[i][1]!==e.o[i][1]||t.i[i][0]!==e.i[i][0]||t.i[i][1]!==e.i[i][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function n(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var i=this.effectsSequence.length;for(e=0;e<i;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function r(t,e,i){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var a=3===i?e.pt.k:e.ks.k;this.v=shapePool.clone(a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=s,this.effectsSequence=[]}function o(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function g(e,a,n){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===n?a.pt.k:a.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var r=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,r),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=s,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[i.bind(this)]}r.prototype.interpolateShape=e,r.prototype.getValue=n,r.prototype.setVValue=a,r.prototype.addEffect=o,g.prototype.getValue=n,g.prototype.interpolateShape=e,g.prototype.setVValue=a,g.prototype.addEffect=o;var l=function(){var t=roundCorner;function e(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],i=this.p.v[1],s=this.s.v[0]/2,a=this.s.v[1]/2,n=3!==this.d,r=this.v;r.v[0][0]=e,r.v[0][1]=i-a,r.v[1][0]=n?e+s:e-s,r.v[1][1]=i,r.v[2][0]=e,r.v[2][1]=i+a,r.v[3][0]=n?e-s:e+s,r.v[3][1]=i,r.i[0][0]=n?e-s*t:e+s*t,r.i[0][1]=i-a,r.i[1][0]=n?e+s:e-s,r.i[1][1]=i-a*t,r.i[2][0]=n?e+s*t:e-s*t,r.i[2][1]=i+a,r.i[3][0]=n?e-s:e+s,r.i[3][1]=i+a*t,r.o[0][0]=n?e+s*t:e-s*t,r.o[0][1]=i-a,r.o[1][0]=n?e+s:e-s,r.o[1][1]=i+a*t,r.o[2][0]=n?e-s*t:e+s*t,r.o[2][1]=i+a,r.o[3][0]=n?e-s:e+s,r.o[3][1]=i-a*t}},extendPrototype([DynamicPropertyContainer],e),e}(),h=function(){function t(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,i,s,a=2*Math.floor(this.pt.v),n=2*Math.PI/a,r=!0,o=this.or.v,g=this.ir.v,l=this.os.v,h=this.is.v,I=2*Math.PI*o/(2*a),c=2*Math.PI*g/(2*a),C=-Math.PI/2;C+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<a;t+=1){i=r?l:h,s=r?I:c;var p=(e=r?o:g)*Math.cos(C),m=e*Math.sin(C),u=0===p&&0===m?0:m/Math.sqrt(p*p+m*m),A=0===p&&0===m?0:-p/Math.sqrt(p*p+m*m);p+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(p,m,p-u*s*i*d,m-A*s*i*d,p+u*s*i*d,m+A*s*i*d,t,!0),r=!r,C+=n*d}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,s=this.or.v,a=this.os.v,n=2*Math.PI*s/(4*e),r=.5*-Math.PI,o=3===this.data.d?-1:1;for(r+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var g=s*Math.cos(r),l=s*Math.sin(r),h=0===g&&0===l?0:l/Math.sqrt(g*g+l*l),I=0===g&&0===l?0:-g/Math.sqrt(g*g+l*l);g+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(g,l,g-h*n*a*o,l-I*n*a*o,g+h*n*a*o,l+I*n*a*o,t,!0),r+=i*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),I=function(){function t(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,s=this.s.v[1]/2,a=bmMin(i,s,this.r.v),n=a*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-s+a,t+i,e-s+a,t+i,e-s+n,0,!0),this.v.setTripleAt(t+i,e+s-a,t+i,e+s-n,t+i,e+s-a,1,!0),0!==a?(this.v.setTripleAt(t+i-a,e+s,t+i-a,e+s,t+i-n,e+s,2,!0),this.v.setTripleAt(t-i+a,e+s,t-i+n,e+s,t-i+a,e+s,3,!0),this.v.setTripleAt(t-i,e+s-a,t-i,e+s-a,t-i,e+s-n,4,!0),this.v.setTripleAt(t-i,e-s+a,t-i,e-s+n,t-i,e-s+a,5,!0),this.v.setTripleAt(t-i+a,e-s,t-i+a,e-s,t-i+n,e-s,6,!0),this.v.setTripleAt(t+i-a,e-s,t+i-n,e-s,t+i-a,e-s,7,!0)):(this.v.setTripleAt(t-i,e+s,t-i+n,e+s,t-i,e+s,2),this.v.setTripleAt(t-i,e-s,t-i,e-s+n,t-i,e-s,3))):(this.v.setTripleAt(t+i,e-s+a,t+i,e-s+n,t+i,e-s+a,0,!0),0!==a?(this.v.setTripleAt(t+i-a,e-s,t+i-a,e-s,t+i-n,e-s,1,!0),this.v.setTripleAt(t-i+a,e-s,t-i+n,e-s,t-i+a,e-s,2,!0),this.v.setTripleAt(t-i,e-s+a,t-i,e-s+a,t-i,e-s+n,3,!0),this.v.setTripleAt(t-i,e+s-a,t-i,e+s-n,t-i,e+s-a,4,!0),this.v.setTripleAt(t-i+a,e+s,t-i+a,e+s,t-i+n,e+s,5,!0),this.v.setTripleAt(t+i-a,e+s,t+i-n,e+s,t+i-a,e+s,6,!0),this.v.setTripleAt(t+i,e+s-a,t+i,e+s-a,t+i,e+s-n,7,!0)):(this.v.setTripleAt(t-i,e-s,t-i+n,e-s,t-i,e-s,1,!0),this.v.setTripleAt(t-i,e+s,t-i,e+s-n,t-i,e+s,2,!0),this.v.setTripleAt(t+i,e+s,t+i-n,e+s,t+i,e+s,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:s},extendPrototype([DynamicPropertyContainer],t),t}();return{getShapeProp:function(t,e,i){var s;return 3===i||4===i?s=(3===i?e.pt:e.ks).k.length?new g(t,e,i):new r(t,e,i):5===i?s=new I(t,e):6===i?s=new l(t,e):7===i&&(s=new h(t,e)),s.k&&t.addDynamicProperty(s),s},getConstructorFunction:function(){return r},getKeyframedConstructorFunction:function(){return g}}}(),Matrix=function(){var t=Math.cos,e=Math.sin,i=Math.tan,s=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function n(i){if(0===i)return this;var s=t(i),a=e(i);return this._t(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1)}function r(i){if(0===i)return this;var s=t(i),a=e(i);return this._t(1,0,0,0,0,s,-a,0,0,a,s,0,0,0,0,1)}function o(i){if(0===i)return this;var s=t(i),a=e(i);return this._t(s,0,a,0,0,1,0,0,-a,0,s,0,0,0,0,1)}function g(i){if(0===i)return this;var s=t(i),a=e(i);return this._t(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1)}function l(t,e){return this._t(1,e,t,1,0,0)}function h(t,e){return this.shear(i(t),i(e))}function I(s,a){var n=t(a),r=e(a);return this._t(n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,i(s),1,0,0,0,0,1,0,0,0,0,1)._t(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1)}function c(t,e,i){return i||0===i||(i=1),1===t&&1===e&&1===i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function C(t,e,i,s,a,n,r,o,g,l,h,I,c,C,d,p){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=s,this.props[4]=a,this.props[5]=n,this.props[6]=r,this.props[7]=o,this.props[8]=g,this.props[9]=l,this.props[10]=h,this.props[11]=I,this.props[12]=c,this.props[13]=C,this.props[14]=d,this.props[15]=p,this}function d(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function p(t,e,i,s,a,n,r,o,g,l,h,I,c,C,d,p){var m=this.props;if(1===t&&0===e&&0===i&&0===s&&0===a&&1===n&&0===r&&0===o&&0===g&&0===l&&1===h&&0===I)return m[12]=m[12]*t+m[15]*c,m[13]=m[13]*n+m[15]*C,m[14]=m[14]*h+m[15]*d,m[15]*=p,this._identityCalculated=!1,this;var u=m[0],A=m[1],f=m[2],y=m[3],b=m[4],v=m[5],S=m[6],G=m[7],B=m[8],w=m[9],Z=m[10],k=m[11],P=m[12],W=m[13],x=m[14],E=m[15];return m[0]=u*t+A*a+f*g+y*c,m[1]=u*e+A*n+f*l+y*C,m[2]=u*i+A*r+f*h+y*d,m[3]=u*s+A*o+f*I+y*p,m[4]=b*t+v*a+S*g+G*c,m[5]=b*e+v*n+S*l+G*C,m[6]=b*i+v*r+S*h+G*d,m[7]=b*s+v*o+S*I+G*p,m[8]=B*t+w*a+Z*g+k*c,m[9]=B*e+w*n+Z*l+k*C,m[10]=B*i+w*r+Z*h+k*d,m[11]=B*s+w*o+Z*I+k*p,m[12]=P*t+W*a+x*g+E*c,m[13]=P*e+W*n+x*l+E*C,m[14]=P*i+W*r+x*h+E*d,m[15]=P*s+W*o+x*I+E*p,this._identityCalculated=!1,this}function m(t){var e=t.props;return this.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function u(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function A(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function f(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function y(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function b(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function v(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function S(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function G(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function B(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,i=-this.props[1]/t,s=-this.props[4]/t,a=this.props[0]/t,n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,r=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,o=new Matrix;return o.props[0]=e,o.props[1]=i,o.props[4]=s,o.props[5]=a,o.props[12]=n,o.props[13]=r,o}function w(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function Z(t){var e,i=t.length,s=[];for(e=0;e<i;e+=1)s[e]=w(t[e]);return s}function k(t,e,i){var s=createTypedArray("float32",6);if(this.isIdentity())s[0]=t[0],s[1]=t[1],s[2]=e[0],s[3]=e[1],s[4]=i[0],s[5]=i[1];else{var a=this.props[0],n=this.props[1],r=this.props[4],o=this.props[5],g=this.props[12],l=this.props[13];s[0]=t[0]*a+t[1]*r+g,s[1]=t[0]*n+t[1]*o+l,s[2]=e[0]*a+e[1]*r+g,s[3]=e[0]*n+e[1]*o+l,s[4]=i[0]*a+i[1]*r+g,s[5]=i[0]*n+i[1]*o+l}return s}function P(t,e,i){return this.isIdentity()?[t,e,i]:[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function W(t,e){if(this.isIdentity())return t+","+e;var i=this.props;return Math.round(100*(t*i[0]+e*i[4]+i[12]))/100+","+Math.round(100*(t*i[1]+e*i[5]+i[13]))/100}function x(){for(var t=0,e=this.props,i="matrix3d(";t<16;)i+=s(1e4*e[t])/1e4,i+=15===t?")":",",t+=1;return i}function E(t){return t<1e-6&&t>0||t>-1e-6&&t<0?s(1e4*t)/1e4:t}function V(){var t=this.props;return"matrix("+E(t[0])+","+E(t[1])+","+E(t[4])+","+E(t[5])+","+E(t[12])+","+E(t[13])+")"}return function(){this.reset=a,this.rotate=n,this.rotateX=r,this.rotateY=o,this.rotateZ=g,this.skew=h,this.skewFromAxis=I,this.shear=l,this.scale=c,this.setTransform=C,this.translate=d,this.transform=p,this.multiply=m,this.applyToPoint=b,this.applyToX=v,this.applyToY=S,this.applyToZ=G,this.applyToPointArray=P,this.applyToTriplePoints=k,this.applyToPointStringified=W,this.toCSS=x,this.to2dCSS=V,this.clone=f,this.cloneFromProps=y,this.equals=A,this.inversePoints=Z,this.inversePoint=w,this.getInverseMatrix=B,this._t=this.transform,this.isIdentity=u,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(t)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(t){setLocationHref(t)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i+=1){var s=e[i].split("=");if(decodeURIComponent(s[0])==t)return decodeURIComponent(s[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(t){}var ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,i){e[t]||(e[t]=i)},t.getModifier=function(t,i,s){return new e[t](i,s)},t}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,i,s,a){var n=[];e<=1?n.push({s:t,e:e}):t>=1?n.push({s:t-1,e:e-1}):(n.push({s:t,e:1}),n.push({s:0,e:e-1}));var r,o,g=[],l=n.length;for(r=0;r<l;r+=1){var h,I;(o=n[r]).e*a<s||o.s*a>s+i||(h=o.s*a<=s?0:(o.s*a-s)/i,I=o.e*a>=s+i?1:(o.e*a-s)/i,g.push([h,I]))}return g.length||g.push([0,0]),g},TrimModifier.prototype.releasePathsData=function(t){var e,i=t.length;for(e=0;e<i;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,i,s,a;if(this._mdf||t){var n=this.o.v%360/360;if(n<0&&(n+=1),(e=this.s.v>1?1+n:this.s.v<0?0+n:this.s.v+n)>(i=this.e.v>1?1+n:this.e.v<0?0+n:this.e.v+n)){var r=e;e=i,i=r}e=1e-4*Math.round(1e4*e),i=1e-4*Math.round(1e4*i),this.sValue=e,this.eValue=i}else e=this.sValue,i=this.eValue;var o,g,l,h,I,c=this.shapes.length,C=0;if(i===e)for(a=0;a<c;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(1===i&&0===e||0===i&&1===e){if(this._mdf)for(a=0;a<c;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var d,p,m=[];for(a=0;a<c;a+=1)if((d=this.shapes[a]).shape._mdf||this._mdf||t||2===this.m){if(g=(s=d.shape.paths)._length,I=0,!d.shape._mdf&&d.pathsData.length)I=d.totalShapeLength;else{for(l=this.releasePathsData(d.pathsData),o=0;o<g;o+=1)h=bez.getSegmentsLength(s.shapes[o]),l.push(h),I+=h.totalLength;d.totalShapeLength=I,d.pathsData=l}C+=I,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var u,A=e,f=i,y=0;for(a=c-1;a>=0;a-=1)if((d=this.shapes[a]).shape._mdf){for((p=d.localShapeCollection).releaseShapes(),2===this.m&&c>1?(u=this.calculateShapeEdges(e,i,d.totalShapeLength,y,C),y+=d.totalShapeLength):u=[[A,f]],g=u.length,o=0;o<g;o+=1){A=u[o][0],f=u[o][1],m.length=0,f<=1?m.push({s:d.totalShapeLength*A,e:d.totalShapeLength*f}):A>=1?m.push({s:d.totalShapeLength*(A-1),e:d.totalShapeLength*(f-1)}):(m.push({s:d.totalShapeLength*A,e:d.totalShapeLength}),m.push({s:0,e:d.totalShapeLength*(f-1)}));var b=this.addShapes(d,m[0]);if(m[0].s!==m[0].e){if(m.length>1)if(d.shape.paths.shapes[d.shape.paths._length-1].c){var v=b.pop();this.addPaths(b,p),b=this.addShapes(d,m[1],v)}else this.addPaths(b,p),b=this.addShapes(d,m[1]);this.addPaths(b,p)}}d.shape.paths=p}}},TrimModifier.prototype.addPaths=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)e.addShape(t[i])},TrimModifier.prototype.addSegment=function(t,e,i,s,a,n,r){a.setXYAt(e[0],e[1],"o",n),a.setXYAt(i[0],i[1],"i",n+1),r&&a.setXYAt(t[0],t[1],"v",n),a.setXYAt(s[0],s[1],"v",n+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,i,s){e.setXYAt(t[1],t[5],"o",i),e.setXYAt(t[2],t[6],"i",i+1),s&&e.setXYAt(t[0],t[4],"v",i),e.setXYAt(t[3],t[7],"v",i+1)},TrimModifier.prototype.addShapes=function(t,e,i){var s,a,n,r,o,g,l,h,I=t.pathsData,c=t.shape.paths.shapes,C=t.shape.paths._length,d=0,p=[],m=!0;for(i?(o=i._length,h=i._length):(i=shapePool.newElement(),o=0,h=0),p.push(i),s=0;s<C;s+=1){for(g=I[s].lengths,i.c=c[s].c,n=c[s].c?g.length:g.length+1,a=1;a<n;a+=1)if(d+(r=g[a-1]).addedLength<e.s)d+=r.addedLength,i.c=!1;else{if(d>e.e){i.c=!1;break}e.s<=d&&e.e>=d+r.addedLength?(this.addSegment(c[s].v[a-1],c[s].o[a-1],c[s].i[a],c[s].v[a],i,o,m),m=!1):(l=bez.getNewSegment(c[s].v[a-1],c[s].v[a],c[s].o[a-1],c[s].i[a],(e.s-d)/r.addedLength,(e.e-d)/r.addedLength,g[a-1]),this.addSegmentFromArray(l,i,o,m),m=!1,i.c=!1),d+=r.addedLength,o+=1}if(c[s].c&&g.length){if(r=g[a-1],d<=e.e){var u=g[a-1].addedLength;e.s<=d&&e.e>=d+u?(this.addSegment(c[s].v[a-1],c[s].o[a-1],c[s].i[0],c[s].v[0],i,o,m),m=!1):(l=bez.getNewSegment(c[s].v[a-1],c[s].v[0],c[s].o[a-1],c[s].i[0],(e.s-d)/u,(e.e-d)/u,g[a-1]),this.addSegmentFromArray(l,i,o,m),m=!1,i.c=!1)}else i.c=!1;d+=r.addedLength,o+=1}if(i._length&&(i.setXYAt(i.v[h][0],i.v[h][1],"i",h),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),d>e.e)break;s<C-1&&(i=shapePool.newElement(),m=!0,p.push(i),o=0)}return p},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var i=e/100,s=[0,0],a=t._length,n=0;for(n=0;n<a;n+=1)s[0]+=t.v[n][0],s[1]+=t.v[n][1];s[0]/=a,s[1]/=a;var r,o,g,l,h,I,c=shapePool.newElement();for(c.c=t.c,n=0;n<a;n+=1)r=t.v[n][0]+(s[0]-t.v[n][0])*i,o=t.v[n][1]+(s[1]-t.v[n][1])*i,g=t.o[n][0]+(s[0]-t.o[n][0])*-i,l=t.o[n][1]+(s[1]-t.o[n][1])*-i,h=t.i[n][0]+(s[0]-t.i[n][0])*-i,I=t.i[n][1]+(s[1]-t.i[n][1])*-i,c.setTripleAt(r,o,g,l,h,I,n);return c},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,i,s,a,n,r,o=this.shapes.length,g=this.amount.v;if(0!==g)for(i=0;i<o;i+=1){if(r=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(r.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,a=n.shape.paths._length,s=0;s<a;s+=1)r.addShape(this.processPath(e[s],g));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(t,e,i){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(i||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var s,a=e.or.k.length;for(s=0;s<a;s+=1)e.or.k[s].to=null,e.or.k[s].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var i;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var s,a;if(i=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(s=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),a=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(s=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),a=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(s=this.p.pv,a=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){s=[],a=[];var n=this.px,r=this.py;n._caching.lastFrame+n.offsetTime<=n.keyframes[0].t?(s[0]=n.getValueAtTime((n.keyframes[0].t+.01)/i,0),s[1]=r.getValueAtTime((r.keyframes[0].t+.01)/i,0),a[0]=n.getValueAtTime(n.keyframes[0].t/i,0),a[1]=r.getValueAtTime(r.keyframes[0].t/i,0)):n._caching.lastFrame+n.offsetTime>=n.keyframes[n.keyframes.length-1].t?(s[0]=n.getValueAtTime(n.keyframes[n.keyframes.length-1].t/i,0),s[1]=r.getValueAtTime(r.keyframes[r.keyframes.length-1].t/i,0),a[0]=n.getValueAtTime((n.keyframes[n.keyframes.length-1].t-.01)/i,0),a[1]=r.getValueAtTime((r.keyframes[r.keyframes.length-1].t-.01)/i,0)):(s=[n.pv,r.pv],a[0]=n.getValueAtTime((n._caching.lastFrame+n.offsetTime-.01)/i,n.offsetTime),a[1]=r.getValueAtTime((r._caching.lastFrame+r.offsetTime-.01)/i,r.offsetTime))}else s=a=t;this.v.rotate(-Math.atan2(s[1]-a[1],s[0]-a[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,i,s){return new e(t,i,s)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(t,e){return 1e5*Math.abs(t-e)<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,i){return t*(1-i)+e*i}function lerpPoint(t,e,i){return[lerp(t[0],e[0],i),lerp(t[1],e[1],i)]}function quadRoots(t,e,i){if(0===t)return[];var s=e*e-4*t*i;if(s<0)return[];var a=-e/(2*t);if(0===s)return[a];var n=Math.sqrt(s)/(2*t);return[a-n,a+n]}function polynomialCoefficients(t,e,i,s){return[3*e-t-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,i,s,a){a&&pointEqual(t,e)&&(e=lerpPoint(t,s,1/3)),a&&pointEqual(i,s)&&(i=lerpPoint(t,s,2/3));var n=polynomialCoefficients(t[0],e[0],i[0],s[0]),r=polynomialCoefficients(t[1],e[1],i[1],s[1]);this.a=[n[0],r[0]],this.b=[n[1],r[1]],this.c=[n[2],r[2]],this.d=[n[3],r[3]],this.points=[t,e,i,s]}function extrema(t,e){var i=t.points[0][e],s=t.points[t.points.length-1][e];if(i>s){var a=s;s=i,i=a}for(var n=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),r=0;r<n.length;r+=1)if(n[r]>0&&n[r]<1){var o=t.point(n[r])[e];o<i?i=o:o>s&&(s=o)}return{min:i,max:s}}function intersectData(t,e,i){var s=t.boundingBox();return{cx:s.cx,cy:s.cy,width:s.width,height:s.height,bez:t,t:(e+i)/2,t1:e,t2:i}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return 2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height}function intersectsImpl(t,e,i,s,a,n){if(boxIntersect(t,e))if(i>=n||t.width<=s&&t.height<=s&&e.width<=s&&e.height<=s)a.push([t.t,e.t]);else{var r=splitData(t),o=splitData(e);intersectsImpl(r[0],o[0],i+1,s,a,n),intersectsImpl(r[0],o[1],i+1,s,a,n),intersectsImpl(r[1],o[0],i+1,s,a,n),intersectsImpl(r[1],o[1],i+1,s,a,n)}}function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,i,s){var a=[t[0],t[1],1],n=[e[0],e[1],1],r=[i[0],i[1],1],o=[s[0],s[1],1],g=crossProduct(crossProduct(a,n),crossProduct(r,o));return floatZero(g[2])?null:[g[0]/g[2],g[1]/g[2]]}function polarOffset(t,e,i){return[t[0]+Math.cos(e)*i,t[1]-Math.sin(e)*i]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}function setPoint(t,e,i,s,a,n,r){var o=i-Math.PI/2,g=i+Math.PI/2,l=e[0]+Math.cos(i)*s*a,h=e[1]-Math.sin(i)*s*a;t.setTripleAt(l,h,l+Math.cos(o)*n,h-Math.sin(o)*n,l+Math.cos(g)*r,h-Math.sin(g)*r,t.length())}function getPerpendicularVector(t,e){var i=[e[0]-t[0],e[1]-t[1]],s=.5*-Math.PI;return[Math.cos(s)*i[0]-Math.sin(s)*i[1],Math.sin(s)*i[0]+Math.cos(s)*i[1]]}function getProjectingAngle(t,e){var i=0===e?t.length()-1:e-1,s=(e+1)%t.length(),a=getPerpendicularVector(t.v[i],t.v[s]);return Math.atan2(0,1)-Math.atan2(a[1],a[0])}function zigZagCorner(t,e,i,s,a,n,r){var o=getProjectingAngle(e,i),g=e.v[i%e._length],l=e.v[0===i?e._length-1:i-1],h=e.v[(i+1)%e._length],I=2===n?Math.sqrt(Math.pow(g[0]-l[0],2)+Math.pow(g[1]-l[1],2)):0,c=2===n?Math.sqrt(Math.pow(g[0]-h[0],2)+Math.pow(g[1]-h[1],2)):0;setPoint(t,e.v[i%e._length],o,r,s,c/(2*(a+1)),I/(2*(a+1)),n)}function zigZagSegment(t,e,i,s,a,n){for(var r=0;r<s;r+=1){var o=(r+1)/(s+1),g=2===a?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,l=e.normalAngle(o);setPoint(t,e.point(o),l,n,i,g/(2*(s+1)),g/(2*(s+1)),a),n=-n}return n}function linearOffset(t,e,i){var s=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,s,i),polarOffset(e,s,i)]}function offsetSegment(t,e){var i,s,a,n,r,o,g;i=(g=linearOffset(t.points[0],t.points[1],e))[0],s=g[1],a=(g=linearOffset(t.points[1],t.points[2],e))[0],n=g[1],r=(g=linearOffset(t.points[2],t.points[3],e))[0],o=g[1];var l=lineIntersection(i,s,a,n);null===l&&(l=s);var h=lineIntersection(r,o,a,n);return null===h&&(h=r),new PolynomialBezier(i,l,h,o)}function joinLines(t,e,i,s,a){var n=e.points[3],r=i.points[0];if(3===s)return n;if(pointEqual(n,r))return n;if(2===s){var o=-e.tangentAngle(1),g=-i.tangentAngle(0)+Math.PI,l=lineIntersection(n,polarOffset(n,o+Math.PI/2,100),r,polarOffset(r,o+Math.PI/2,100)),h=l?pointDistance(l,n):pointDistance(n,r)/2,I=polarOffset(n,o,2*h*roundCorner);return t.setXYAt(I[0],I[1],"o",t.length()-1),I=polarOffset(r,g,2*h*roundCorner),t.setTripleAt(r[0],r[1],r[0],r[1],I[0],I[1],t.length()),r}var c=lineIntersection(pointEqual(n,e.points[2])?e.points[0]:e.points[2],n,r,pointEqual(r,i.points[1])?i.points[3]:i.points[1]);return c&&pointDistance(c,n)<a?(t.setTripleAt(c[0],c[1],c[0],c[1],c[0],c[1],t.length()),c):n}function getIntersection(t,e){var i=t.intersections(e);return i.length&&floatEqual(i[0][0],1)&&i.shift(),i.length?i[0]:null}function pruneSegmentIntersection(t,e){var i=t.slice(),s=e.slice(),a=getIntersection(t[t.length-1],e[0]);return a&&(i[t.length-1]=t[t.length-1].split(a[0])[0],s[0]=e[0].split(a[1])[1]),t.length>1&&e.length>1&&(a=getIntersection(t[0],e[e.length-1]))?[[t[0].split(a[0])[0]],[e[e.length-1].split(a[1])[1]]]:[i,s]}function pruneIntersections(t){for(var e,i=1;i<t.length;i+=1)e=pruneSegmentIntersection(t[i-1],t[i]),t[i-1]=e[0],t[i]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var i,s,a,n,r=t.inflectionPoints();if(0===r.length)return[offsetSegment(t,e)];if(1===r.length||floatEqual(r[1],1))return i=(a=t.split(r[0]))[0],s=a[1],[offsetSegment(i,e),offsetSegment(s,e)];i=(a=t.split(r[0]))[0];var o=(r[1]-r[0])/(1-r[0]);return n=(a=a[1].split(o))[0],s=a[1],[offsetSegment(i,e),offsetSegment(n,e),offsetSegment(s,e)]}function OffsetPathModifier(){}function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],i="normal",s="normal",a=e.length,n=0;n<a;n+=1)switch(e[n].toLowerCase()){case"italic":s="italic";break;case"bold":i="700";break;case"black":i="900";break;case"medium":i="500";break;case"regular":case"normal":i="400";break;case"light":case"thin":i="200"}return{style:s,weight:t.fWeight||i}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,i,s,a,n){var r=n?-1:1,o=s.s.v[0]+(1-s.s.v[0])*(1-a),g=s.s.v[1]+(1-s.s.v[1])*(1-a);t.translate(s.p.v[0]*r*a,s.p.v[1]*r*a,s.p.v[2]),e.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),e.rotate(-s.r.v*r*a),e.translate(s.a.v[0],s.a.v[1],s.a.v[2]),i.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),i.scale(n?1/o:o,n?1/g:g),i.translate(s.a.v[0],s.a.v[1],s.a.v[2])},RepeaterModifier.prototype.init=function(t,e,i,s){for(this.elem=t,this.arr=e,this.pos=i,this.elemsData=s,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[i]);i>0;)i-=1,this._elements.unshift(e[i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,i,s,a,n,r=!1;if(this._mdf||t){var o,g=Math.ceil(this.c.v);if(this._groups.length<g){for(;this._groups.length<g;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes(),r=!0}for(n=0,s=0;s<=this._groups.length-1;s+=1){if(o=n<g,this._groups[s]._render=o,this.changeGroupRender(this._groups[s].it,o),!o){var h=this.elemsData[s].it,I=h[h.length-1];0!==I.transform.op.v?(I.transform.op._mdf=!0,I.transform.op.v=0):I.transform.op._mdf=!1}n+=1}this._currentCopies=g;var c=this.o.v,C=c%1,d=c>0?Math.floor(c):Math.ceil(c),p=this.pMatrix.props,m=this.rMatrix.props,u=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var A,f,y=0;if(c>0){for(;y<d;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y+=1;C&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,C,!1),y+=C)}else if(c<0){for(;y>d;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),y-=1;C&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-C,!0),y-=C)}for(s=1===this.data.m?0:this._currentCopies-1,a=1===this.data.m?1:-1,n=this._currentCopies;n;){if(f=(i=(e=this.elemsData[s].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(s/(this._currentCopies-1)),0!==y){for((0!==s&&1===a||s!==this._currentCopies-1&&-1===a)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),A=0;A<f;A+=1)i[A]=this.matrix.props[A];this.matrix.reset()}else for(this.matrix.reset(),A=0;A<f;A+=1)i[A]=this.matrix.props[A];y+=1,n-=1,s+=a}}else for(n=this._currentCopies,s=0,a=1;n;)i=(e=this.elemsData[s].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,n-=1,s+=a;return r},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var i,s=shapePool.newElement();s.c=t.c;var a,n,r,o,g,l,h,I,c,C,d,p,m=t._length,u=0;for(i=0;i<m;i+=1)a=t.v[i],r=t.o[i],n=t.i[i],a[0]===r[0]&&a[1]===r[1]&&a[0]===n[0]&&a[1]===n[1]?0!==i&&i!==m-1||t.c?(o=0===i?t.v[m-1]:t.v[i-1],l=(g=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(g/2,e)/g:0,h=d=a[0]+(o[0]-a[0])*l,I=p=a[1]-(a[1]-o[1])*l,c=h-(h-a[0])*roundCorner,C=I-(I-a[1])*roundCorner,s.setTripleAt(h,I,c,C,d,p,u),u+=1,o=i===m-1?t.v[0]:t.v[i+1],l=(g=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(g/2,e)/g:0,h=c=a[0]+(o[0]-a[0])*l,I=C=a[1]+(o[1]-a[1])*l,d=h-(h-a[0])*roundCorner,p=I-(I-a[1])*roundCorner,s.setTripleAt(h,I,c,C,d,p,u),u+=1):(s.setTripleAt(a[0],a[1],r[0],r[1],n[0],n[1],u),u+=1):(s.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],u),u+=1);return s},RoundCornersModifier.prototype.processShapes=function(t){var e,i,s,a,n,r,o=this.shapes.length,g=this.rd.v;if(0!==g)for(i=0;i<o;i+=1){if(r=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(r.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,a=n.shape.paths._length,s=0;s<a;s+=1)r.addShape(this.processPath(e[s],g));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,i=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(i<0)return[];var s=Math.sqrt(i);return floatZero(s)?s>0&&s<1?[e]:[]:[e-s,e+s].filter((function(t){return t>0&&t<1}))},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),i=lerpPoint(this.points[1],this.points[2],t),s=lerpPoint(this.points[2],this.points[3],t),a=lerpPoint(e,i,t),n=lerpPoint(i,s,t),r=lerpPoint(a,n,t);return[new PolynomialBezier(this.points[0],e,a,r,!0),new PolynomialBezier(r,n,s,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}},PolynomialBezier.prototype.intersections=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i=7);var s=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,s,i),s},PolynomialBezier.shapeSegment=function(t,e){var i=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[i],t.v[i],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var i=(e+1)%t.length();return new PolynomialBezier(t.v[i],t.i[i],t.o[e],t.v[e],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(t,e,i,s){var a=t._length,n=shapePool.newElement();if(n.c=t.c,t.c||(a-=1),0===a)return n;var r=-1,o=PolynomialBezier.shapeSegment(t,0);zigZagCorner(n,t,0,e,i,s,r);for(var g=0;g<a;g+=1)r=zigZagSegment(n,o,e,i,s,-r),o=g!==a-1||t.c?PolynomialBezier.shapeSegment(t,(g+1)%a):null,zigZagCorner(n,t,g+1,e,i,s,r);return n},ZigZagModifier.prototype.processShapes=function(t){var e,i,s,a,n,r,o=this.shapes.length,g=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),h=this.pointsType.v;if(0!==g)for(i=0;i<o;i+=1){if(r=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(r.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,a=n.shape.paths._length,s=0;s<a;s+=1)r.addShape(this.processPath(e[s],g,l,h));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(t,e,i,s){var a=shapePool.newElement();a.c=t.c;var n,r,o,g=t.length();t.c||(g-=1);var l=[];for(n=0;n<g;n+=1)o=PolynomialBezier.shapeSegment(t,n),l.push(offsetSegmentSplit(o,e));if(!t.c)for(n=g-1;n>=0;n-=1)o=PolynomialBezier.shapeSegmentInverted(t,n),l.push(offsetSegmentSplit(o,e));l=pruneIntersections(l);var h=null,I=null;for(n=0;n<l.length;n+=1){var c=l[n];for(I&&(h=joinLines(a,I,c[0],i,s)),I=c[c.length-1],r=0;r<c.length;r+=1)o=c[r],h&&pointEqual(o.points[0],h)?a.setXYAt(o.points[1][0],o.points[1][1],"o",a.length()-1):a.setTripleAt(o.points[0][0],o.points[0][1],o.points[1][0],o.points[1][1],o.points[0][0],o.points[0][1],a.length()),a.setTripleAt(o.points[3][0],o.points[3][1],o.points[3][0],o.points[3][1],o.points[2][0],o.points[2][1],a.length()),h=o.points[3]}return l.length&&joinLines(a,I,l[0][0],i,s),a},OffsetPathModifier.prototype.processShapes=function(t){var e,i,s,a,n,r,o=this.shapes.length,g=this.amount.v,l=this.miterLimit.v,h=this.lineJoin;if(0!==g)for(i=0;i<o;i+=1){if(r=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(r.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,a=n.shape.paths._length,s=0;s<a;s+=1)r.addShape(this.processPath(e[s],g,h,l));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=127988,s=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function a(t,e){var i=createTag("span");i.setAttribute("aria-hidden",!0),i.style.fontFamily=e;var s=createTag("span");s.innerText="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(s),document.body.appendChild(i);var a=s.offsetWidth;return s.style.fontFamily=function(t){var e,i=t.split(","),s=i.length,a=[];for(e=0;e<s;e+=1)"sans-serif"!==i[e]&&"monospace"!==i[e]&&a.push(i[e]);return a.join(",")}(t)+", "+e,{node:s,w:a,parent:i}}function n(t,e){var i,s=document.body&&e?"svg":"canvas",a=getFontProperties(t);if("svg"===s){var n=createNS("text");n.style.fontSize="100px",n.setAttribute("font-family",t.fFamily),n.setAttribute("font-style",a.style),n.setAttribute("font-weight",a.weight),n.textContent="1",t.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",t.fClass)):n.style.fontFamily=t.fFamily,e.appendChild(n),i=n}else{var r=new OffscreenCanvas(500,500).getContext("2d");r.font=a.style+" "+a.weight+" 100px "+t.fFamily,i=r}return{measureText:function(t){return"svg"===s?(i.textContent=t,i.getComputedTextLength()):i.measureText(t).width}}}function r(t){var e=0,i=t.charCodeAt(0);if(i>=55296&&i<=56319){var s=t.charCodeAt(1);s>=56320&&s<=57343&&(e=1024*(i-55296)+s-56320+65536)}return e}function o(t){var e=r(t);return e>=127462&&e<=127487}var g=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};g.isModifier=function(t,e){var i=t.toString(16)+e.toString(16);return-1!==s.indexOf(i)},g.isZeroWidthJoiner=function(t){return 8205===t},g.isFlagEmoji=function(t){return o(t.substr(0,2))&&o(t.substr(2,2))},g.isRegionalCode=o,g.isCombinedCharacter=function(t){return-1!==e.indexOf(t)},g.isRegionalFlag=function(t,e){var s=r(t.substr(e,2));if(s!==i)return!1;var a=0;for(e+=2;a<5;){if((s=r(t.substr(e,2)))<917601||s>917626)return!1;a+=1,e+=2}return 917631===r(t.substr(e,2))},g.isVariationSelector=function(t){return 65039===t},g.BLACK_FLAG_CODE_POINT=i;var l={addChars:function(t){if(t){var e;this.chars||(this.chars=[]);var i,s,a=t.length,n=this.chars.length;for(e=0;e<a;e+=1){for(i=0,s=!1;i<n;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(s=!0),i+=1;s||(this.chars.push(t[e]),n+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);if(!document.body)return this.isLoaded=!0,t.list.forEach((function(t){t.helper=n(t),t.cache={}})),void(this.fonts=t.list);var i,s=t.list,r=s.length,o=r;for(i=0;i<r;i+=1){var g,l,h=!0;if(s[i].loaded=!1,s[i].monoCase=a(s[i].fFamily,"monospace"),s[i].sansCase=a(s[i].fFamily,"sans-serif"),s[i].fPath){if("p"===s[i].fOrigin||3===s[i].origin){if((g=document.querySelectorAll('style[f-forigin="p"][f-family="'+s[i].fFamily+'"], style[f-origin="3"][f-family="'+s[i].fFamily+'"]')).length>0&&(h=!1),h){var I=createTag("style");I.setAttribute("f-forigin",s[i].fOrigin),I.setAttribute("f-origin",s[i].origin),I.setAttribute("f-family",s[i].fFamily),I.type="text/css",I.innerText="@font-face {font-family: "+s[i].fFamily+"; font-style: normal; src: url('"+s[i].fPath+"');}",e.appendChild(I)}}else if("g"===s[i].fOrigin||1===s[i].origin){for(g=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<g.length;l+=1)-1!==g[l].href.indexOf(s[i].fPath)&&(h=!1);if(h){var c=createTag("link");c.setAttribute("f-forigin",s[i].fOrigin),c.setAttribute("f-origin",s[i].origin),c.type="text/css",c.rel="stylesheet",c.href=s[i].fPath,document.body.appendChild(c)}}else if("t"===s[i].fOrigin||2===s[i].origin){for(g=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<g.length;l+=1)s[i].fPath===g[l].src&&(h=!1);if(h){var C=createTag("link");C.setAttribute("f-forigin",s[i].fOrigin),C.setAttribute("f-origin",s[i].origin),C.setAttribute("rel","stylesheet"),C.setAttribute("href",s[i].fPath),e.appendChild(C)}}}else s[i].loaded=!0,o-=1;s[i].helper=n(s[i],e),s[i].cache={},this.fonts.push(s[i])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,i,s){for(var a=0,n=this.chars.length;a<n;){if(this.chars[a].ch===e&&this.chars[a].style===i&&this.chars[a].fFamily===s)return this.chars[a];a+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,i,s)),t},getFontByName:function(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,i){var s=this.getFontByName(e),a=t;if(!s.cache[a]){var n=s.helper;if(" "===t){var r=n.measureText("|"+t+"|"),o=n.measureText("||");s.cache[a]=(r-o)/100}else s.cache[a]=n.measureText(t)/100}return s.cache[a]*i},checkLoadedFonts:function(){var t,e,i,s=this.fonts.length,a=s;for(t=0;t<s;t+=1)this.fonts[t].loaded?a-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(e=this.fonts[t].monoCase.node,i=this.fonts[t].monoCase.w,e.offsetWidth!==i?(a-=1,this.fonts[t].loaded=!0):(e=this.fonts[t].sansCase.node,i=this.fonts[t].sansCase.w,e.offsetWidth!==i&&(a-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==a&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return g.prototype=l,g}();function SlotManager(t){this.animationData=t}function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return blendModeEnums[t]||""}),blendModeEnums;function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function MaskIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function CheckboxEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var i,s=t.ef||[];this.effectElements=[];var a,n=s.length;for(i=0;i<n;i+=1)a=new GroupEffect(s[i],e),this.effectElements.push(a)}function GroupEffect(t,e){this.init(t,e)}function BaseElement(){}function FrameElement(){}function FootageElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,i)}function AudioElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,i),this._isPlaying=!1,this._canPlay=!1;var s=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(s),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){var i;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var s,a=this.data.ef.length,n=this.data.ef;for(i=0;i<a;i+=1){switch(s=null,n[i].ty){case 0:s=new SliderEffect(n[i],e,this);break;case 1:s=new AngleEffect(n[i],e,this);break;case 2:s=new ColorEffect(n[i],e,this);break;case 3:s=new PointEffect(n[i],e,this);break;case 4:case 7:s=new CheckboxEffect(n[i],e,this);break;case 10:s=new LayerIndexEffect(n[i],e,this);break;case 11:s=new MaskIndexEffect(n[i],e,this);break;case 5:s=new EffectsManager(n[i],e,this);break;default:s=new NoValueEffect(n[i],e,this)}s&&this.effectElements.push(s)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var e=t("layer"),i=t("effects"),s=t("shape"),a=t("text"),n=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var r=i.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(r),0===this.data.ty||this.data.xt?this.compInterface=n(this):4===this.data.ty?(this.layerInterface.shapeInterface=s(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,i){this.globalData=e,this.comp=i,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var i,s=this.dynamicProperties.length;for(i=0;i<s;i+=1)(e||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var i=this._volume*this._volumeMultiplier;this._previousVolume!==i&&(this._previousVolume=i,this.audio.volume(i))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(t){var e,i,s=this.layers.length;for(this.completeLayers=!0,e=s-1;e>=0;e-=1)this.elements[e]||(i=this.layers[e]).ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var i,s=t.length,a=this.layers.length;for(e=0;e<s;e+=1)for(i=0;i<a;){if(this.layers[i].id===t[e].id){this.layers[i]=t[e];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,i){for(var s=this.elements,a=this.layers,n=0,r=a.length;n<r;)a[n].ind==e&&(s[n]&&!0!==s[n]?(i.push(s[n]),s[n].setAsParent(),void 0!==a[n].parent?this.buildElementParenting(t,a[n].parent,i):t.setHierarchy(i)):(this.buildItem(n),this.addPendingElement(t))),n+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length;for(e=0;e<i;e+=1)if(t[e].xt){var s=this.createComp(t[e]);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}},BaseRenderer.prototype.getElementById=function(t){var e,i=this.elements.length;for(e=0;e<i;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e,i=t.shift();if("number"==typeof i)e=this.elements[i];else{var s,a=this.elements.length;for(s=0;s<a;s+=1)if(this.elements[s].data.nm===i){e=this.elements[s];break}}return 0===t.length?e:e.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(t,e,i){this.data=t,this.element=e,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var s,a,n=this.globalData.defs,r=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(r),this.solidPath="";var o,g,l,h,I,c,C=this.masksProperties,d=0,p=[],m=createElementID(),u="clipPath",A="clip-path";for(s=0;s<r;s+=1)if(("a"!==C[s].mode&&"n"!==C[s].mode||C[s].inv||100!==C[s].o.k||C[s].o.x)&&(u="mask",A="mask"),"s"!==C[s].mode&&"i"!==C[s].mode||0!==d?l=null:((l=createNS("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",this.element.comp.data.w||0),l.setAttribute("height",this.element.comp.data.h||0),p.push(l)),a=createNS("path"),"n"===C[s].mode)this.viewData[s]={op:PropertyFactory.getProp(this.element,C[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,C[s],3),elem:a,lastPath:""},n.appendChild(a);else{var f;if(d+=1,a.setAttribute("fill","s"===C[s].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==C[s].x.k?(u="mask",A="mask",c=PropertyFactory.getProp(this.element,C[s].x,0,null,this.element),f=createElementID(),(h=createNS("filter")).setAttribute("id",f),(I=createNS("feMorphology")).setAttribute("operator","erode"),I.setAttribute("in","SourceGraphic"),I.setAttribute("radius","0"),h.appendChild(I),n.appendChild(h),a.setAttribute("stroke","s"===C[s].mode?"#000000":"#ffffff")):(I=null,c=null),this.storedData[s]={elem:a,x:c,expan:I,lastPath:"",lastOperator:"",filterId:f,lastRadius:0},"i"===C[s].mode){g=p.length;var y=createNS("g");for(o=0;o<g;o+=1)y.appendChild(p[o]);var b=createNS("mask");b.setAttribute("mask-type","alpha"),b.setAttribute("id",m+"_"+d),b.appendChild(a),n.appendChild(b),y.setAttribute("mask","url("+getLocationHref()+"#"+m+"_"+d+")"),p.length=0,p.push(y)}else p.push(a);C[s].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[s]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,C[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,C[s],3),invRect:l},this.viewData[s].prop.k||this.drawPath(C[s],this.viewData[s].prop.v,this.viewData[s])}for(this.maskElement=createNS(u),r=p.length,s=0;s<r;s+=1)this.maskElement.appendChild(p[s]);d>0&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(A,"url("+getLocationHref()+"#"+m+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var t=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:t,localMat:t,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,i=0,s=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<s;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),i=0;i<s;i+=1)e.multiply(this.hierarchy[i].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var t=0,e=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;t<e;)this.localTransforms[t]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[t]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),t+=1;if(this.finalTransform._localMatMdf){var i=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(i),t=1;t<e;t+=1){var s=this.localTransforms[t].matrix;i.multiply(s)}i.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(t=0;t<e;t+=1)a*=.01*this.localTransforms[t].opacity;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var t=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(t.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var e=0,i=t.length;for(e=0;e<i;e+=1)this.localTransforms.push(t[e])}}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var i,s=!0,a=this.comp;s;)a.finalTransform?(a.data.hasMask&&e.splice(0,0,a.finalTransform),a=a.comp):s=!1;var n,r=e.length;for(i=0;i<r;i+=1)n=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-n[0],t[1]-n[1],0];return t},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,i=this.element.finalTransform.mat,s=this.masksProperties.length;for(e=0;e<s;e+=1)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",i.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var a=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),a.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,(t+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,i){var s,a,n=" M"+e.v[0][0]+","+e.v[0][1];for(a=e._length,s=1;s<a;s+=1)n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[s][0]+","+e.i[s][1]+" "+e.v[s][0]+","+e.v[s][1];if(e.c&&a>1&&(n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),i.lastPath!==n){var r="";i.elem&&(e.c&&(r=t.inv?this.solidPath+n:n),i.elem.setAttribute("d",r)),i.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory={createFilter:function(t,e){var i=createNS("filter");return i.setAttribute("id",t),!0!==e&&(i.setAttribute("filterUnits","objectBoundingBox"),i.setAttribute("x","0%"),i.setAttribute("y","0%"),i.setAttribute("width","100%"),i.setAttribute("height","100%")),i},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}},featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,i,s="SourceGraphic",a=t.data.ef?t.data.ef.length:0,n=createElementID(),r=filtersFactory.createFilter(n,!0),o=0;for(this.filters=[],e=0;e<a;e+=1){i=null;var g=t.data.ef[e].ty;registeredEffects$1[g]&&(i=new(0,registeredEffects$1[g].effect)(r,t.effectsManager.effectElements[e],t,idPrefix+o,s),s=idPrefix+o,registeredEffects$1[g].countsAsEffect&&(o+=1)),i&&this.filters.push(i)}o&&(t.globalData.defs.appendChild(r),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+n+")")),this.filters.length&&t.addRenderableComponent(this)}function registerEffect$1(t,e,i){registeredEffects$1[t]={effect:e,countsAsEffect:i}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,i),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,i=this.filters.length,s=[];for(e=0;e<i;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("g");e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var i=createNS("clipPath"),s=createNS("path");s.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(i.setAttribute("id",a),i.appendChild(s),this.globalData.defs.appendChild(i),this.checkMasks()){var n=createNS("g");n.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),n.appendChild(this.layerElement),this.transformedElement=n,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(t){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[t]){var e,i,s,a,n=this.layerId+"_"+t;if(1===t||3===t){var r=createNS("mask");r.setAttribute("id",n),r.setAttribute("mask-type",3===t?"luminance":"alpha"),(s=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),r.appendChild(s),this.globalData.defs.appendChild(r),featureSupport.maskType||1!==t||(r.setAttribute("mask-type","luminance"),e=createElementID(),i=filtersFactory.createFilter(e),this.globalData.defs.appendChild(i),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(a=createNS("g")).appendChild(s),r.appendChild(a),a.setAttribute("filter","url("+getLocationHref()+"#"+e+")"))}else if(2===t){var o=createNS("mask");o.setAttribute("id",n),o.setAttribute("mask-type","alpha");var g=createNS("g");o.appendChild(g),e=createElementID(),i=filtersFactory.createFilter(e);var l=createNS("feComponentTransfer");l.setAttribute("in","SourceGraphic"),i.appendChild(l);var h=createNS("feFuncA");h.setAttribute("type","table"),h.setAttribute("tableValues","1.0 0.0"),l.appendChild(h),this.globalData.defs.appendChild(i);var I=createNS("rect");I.setAttribute("width",this.comp.data.w),I.setAttribute("height",this.comp.data.h),I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("fill","#ffffff"),I.setAttribute("opacity","0"),g.setAttribute("filter","url("+getLocationHref()+"#"+e+")"),g.appendChild(I),(s=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),g.appendChild(s),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),g.appendChild(I),a.appendChild(this.layerElement),g.appendChild(a)),this.globalData.defs.appendChild(o)}this.matteMasks[t]=n}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,i=0,s=e.length;i<s;){if(e[i].elem===t)return e[i].pos;i+=1}return 0},addProcessedElement:function(t,e){for(var i=this.processedElements,s=i.length;s;)if(i[s-=1].elem===t)return void(i[s].pos=e);i.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,i){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=i,this.lvl=e,this._isAnimated=!!i.k;for(var s=0,a=t.length;s<a;){if(t[s].mProps.dynamicProperties.length){this._isAnimated=!0;break}s+=1}}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(t,e,i,s){var a;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=i,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(s);var n,r=e.length||0;for(a=0;a<r;a+=1)n=PropertyFactory.getProp(t,e[a].v,0,0,this),this.k=n.k||this.k,this.dataProps[a]={n:e[a].n,p:n};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i}function SVGNoStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=i}function GradientProperty(t,e,i){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var s=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",s),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=s,this.initDynamicPropertyContainer(i),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,i)}function SVGGradientStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,i),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,i){this.transform={mProps:t,op:e,container:i},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,i=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<i;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(t,e){for(var i=0,s=this.o.length/2;i<s;){if(Math.abs(t[4*i]-t[4*e+2*i])>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,i,s,a=4*this.data.p;for(e=0;e<a;e+=1)i=e%4==0?100:255,s=Math.round(this.prop.v[e]*i),this.c[e]!==s&&(this.c[e]=s,this._cmdf=!t);if(this.o.length)for(a=this.prop.v.length,e=4*this.data.p;e<a;e+=1)i=e%2==0?100:1,s=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==s&&(this.o[e-4*this.data.p]=s,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,i){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=i,this.stops=[],this.setGradientData(i.pElem,e),this.setGradientOpacity(e,i),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var i=createElementID(),s=createNS(1===e.t?"linearGradient":"radialGradient");s.setAttribute("id",i),s.setAttribute("spreadMethod","pad"),s.setAttribute("gradientUnits","userSpaceOnUse");var a,n,r,o=[];for(r=4*e.g.p,n=0;n<r;n+=4)a=createNS("stop"),s.appendChild(a),o.push(a);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+i+")"),this.gf=s,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var i,s,a,n=createNS("mask"),r=createNS("path");n.appendChild(r);var o=createElementID(),g=createElementID();n.setAttribute("id",g);var l=createNS(1===t.t?"linearGradient":"radialGradient");l.setAttribute("id",o),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),a=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var h=this.stops;for(s=4*t.g.p;s<a;s+=2)(i=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(i),h.push(i);r.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===t.ty&&(r.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&r.setAttribute("stroke-miterlimit",t.ml)),this.of=l,this.ms=n,this.ost=h,this.maskId=g,e.msElem=r}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(t,e,i,s){if(0===e)return"";var a,n=t.o,r=t.i,o=t.v,g=" M"+s.applyToPointStringified(o[0][0],o[0][1]);for(a=1;a<e;a+=1)g+=" C"+s.applyToPointStringified(n[a-1][0],n[a-1][1])+" "+s.applyToPointStringified(r[a][0],r[a][1])+" "+s.applyToPointStringified(o[a][0],o[a][1]);return i&&e&&(g+=" C"+s.applyToPointStringified(n[a-1][0],n[a-1][1])+" "+s.applyToPointStringified(r[0][0],r[0][1])+" "+s.applyToPointStringified(o[0][0],o[0][1]),g+="z"),g},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function i(t,e,i){(i||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(i||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function s(){}function a(i,s,a){var n,r,o,g,l,h,I,c,C,d,p=s.styles.length,m=s.lvl;for(h=0;h<p;h+=1){if(g=s.sh._mdf||a,s.styles[h].lvl<m){for(c=e.reset(),C=m-s.styles[h].lvl,d=s.transformers.length-1;!g&&C>0;)g=s.transformers[d].mProps._mdf||g,C-=1,d-=1;if(g)for(C=m-s.styles[h].lvl,d=s.transformers.length-1;C>0;)c.multiply(s.transformers[d].mProps.v),C-=1,d-=1}else c=t;if(r=(I=s.sh.paths)._length,g){for(o="",n=0;n<r;n+=1)(l=I.shapes[n])&&l._length&&(o+=buildShapeString(l,l._length,l.c,c));s.caches[h]=o}else o=s.caches[h];s.styles[h].d+=!0===i.hd?"":o,s.styles[h]._mdf=g||s.styles[h]._mdf}}function n(t,e,i){var s=e.style;(e.c._mdf||i)&&s.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&s.pElem.setAttribute("fill-opacity",e.o.v)}function r(t,e,i){o(t,e,i),g(0,e,i)}function o(t,e,i){var s,a,n,r,o,g=e.gf,l=e.g._hasOpacity,h=e.s.v,I=e.e.v;if(e.o._mdf||i){var c="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(c,e.o.v)}if(e.s._mdf||i){var C=1===t.t?"x1":"cx",d="x1"===C?"y1":"cy";g.setAttribute(C,h[0]),g.setAttribute(d,h[1]),l&&!e.g._collapsable&&(e.of.setAttribute(C,h[0]),e.of.setAttribute(d,h[1]))}if(e.g._cmdf||i){s=e.cst;var p=e.g.c;for(n=s.length,a=0;a<n;a+=1)(r=s[a]).setAttribute("offset",p[4*a]+"%"),r.setAttribute("stop-color","rgb("+p[4*a+1]+","+p[4*a+2]+","+p[4*a+3]+")")}if(l&&(e.g._omdf||i)){var m=e.g.o;for(n=(s=e.g._collapsable?e.cst:e.ost).length,a=0;a<n;a+=1)r=s[a],e.g._collapsable||r.setAttribute("offset",m[2*a]+"%"),r.setAttribute("stop-opacity",m[2*a+1])}if(1===t.t)(e.e._mdf||i)&&(g.setAttribute("x2",I[0]),g.setAttribute("y2",I[1]),l&&!e.g._collapsable&&(e.of.setAttribute("x2",I[0]),e.of.setAttribute("y2",I[1])));else if((e.s._mdf||e.e._mdf||i)&&(o=Math.sqrt(Math.pow(h[0]-I[0],2)+Math.pow(h[1]-I[1],2)),g.setAttribute("r",o),l&&!e.g._collapsable&&e.of.setAttribute("r",o)),e.e._mdf||e.h._mdf||e.a._mdf||i){o||(o=Math.sqrt(Math.pow(h[0]-I[0],2)+Math.pow(h[1]-I[1],2)));var u=Math.atan2(I[1]-h[1],I[0]-h[0]),A=e.h.v;A>=1?A=.99:A<=-1&&(A=-.99);var f=o*A,y=Math.cos(u+e.a.v)*f+h[0],b=Math.sin(u+e.a.v)*f+h[1];g.setAttribute("fx",y),g.setAttribute("fy",b),l&&!e.g._collapsable&&(e.of.setAttribute("fx",y),e.of.setAttribute("fy",b))}}function g(t,e,i){var s=e.style,a=e.d;a&&(a._mdf||i)&&a.dashStr&&(s.pElem.setAttribute("stroke-dasharray",a.dashStr),s.pElem.setAttribute("stroke-dashoffset",a.dashoffset[0])),e.c&&(e.c._mdf||i)&&s.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&s.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||i)&&(s.pElem.setAttribute("stroke-width",e.w.v),s.msElem&&s.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return n;case"gf":return o;case"gs":return r;case"st":return g;case"sh":case"el":case"rc":case"sr":return a;case"tr":return i;case"no":return s;default:return null}}}}();function SVGShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,i),this.prevViewData=[]}function LetterProps(t,e,i,s,a,n){this.o=t,this.sw=e,this.sc=i,this.fc=s,this.m=a,this.p=n,this._mdf={o:!0,sw:!!e,sc:!!i,fc:!!s,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,i,s,a=this.shapes.length,n=this.stylesList.length,r=[],o=!1;for(i=0;i<n;i+=1){for(s=this.stylesList[i],o=!1,r.length=0,t=0;t<a;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(s)&&(r.push(e),o=e._isAnimated||o);r.length>1&&o&&this.setShapesAsAnimated(r)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var i,s=new SVGStyleData(t,e),a=s.pElem;return"st"===t.ty?i=new SVGStrokeStyleData(this,t,s):"fl"===t.ty?i=new SVGFillStyleData(this,t,s):"gf"===t.ty||"gs"===t.ty?(i=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,s),this.globalData.defs.appendChild(i.gf),i.maskId&&(this.globalData.defs.appendChild(i.ms),this.globalData.defs.appendChild(i.of),a.setAttribute("mask","url("+getLocationHref()+"#"+i.maskId+")"))):"no"===t.ty&&(i=new SVGNoStyleData(this,t,s)),"st"!==t.ty&&"gs"!==t.ty||(a.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),a.setAttribute("fill-opacity","0"),1===t.lj&&a.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&a.setAttribute("fill-rule","evenodd"),t.ln&&a.setAttribute("id",t.ln),t.cl&&a.setAttribute("class",t.cl),t.bm&&(a.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(s),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var i=TransformPropertyFactory.getTransformProperty(this,t,this),s=new SVGTransformData(i,i.o,e);return this.addToAnimatedContents(t,s),s},SVGShapeElement.prototype.createShapeElement=function(t,e,i){var s=4;"rc"===t.ty?s=5:"el"===t.ty?s=6:"sr"===t.ty&&(s=7);var a=new SVGShapeData(e,i,ShapePropertyFactory.getShapeProp(this,t,s,this));return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(t,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var i=0,s=this.animatedContents.length;i<s;){if(this.animatedContents[i].element===e)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,i=t.styles,s=this.stylesList.length;for(e=0;e<s;e+=1)this.stylesList[e].closed||i.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,i,s,a,n,r){var o,g,l,h,I,c,C=[].concat(n),d=t.length-1,p=[],m=[];for(o=d;o>=0;o-=1){if((c=this.searchProcessedElement(t[o]))?e[o]=i[c-1]:t[o]._render=r,"fl"===t[o].ty||"st"===t[o].ty||"gf"===t[o].ty||"gs"===t[o].ty||"no"===t[o].ty)c?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],a),t[o]._render&&e[o].style.pElem.parentNode!==s&&s.appendChild(e[o].style.pElem),p.push(e[o].style);else if("gr"===t[o].ty){if(c)for(l=e[o].it.length,g=0;g<l;g+=1)e[o].prevViewData[g]=e[o].it[g];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,e[o].gr,a+1,C,r),t[o]._render&&e[o].gr.parentNode!==s&&s.appendChild(e[o].gr)}else"tr"===t[o].ty?(c||(e[o]=this.createTransformElement(t[o],s)),h=e[o].transform,C.push(h)):"sh"===t[o].ty||"rc"===t[o].ty||"el"===t[o].ty||"sr"===t[o].ty?(c||(e[o]=this.createShapeElement(t[o],C,a)),this.setElementStyles(e[o])):"tm"===t[o].ty||"rd"===t[o].ty||"ms"===t[o].ty||"pb"===t[o].ty||"zz"===t[o].ty||"op"===t[o].ty?(c?(I=e[o]).closed=!1:((I=ShapeModifiers.getModifier(t[o].ty)).init(this,t[o]),e[o]=I,this.shapeModifiers.push(I)),m.push(I)):"rp"===t[o].ty&&(c?(I=e[o]).closed=!0:(I=ShapeModifiers.getModifier(t[o].ty),e[o]=I,I.init(this,t,o,e),this.shapeModifiers.push(I),r=!1),m.push(I));this.addProcessedElement(t[o],o+1)}for(d=p.length,o=0;o<d;o+=1)p[o].closed=!0;for(d=m.length,o=0;o<d;o+=1)m[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,i=this.animatedContents.length;for(t=0;t<i;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(t,e,i,s,a,n){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var r=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,r=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,r=!0),this.sc!==i&&(this.sc=i,this._mdf.sc=!0,r=!0),this.fc!==s&&(this.fc=s,this._mdf.fc=!0,r=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,r=!0),!n.length||this.p[0]===n[0]&&this.p[1]===n[1]&&this.p[4]===n[4]&&this.p[5]===n[5]&&this.p[12]===n[12]&&this.p[13]===n[13]||(this.p=n,this._mdf.p=!0,r=!0),r},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,i=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var s;this.lock=!0,this._mdf=!1;var a=this.effectsSequence.length,n=t||this.data.d.k[this.keysIndex].s;for(s=0;s<a;s+=1)n=i!==this.keysIndex?this.effectsSequence[s](n,n.t):this.effectsSequence[s](this.currentData,n.t);e!==n&&this.setCurrentData(n),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,i=0,s=t.length;i<=s-1&&!(i===s-1||t[i+1].t>e);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,i,s=[],a=0,n=t.length,r=!1,o=!1,g="";a<n;)r=o,o=!1,e=t.charCodeAt(a),g=t.charAt(a),FontManager.isCombinedCharacter(e)?r=!0:e>=55296&&e<=56319?FontManager.isRegionalFlag(t,a)?g=t.substr(a,14):(i=t.charCodeAt(a+1))>=56320&&i<=57343&&(FontManager.isModifier(e,i)?(g=t.substr(a,2),r=!0):g=FontManager.isFlagEmoji(t.substr(a,4))?t.substr(a,4):t.substr(a,2)):e>56319?(i=t.charCodeAt(a+1),FontManager.isVariationSelector(e)&&(r=!0)):FontManager.isZeroWidthJoiner(e)&&(r=!0,o=!0),r?(s[s.length-1]+=g,r=!1):s.push(g),a+=g.length;return s},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,i,s,a,n,r,o,g=this.elem.globalData.fontManager,l=this.data,h=[],I=0,c=l.m.g,C=0,d=0,p=0,m=[],u=0,A=0,f=g.getFontByName(t.f),y=0,b=getFontProperties(f);t.fWeight=b.weight,t.fStyle=b.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),i=t.finalText.length,t.finalLineHeight=t.lh;var v,S=t.tr/1e3*t.finalSize;if(t.sz)for(var G,B,w=!0,Z=t.sz[0],k=t.sz[1];w;){G=0,u=0,i=(B=this.buildFinalText(t.t)).length,S=t.tr/1e3*t.finalSize;var P=-1;for(e=0;e<i;e+=1)v=B[e].charCodeAt(0),s=!1," "===B[e]?P=e:13!==v&&3!==v||(u=0,s=!0,G+=t.finalLineHeight||1.2*t.finalSize),g.chars?(o=g.getCharData(B[e],f.fStyle,f.fFamily),y=s?0:o.w*t.finalSize/100):y=g.measureText(B[e],t.f,t.finalSize),u+y>Z&&" "!==B[e]?(-1===P?i+=1:e=P,G+=t.finalLineHeight||1.2*t.finalSize,B.splice(e,P===e?1:0,"\r"),P=-1,u=0):(u+=y,u+=S);G+=f.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&k<G?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=B,i=t.finalText.length,w=!1)}u=-S,y=0;var W,x=0;for(e=0;e<i;e+=1)if(s=!1,13===(v=(W=t.finalText[e]).charCodeAt(0))||3===v?(x=0,m.push(u),A=u>A?u:A,u=-2*S,a="",s=!0,p+=1):a=W,g.chars?(o=g.getCharData(W,f.fStyle,g.getFontByName(t.f).fFamily),y=s?0:o.w*t.finalSize/100):y=g.measureText(a,t.f,t.finalSize)," "===W?x+=y+S:(u+=y+S+x,x=0),h.push({l:y,an:y,add:C,n:s,anIndexes:[],val:a,line:p,animatorJustifyOffset:0}),2==c){if(C+=y,""===a||" "===a||e===i-1){for(""!==a&&" "!==a||(C-=y);d<=e;)h[d].an=C,h[d].ind=I,h[d].extra=y,d+=1;I+=1,C=0}}else if(3==c){if(C+=y,""===a||e===i-1){for(""===a&&(C-=y);d<=e;)h[d].an=C,h[d].ind=I,h[d].extra=y,d+=1;C=0,I+=1}}else h[I].ind=I,h[I].extra=0,I+=1;if(t.l=h,A=u>A?u:A,m.push(u),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=A,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=m;var E,V,R,F,K=l.a;r=K.length;var Y=[];for(n=0;n<r;n+=1){for((E=K[n]).a.sc&&(t.strokeColorAnim=!0),E.a.sw&&(t.strokeWidthAnim=!0),(E.a.fc||E.a.fh||E.a.fs||E.a.fb)&&(t.fillColorAnim=!0),F=0,R=E.s.b,e=0;e<i;e+=1)(V=h[e]).anIndexes[n]=F,(1==R&&""!==V.val||2==R&&""!==V.val&&" "!==V.val||3==R&&(V.n||" "==V.val||e==i-1)||4==R&&(V.n||e==i-1))&&(1===E.s.rn&&Y.push(F),F+=1);l.a[n].s.totalChars=F;var T,_=-1;if(1===E.s.rn)for(e=0;e<i;e+=1)_!=(V=h[e]).anIndexes[n]&&(_=V.anIndexes[n],T=Y.splice(Math.floor(Math.random()*Y.length),1)[0]),V.anIndexes[n]=T}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=f.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var i=this.copyData({},this.data.d.k[e].s);i=this.copyData(i,t),this.data.d.k[e].s=i,this.recalculate(e),this.setCurrentData(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,i=Math.floor;function s(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return s.prototype={getMult:function(s){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var a=0,n=0,r=1,o=1;this.ne.v>0?a=this.ne.v/100:n=-this.ne.v/100,this.xe.v>0?r=1-this.xe.v/100:o=1+this.xe.v/100;var g=BezierFactory.getBezierEasing(a,n,r,o).get,l=0,h=this.finalS,I=this.finalE,c=this.data.sh;if(2===c)l=g(l=I===h?s>=I?1:0:t(0,e(.5/(I-h)+(s-h)/(I-h),1)));else if(3===c)l=g(l=I===h?s>=I?0:1:1-t(0,e(.5/(I-h)+(s-h)/(I-h),1)));else if(4===c)I===h?l=0:(l=t(0,e(.5/(I-h)+(s-h)/(I-h),1)))<.5?l*=2:l=1-2*(l-.5),l=g(l);else if(5===c){if(I===h)l=0;else{var C=I-h,d=-C/2+(s=e(t(0,s+.5-h),I-h)),p=C/2;l=Math.sqrt(1-d*d/(p*p))}l=g(l)}else 6===c?(I===h?l=0:(s=e(t(0,s+.5-h),I-h),l=(1+Math.cos(Math.PI+2*Math.PI*s/(I-h)))/2),l=g(l)):(s>=i(h)&&(l=t(0,e(s-h<0?e(I,1)-(h-s):I-s,1))),l=g(l));if(100!==this.sm.v){var m=.01*this.sm.v;0===m&&(m=1e-8);var u=.5-.5*m;l<u?l=0:(l=(l-u)/m)>1&&(l=1)}return l*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,i=this.o.v/e,s=this.s.v/e+i,a=this.e.v/e+i;if(s>a){var n=s;s=a,a=n}this.finalS=s,this.finalE=a}},extendPrototype([DynamicPropertyContainer],s),{getTextSelectorProp:function(t,e,i){return new s(t,e,i)}}}();function TextAnimatorDataProperty(t,e,i){var s={propType:!1},a=PropertyFactory.getProp,n=e.a;this.a={r:n.r?a(t,n.r,0,degToRads,i):s,rx:n.rx?a(t,n.rx,0,degToRads,i):s,ry:n.ry?a(t,n.ry,0,degToRads,i):s,sk:n.sk?a(t,n.sk,0,degToRads,i):s,sa:n.sa?a(t,n.sa,0,degToRads,i):s,s:n.s?a(t,n.s,1,.01,i):s,a:n.a?a(t,n.a,1,0,i):s,o:n.o?a(t,n.o,0,.01,i):s,p:n.p?a(t,n.p,1,0,i):s,sw:n.sw?a(t,n.sw,0,0,i):s,sc:n.sc?a(t,n.sc,1,0,i):s,fc:n.fc?a(t,n.fc,1,0,i):s,fh:n.fh?a(t,n.fh,0,0,i):s,fs:n.fs?a(t,n.fs,0,.01,i):s,fb:n.fb?a(t,n.fb,0,.01,i):s,t:n.t?a(t,n.t,0,0,i):s},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,i),this.s.t=e.s.t}function TextAnimatorProperty(t,e,i){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=i,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(i)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,i=this._textData.a.length,s=PropertyFactory.getProp;for(t=0;t<i;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:s(this._elem,this._textData.p.a,0,0,this),f:s(this._elem,this._textData.p.f,0,0,this),l:s(this._elem,this._textData.p.l,0,0,this),r:s(this._elem,this._textData.p.r,0,0,this),p:s(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=s(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var i,s,a,n,r,o,g,l,h,I,c,C,d,p,m,u,A,f,y,b=this._moreOptions.alignment.v,v=this._animatorsData,S=this._textData,G=this.mHelper,B=this._renderType,w=this.renderedLetters.length,Z=t.l;if(this._hasMaskedPath){if(y=this._pathData.m,!this._pathData.n||this._pathData._mdf){var k,P=y.v;for(this._pathData.r.v&&(P=P.reverse()),r={tLength:0,segments:[]},n=P._length-1,u=0,a=0;a<n;a+=1)k=bez.buildBezierData(P.v[a],P.v[a+1],[P.o[a][0]-P.v[a][0],P.o[a][1]-P.v[a][1]],[P.i[a+1][0]-P.v[a+1][0],P.i[a+1][1]-P.v[a+1][1]]),r.tLength+=k.segmentLength,r.segments.push(k),u+=k.segmentLength;a=n,y.v.c&&(k=bez.buildBezierData(P.v[a],P.v[0],[P.o[a][0]-P.v[a][0],P.o[a][1]-P.v[a][1]],[P.i[0][0]-P.v[0][0],P.i[0][1]-P.v[0][1]]),r.tLength+=k.segmentLength,r.segments.push(k),u+=k.segmentLength),this._pathData.pi=r}if(r=this._pathData.pi,o=this._pathData.f.v,c=0,I=1,l=0,h=!0,p=r.segments,o<0&&y.v.c)for(r.tLength<Math.abs(o)&&(o=-Math.abs(o)%r.tLength),I=(d=p[c=p.length-1].points).length-1;o<0;)o+=d[I].partialLength,(I-=1)<0&&(I=(d=p[c-=1].points).length-1);C=(d=p[c].points)[I-1],m=(g=d[I]).partialLength}n=Z.length,i=0,s=0;var W,x,E,V,R,F=1.2*t.finalSize*.714,K=!0;E=v.length;var Y,T,_,M,D,L,H,X,N,z,O,J,j=-1,U=o,Q=c,q=I,$=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var it=0,st=0,at=2===t.j?-.5:-1,nt=0,rt=!0;for(a=0;a<n;a+=1)if(Z[a].n){for(it&&(it+=st);nt<a;)Z[nt].animatorJustifyOffset=it,nt+=1;it=0,rt=!0}else{for(x=0;x<E;x+=1)(W=v[x].a).t.propType&&(rt&&2===t.j&&(st+=W.t.v*at),(R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars)).length?it+=W.t.v*R[0]*at:it+=W.t.v*R*at);rt=!1}for(it&&(it+=st);nt<a;)Z[nt].animatorJustifyOffset=it,nt+=1}for(a=0;a<n;a+=1){if(G.reset(),M=1,Z[a].n)i=0,s+=t.yOffset,s+=K?1:0,o=U,K=!1,this._hasMaskedPath&&(I=q,C=(d=p[c=Q].points)[I-1],m=(g=d[I]).partialLength,l=0),tt="",O="",N="",J="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if($!==Z[a].line){switch(t.j){case 1:o+=u-t.lineWidths[Z[a].line];break;case 2:o+=(u-t.lineWidths[Z[a].line])/2}$=Z[a].line}j!==Z[a].ind&&(Z[j]&&(o+=Z[j].extra),o+=Z[a].an/2,j=Z[a].ind),o+=b[0]*Z[a].an*.005;var ot=0;for(x=0;x<E;x+=1)(W=v[x].a).p.propType&&((R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars)).length?ot+=W.p.v[0]*R[0]:ot+=W.p.v[0]*R),W.a.propType&&((R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars)).length?ot+=W.a.v[0]*R[0]:ot+=W.a.v[0]*R);for(h=!0,this._pathData.a.v&&(o=.5*Z[0].an+(u-this._pathData.f.v-.5*Z[0].an-.5*Z[Z.length-1].an)*j/(n-1),o+=this._pathData.f.v);h;)l+m>=o+ot||!d?(A=(o+ot-l)/g.partialLength,T=C.point[0]+(g.point[0]-C.point[0])*A,_=C.point[1]+(g.point[1]-C.point[1])*A,G.translate(-b[0]*Z[a].an*.005,-b[1]*F*.01),h=!1):d&&(l+=g.partialLength,(I+=1)>=d.length&&(I=0,p[c+=1]?d=p[c].points:y.v.c?(I=0,d=p[c=0].points):(l-=g.partialLength,d=null)),d&&(C=g,m=(g=d[I]).partialLength));Y=Z[a].an/2-Z[a].add,G.translate(-Y,0,0)}else Y=Z[a].an/2-Z[a].add,G.translate(-Y,0,0),G.translate(-b[0]*Z[a].an*.005,-b[1]*F*.01,0);for(x=0;x<E;x+=1)(W=v[x].a).t.propType&&(R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars),0===i&&0===t.j||(this._hasMaskedPath?R.length?o+=W.t.v*R[0]:o+=W.t.v*R:R.length?i+=W.t.v*R[0]:i+=W.t.v*R));for(t.strokeWidthAnim&&(L=t.sw||0),t.strokeColorAnim&&(D=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(H=[t.fc[0],t.fc[1],t.fc[2]]),x=0;x<E;x+=1)(W=v[x].a).a.propType&&((R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars)).length?G.translate(-W.a.v[0]*R[0],-W.a.v[1]*R[1],W.a.v[2]*R[2]):G.translate(-W.a.v[0]*R,-W.a.v[1]*R,W.a.v[2]*R));for(x=0;x<E;x+=1)(W=v[x].a).s.propType&&((R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars)).length?G.scale(1+(W.s.v[0]-1)*R[0],1+(W.s.v[1]-1)*R[1],1):G.scale(1+(W.s.v[0]-1)*R,1+(W.s.v[1]-1)*R,1));for(x=0;x<E;x+=1){if(W=v[x].a,R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars),W.sk.propType&&(R.length?G.skewFromAxis(-W.sk.v*R[0],W.sa.v*R[1]):G.skewFromAxis(-W.sk.v*R,W.sa.v*R)),W.r.propType&&(R.length?G.rotateZ(-W.r.v*R[2]):G.rotateZ(-W.r.v*R)),W.ry.propType&&(R.length?G.rotateY(W.ry.v*R[1]):G.rotateY(W.ry.v*R)),W.rx.propType&&(R.length?G.rotateX(W.rx.v*R[0]):G.rotateX(W.rx.v*R)),W.o.propType&&(R.length?M+=(W.o.v*R[0]-M)*R[0]:M+=(W.o.v*R-M)*R),t.strokeWidthAnim&&W.sw.propType&&(R.length?L+=W.sw.v*R[0]:L+=W.sw.v*R),t.strokeColorAnim&&W.sc.propType)for(X=0;X<3;X+=1)R.length?D[X]+=(W.sc.v[X]-D[X])*R[0]:D[X]+=(W.sc.v[X]-D[X])*R;if(t.fillColorAnim&&t.fc){if(W.fc.propType)for(X=0;X<3;X+=1)R.length?H[X]+=(W.fc.v[X]-H[X])*R[0]:H[X]+=(W.fc.v[X]-H[X])*R;W.fh.propType&&(H=R.length?addHueToRGB(H,W.fh.v*R[0]):addHueToRGB(H,W.fh.v*R)),W.fs.propType&&(H=R.length?addSaturationToRGB(H,W.fs.v*R[0]):addSaturationToRGB(H,W.fs.v*R)),W.fb.propType&&(H=R.length?addBrightnessToRGB(H,W.fb.v*R[0]):addBrightnessToRGB(H,W.fb.v*R))}}for(x=0;x<E;x+=1)(W=v[x].a).p.propType&&(R=v[x].s.getMult(Z[a].anIndexes[x],S.a[x].s.totalChars),this._hasMaskedPath?R.length?G.translate(0,W.p.v[1]*R[0],-W.p.v[2]*R[1]):G.translate(0,W.p.v[1]*R,-W.p.v[2]*R):R.length?G.translate(W.p.v[0]*R[0],W.p.v[1]*R[1],-W.p.v[2]*R[2]):G.translate(W.p.v[0]*R,W.p.v[1]*R,-W.p.v[2]*R));if(t.strokeWidthAnim&&(N=L<0?0:L),t.strokeColorAnim&&(z="rgb("+Math.round(255*D[0])+","+Math.round(255*D[1])+","+Math.round(255*D[2])+")"),t.fillColorAnim&&t.fc&&(O="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),this._hasMaskedPath){if(G.translate(0,-t.ls),G.translate(0,b[1]*F*.01+s,0),this._pathData.p.v){f=(g.point[1]-C.point[1])/(g.point[0]-C.point[0]);var gt=180*Math.atan(f)/Math.PI;g.point[0]<C.point[0]&&(gt+=180),G.rotate(-gt*Math.PI/180)}G.translate(T,_,0),o-=b[0]*Z[a].an*.005,Z[a+1]&&j!==Z[a+1].ind&&(o+=Z[a].an/2,o+=.001*t.tr*t.finalSize)}else{switch(G.translate(i,s,0),t.ps&&G.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:G.translate(Z[a].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[Z[a].line]),0,0);break;case 2:G.translate(Z[a].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[Z[a].line])/2,0,0)}G.translate(0,-t.ls),G.translate(Y,0,0),G.translate(b[0]*Z[a].an*.005,b[1]*F*.01,0),i+=Z[a].l+.001*t.tr*t.finalSize}"html"===B?tt=G.toCSS():"svg"===B?tt=G.to2dCSS():et=[G.props[0],G.props[1],G.props[2],G.props[3],G.props[4],G.props[5],G.props[6],G.props[7],G.props[8],G.props[9],G.props[10],G.props[11],G.props[12],G.props[13],G.props[14],G.props[15]],J=M}w<=a?(V=new LetterProps(J,N,z,O,tt,et),this.renderedLetters.push(V),w+=1,this.lettersChangedFlag=!0):(V=this.renderedLetters[a],this.lettersChangedFlag=V.update(J,N,z,O,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(t,e,i){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,i),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var i,s,a=e.length,n="";for(i=0;i<a;i+=1)"sh"===e[i].ty&&(s=e[i].ks.k,n+=buildShapeString(s,s.i.length,!0,t));return n},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,i,s,a){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i])/2,0,0)}e.translate(s,a,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,i){this.textSpans=[],this.renderType="svg",this.initElement(t,e,i)}function ISolidElement(t,e,i){this.initElement(t,e,i)}function NullElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initFrame(),this.initTransform(t,e,i),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(t,e,i){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var i="";if(e&&e.title){var s=createNS("title"),a=createElementID();s.setAttribute("id",a),s.textContent=e.title,this.svgElement.appendChild(s),i+=a}if(e&&e.description){var n=createNS("desc"),r=createElementID();n.setAttribute("id",r),n.textContent=e.description,this.svgElement.appendChild(n),i+=" "+r}i&&this.svgElement.setAttribute("aria-labelledby",i);var o=createNS("defs");this.svgElement.appendChild(o);var g=createNS("g");this.svgElement.appendChild(g),this.layerElement=g,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,i=t.length,s=[],a="";e<i;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(s.push(a),a=""):a+=t[e],e+=1;return s.push(a),s},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var i=t.shapes[0];if(i.it){var s=i.it[i.it.length-1];s.s&&(s.s.k[0]=e,s.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){var t,e;this.addDynamicProperty(this);var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i?i.l.length:0),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.finalSize);var s=this.globalData.fontManager.getFontByName(i.f);if(s.fClass)this.layerElement.setAttribute("class",s.fClass);else{this.layerElement.setAttribute("font-family",s.fFamily);var a=i.fWeight,n=i.fStyle;this.layerElement.setAttribute("font-style",n),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",i.t);var r,o=i.l||[],g=!!this.globalData.fontManager.chars;e=o.length;var l=this.mHelper,h=this.data.singleShape,I=0,c=0,C=!0,d=.001*i.tr*i.finalSize;if(!h||g||i.sz){var p,m=this.textSpans.length;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!g||!h||0===t){if(r=m>t?this.textSpans[t].span:createNS(g?"g":"text"),m<=t){if(r.setAttribute("stroke-linecap","butt"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=r,g){var u=createNS("g");r.appendChild(u),this.textSpans[t].childSpan=u}this.textSpans[t].span=r,this.layerElement.appendChild(r)}r.style.display="inherit"}if(l.reset(),h&&(o[t].n&&(I=-d,c+=i.yOffset,c+=C?1:0,C=!1),this.applyTextPropertiesToMatrix(i,l,o[t].line,I,c),I+=o[t].l||0,I+=d),g){var A;if(1===(p=this.globalData.fontManager.getCharData(i.finalText[t],s.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily)).t)A=new SVGCompElement(p.data,this.globalData,this);else{var f=emptyShapeData;p.data&&p.data.shapes&&(f=this.buildShapeData(p.data,i.finalSize)),A=new SVGShapeElement(f,this.globalData,this)}if(this.textSpans[t].glyph){var y=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(y.layerElement),y.destroy()}this.textSpans[t].glyph=A,A._debug=!0,A.prepareFrame(0),A.renderFrame(),this.textSpans[t].childSpan.appendChild(A.layerElement),1===p.t&&this.textSpans[t].childSpan.setAttribute("transform","scale("+i.finalSize/100+","+i.finalSize/100+")")}else h&&r.setAttribute("transform","translate("+l.props[12]+","+l.props[13]+")"),r.textContent=o[t].val,r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}h&&r&&r.setAttribute("d","")}else{var b=this.textContainer,v="start";switch(i.j){case 1:v="end";break;case 2:v="middle";break;default:v="start"}b.setAttribute("text-anchor",v),b.setAttribute("letter-spacing",d);var S=this.buildTextContents(i.finalText);for(e=S.length,c=i.ps?i.ps[1]+i.ascent:0,t=0;t<e;t+=1)(r=this.textSpans[t].span||createNS("tspan")).textContent=S[t],r.setAttribute("x",0),r.setAttribute("y",c),r.style.display="inherit",b.appendChild(r),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=r,c+=i.finalLineHeight;this.layerElement.appendChild(b)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e,i=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<i;t+=1)(e=this.textSpans[t].glyph)&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var i,s,a,n=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l;for(e=r.length,t=0;t<e;t+=1)r[t].n||(i=n[t],s=this.textSpans[t].span,(a=this.textSpans[t].glyph)&&a.renderFrame(),i._mdf.m&&s.setAttribute("transform",i.m),i._mdf.o&&s.setAttribute("opacity",i.o),i._mdf.sw&&s.setAttribute("stroke-width",i.sw),i._mdf.sc&&s.setAttribute("stroke",i.sc),i._mdf.fc&&s.setAttribute("fill",i.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var i=createNS("clipPath"),s=createNS("rect");s.setAttribute("width",t.w),s.setAttribute("height",t.h),s.setAttribute("x",0),s.setAttribute("y",0);var a=createElementID();i.setAttribute("id",a),i.appendChild(s),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),e.appendChild(i),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,i=this.layers.length;for(e=0;e<i;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);if(e[t]=i,getExpressionsPlugin()&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt){var s="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===s)return;if(this.elements[s]&&!0!==this.elements[s]){var a=e[s].getMatte(this.layers[t].tt);i.setMatte(a)}else this.buildItem(s),this.addPendingElement(i)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){var s="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,a=this.elements[s].getMatte(this.layers[e].tt);t.setMatte(a);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<i;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var s,a=0;a<e;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement()&&(s=this.elements[a].getBaseElement()),a+=1;s?this.layerElement.insertBefore(i,s):this.layerElement.appendChild(i)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var i,s=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(t){var e,i=t.length,s="_";for(e=0;e<i;e+=1)s+=t[e].transform.key+"_";var a=this.sequences[s];return a||(a={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[s]=a,this.sequenceList.push(a)),a},processSequence:function(t,e){for(var i=0,s=t.transforms.length,a=e;i<s&&!e;){if(t.transforms[i].transform.mProps._mdf){a=!0;break}i+=1}if(a)for(t.finalTransform.reset(),i=s-1;i>=0;i-=1)t.finalTransform.multiply(t.transforms[i].transform.mProps.v);t._mdf=a},processSequences:function(t){var e,i=this.sequenceList.length;for(e=0;e<i;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var t="__lottie_element_luma_buffer",e=null,i=null,s=null;function a(){var a,n,r;e||(a=createNS("svg"),n=createNS("filter"),r=createNS("feColorMatrix"),n.setAttribute("id",t),r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),n.appendChild(r),a.appendChild(n),a.setAttribute("id",t+"_svg"),featureSupport.svgLumaHidden&&(a.style.display="none"),s=a,document.body.appendChild(s),e=createTag("canvas"),(i=e.getContext("2d")).filter="url(#"+t+")",i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1))}return{load:a,get:function(s){return e||a(),e.width=s.width,e.height=s.height,i.filter="url(#"+t+")",e}}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var i=createTag("canvas");return i.width=t,i.height=e,i}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas},registeredEffects={};function CVEffects(t){var e,i,s=t.data.ef?t.data.ef.length:0;for(this.filters=[],e=0;e<s;e+=1){i=null;var a=t.data.ef[e].ty;registeredEffects[a]&&(i=new(0,registeredEffects[a].effect)(t.effectsManager.effectElements[e],t)),i&&this.filters.push(i)}this.filters.length&&t.addRenderableComponent(this)}function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){var i;this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var s=this.masksProperties.length,a=!1;for(i=0;i<s;i+=1)"n"!==this.masksProperties[i].mode&&(a=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,i=this.filters.length,s=[];for(e=0;e<i;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,i,s,a=this.element.finalTransform.mat,n=this.element.canvasContext,r=this.masksProperties.length;for(n.beginPath(),t=0;t<r;t+=1)if("n"!==this.masksProperties[t].mode){var o;this.masksProperties[t].inv&&(n.moveTo(0,0),n.lineTo(this.element.globalData.compSize.w,0),n.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),n.lineTo(0,this.element.globalData.compSize.h),n.lineTo(0,0)),s=this.viewData[t].v,e=a.applyToPointArray(s.v[0][0],s.v[0][1],0),n.moveTo(e[0],e[1]);var g=s._length;for(o=1;o<g;o+=1)i=a.applyToTriplePoints(s.o[o-1],s.i[o],s.v[o]),n.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);i=a.applyToTriplePoints(s.o[o-1],s.i[0],s.v[0]),n.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}this.element.globalData.renderer.save(!0),n.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(t,e,i,s){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a,n=4;"rc"===e.ty?n=5:"el"===e.ty?n=6:"sr"===e.ty&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,n,t);var r,o=i.length;for(a=0;a<o;a+=1)i[a].closed||(r={transforms:s.addTransformSequence(i[a].transforms),trNodes:[]},this.styledShapes.push(r),i[a].elements.push(r))}function CVShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,i)}function CVTextElement(t,e,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,i)}function CVImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,i)}function CVSolidElement(t,e,i){this.initElement(t,e,i)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var t;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,t=0;t<15;t+=1){var e=new CanvasContext;this.stack[t]=e}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(t,e,i){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(t,e,i){this.initElement(t,e,i)}function HShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,i),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,i){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,i)}function HCameraElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initHierarchy();var s=PropertyFactory.getProp;if(this.pe=s(this,t.pe,0,0,this),t.ks.p.s?(this.px=s(this,t.ks.p.x,1,0,this),this.py=s(this,t.ks.p.y,1,0,this),this.pz=s(this,t.ks.p.z,1,0,this)):this.p=s(this,t.ks.p,1,0,this),t.ks.a&&(this.a=s(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var a,n=t.ks.or.k.length;for(a=0;a<n;a+=1)t.ks.or.k[a].to=null,t.ks.or.k[a].ti=null}this.or=s(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=s(this,t.ks.rx,0,degToRads,this),this.ry=s(this,t.ks.ry,0,degToRads,this),this.rz=s(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,i)}function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(t,e,i){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var t=this.globalData.canvasContext,e=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(e);var i=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(i),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(t){t.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var t=this.buffers[0].getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var t=this.buffers[1],e=t.getContext("2d");if(this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var i=assetLoader.getLumaCanvas(this.canvasContext.canvas);i.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(i,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(t,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(t){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||t)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var e=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var i={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},s={};if("fl"===t.ty||"st"===t.ty?(s.c=PropertyFactory.getProp(this,t.c,1,255,this),s.c.k||(i.co="rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(s.s=PropertyFactory.getProp(this,t.s,1,null,this),s.e=PropertyFactory.getProp(this,t.e,1,null,this),s.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),s.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),s.g=new GradientProperty(this,t.g,this)),s.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty){if(i.lc=lineCapEnum[t.lc||2],i.lj=lineJoinEnum[t.lj||2],1==t.lj&&(i.ml=t.ml),s.w=PropertyFactory.getProp(this,t.w,0,null,this),s.w.k||(i.wi=s.w.v),t.d){var a=new DashProperty(this,t.d,"canvas",this);s.d=a,s.d.k||(i.da=s.d.dashArray,i.do=s.d.dashoffset[0])}}else i.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(i),s.style=i,s},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,i,s,a){var n,r,o,g,l,h,I=t.length-1,c=[],C=[],d=[].concat(a);for(n=I;n>=0;n-=1){if((g=this.searchProcessedElement(t[n]))?e[n]=i[g-1]:t[n]._shouldRender=s,"fl"===t[n].ty||"st"===t[n].ty||"gf"===t[n].ty||"gs"===t[n].ty)g?e[n].style.closed=!1:e[n]=this.createStyleElement(t[n],d),c.push(e[n].style);else if("gr"===t[n].ty){if(g)for(o=e[n].it.length,r=0;r<o;r+=1)e[n].prevViewData[r]=e[n].it[r];else e[n]=this.createGroupElement(t[n]);this.searchShapes(t[n].it,e[n].it,e[n].prevViewData,s,d)}else"tr"===t[n].ty?(g||(h=this.createTransformElement(t[n]),e[n]=h),d.push(e[n]),this.addTransformToStyleList(e[n])):"sh"===t[n].ty||"rc"===t[n].ty||"el"===t[n].ty||"sr"===t[n].ty?g||(e[n]=this.createShapeElement(t[n])):"tm"===t[n].ty||"rd"===t[n].ty||"pb"===t[n].ty||"zz"===t[n].ty||"op"===t[n].ty?(g?(l=e[n]).closed=!1:((l=ShapeModifiers.getModifier(t[n].ty)).init(this,t[n]),e[n]=l,this.shapeModifiers.push(l)),C.push(l)):"rp"===t[n].ty&&(g?(l=e[n]).closed=!0:(l=ShapeModifiers.getModifier(t[n].ty),e[n]=l,l.init(this,t,n,e),this.shapeModifiers.push(l),s=!1),C.push(l));this.addProcessedElement(t[n],n+1)}for(this.removeTransformFromStyleList(),this.closeStyles(c),I=C.length,n=0;n<I;n+=1)C[n].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,i,s,a,n,r,o,g,l=this.stylesList.length,h=this.globalData.renderer,I=this.globalData.canvasContext;for(t=0;t<l;t+=1)if(("st"!==(o=(g=this.stylesList[t]).type)&&"gs"!==o||0!==g.wi)&&g.data._shouldRender&&0!==g.coOp&&0!==this.globalData.currentGlobalAlpha){for(h.save(),n=g.elements,"st"===o||"gs"===o?(h.ctxStrokeStyle("st"===o?g.co:g.grd),h.ctxLineWidth(g.wi),h.ctxLineCap(g.lc),h.ctxLineJoin(g.lj),h.ctxMiterLimit(g.ml||0)):h.ctxFillStyle("fl"===o?g.co:g.grd),h.ctxOpacity(g.coOp),"st"!==o&&"gs"!==o&&I.beginPath(),h.ctxTransform(g.preTransforms.finalTransform.props),i=n.length,e=0;e<i;e+=1){for("st"!==o&&"gs"!==o||(I.beginPath(),g.da&&(I.setLineDash(g.da),I.lineDashOffset=g.do)),a=(r=n[e].trNodes).length,s=0;s<a;s+=1)"m"===r[s].t?I.moveTo(r[s].p[0],r[s].p[1]):"c"===r[s].t?I.bezierCurveTo(r[s].pts[0],r[s].pts[1],r[s].pts[2],r[s].pts[3],r[s].pts[4],r[s].pts[5]):I.closePath();"st"!==o&&"gs"!==o||(h.ctxStroke(),g.da&&I.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&this.globalData.renderer.ctxFill(g.r),h.restore()}},CVShapeElement.prototype.renderShape=function(t,e,i,s){var a,n;for(n=t,a=e.length-1;a>=0;a-=1)"tr"===e[a].ty?(n=i[a].transform,this.renderShapeTransform(t,n)):"sh"===e[a].ty||"el"===e[a].ty||"rc"===e[a].ty||"sr"===e[a].ty?this.renderPath(e[a],i[a]):"fl"===e[a].ty?this.renderFill(e[a],i[a],n):"st"===e[a].ty?this.renderStroke(e[a],i[a],n):"gf"===e[a].ty||"gs"===e[a].ty?this.renderGradientFill(e[a],i[a],n):"gr"===e[a].ty?this.renderShape(n,e[a].it,i[a].it):e[a].ty;s&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var i,s,a,n=t.trNodes,r=e.paths,o=r._length;n.length=0;var g=t.transforms.finalTransform;for(a=0;a<o;a+=1){var l=r.shapes[a];if(l&&l.v){for(s=l._length,i=1;i<s;i+=1)1===i&&n.push({t:"m",p:g.applyToPointArray(l.v[0][0],l.v[0][1],0)}),n.push({t:"c",pts:g.applyToTriplePoints(l.o[i-1],l.i[i],l.v[i])});1===s&&n.push({t:"m",p:g.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&s&&(n.push({t:"c",pts:g.applyToTriplePoints(l.o[i-1],l.i[0],l.v[0])}),n.push({t:"z"}))}}t.trNodes=n}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var i,s=e.styledShapes.length;for(i=0;i<s;i+=1)this.renderStyledShape(e.styledShapes[i],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,i){var s=e.style;(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*i.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,i){var s,a=e.style;if(!a.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var n,r=this.globalData.canvasContext,o=e.s.v,g=e.e.v;if(1===t.t)s=r.createLinearGradient(o[0],o[1],g[0],g[1]);else{var l=Math.sqrt(Math.pow(o[0]-g[0],2)+Math.pow(o[1]-g[1],2)),h=Math.atan2(g[1]-o[1],g[0]-o[0]),I=e.h.v;I>=1?I=.99:I<=-1&&(I=-.99);var c=l*I,C=Math.cos(h+e.a.v)*c+o[0],d=Math.sin(h+e.a.v)*c+o[1];s=r.createRadialGradient(C,d,0,o[0],o[1],l)}var p=t.g.p,m=e.g.c,u=1;for(n=0;n<p;n+=1)e.g._hasOpacity&&e.g._collapsable&&(u=e.g.o[2*n+1]),s.addColorStop(m[4*n]/100,"rgba("+m[4*n+1]+","+m[4*n+2]+","+m[4*n+3]+","+u+")");a.grd=s}a.coOp=e.o.v*i.opacity},CVShapeElement.prototype.renderStroke=function(t,e,i){var s=e.style,a=e.d;a&&(a._mdf||this._isFirstFrame)&&(s.da=a.dashArray,s.do=a.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*i.opacity),(e.w._mdf||this._isFirstFrame)&&(s.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var i=!1;t.sc&&(i=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var s,a,n,r,o,g,l,h,I,c,C,d,p=this.globalData.fontManager.getFontByName(t.f),m=t.l,u=this.mHelper;this.stroke=i,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,a=t.finalText.length;var A=this.data.singleShape,f=.001*t.tr*t.finalSize,y=0,b=0,v=!0,S=0;for(s=0;s<a;s+=1){r=(n=this.globalData.fontManager.getCharData(t.finalText[s],p.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&n.data||{},u.reset(),A&&m[s].n&&(y=-f,b+=t.yOffset,b+=v?1:0,v=!1),I=(l=r.shapes?r.shapes[0].it:[]).length,u.scale(t.finalSize/100,t.finalSize/100),A&&this.applyTextPropertiesToMatrix(t,u,m[s].line,y,b),C=createSizedArray(I-1);var G=0;for(h=0;h<I;h+=1)if("sh"===l[h].ty){for(g=l[h].ks.k.i.length,c=l[h].ks.k,d=[],o=1;o<g;o+=1)1===o&&d.push(u.applyToX(c.v[0][0],c.v[0][1],0),u.applyToY(c.v[0][0],c.v[0][1],0)),d.push(u.applyToX(c.o[o-1][0],c.o[o-1][1],0),u.applyToY(c.o[o-1][0],c.o[o-1][1],0),u.applyToX(c.i[o][0],c.i[o][1],0),u.applyToY(c.i[o][0],c.i[o][1],0),u.applyToX(c.v[o][0],c.v[o][1],0),u.applyToY(c.v[o][0],c.v[o][1],0));d.push(u.applyToX(c.o[o-1][0],c.o[o-1][1],0),u.applyToY(c.o[o-1][0],c.o[o-1][1],0),u.applyToX(c.i[0][0],c.i[0][1],0),u.applyToY(c.i[0][0],c.i[0][1],0),u.applyToX(c.v[0][0],c.v[0][1],0),u.applyToY(c.v[0][0],c.v[0][1],0)),C[G]=d,G+=1}A&&(y+=m[s].l,y+=f),this.textSpans[S]?this.textSpans[S].elem=C:this.textSpans[S]={elem:C},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,i,s,a,n;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,o=this.textAnimator.renderedLetters,g=this.textProperty.currentData.l;e=g.length;var l,h,I=null,c=null,C=null,d=this.globalData.renderer;for(t=0;t<e;t+=1)if(!g[t].n){if((r=o[t])&&(d.save(),d.ctxTransform(r.p),d.ctxOpacity(r.o)),this.fill){for(r&&r.fc?I!==r.fc&&(d.ctxFillStyle(r.fc),I=r.fc):I!==this.values.fill&&(I=this.values.fill,d.ctxFillStyle(this.values.fill)),s=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<s;i+=1)for(n=(h=l[i]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),a=2;a<n;a+=6)this.globalData.canvasContext.bezierCurveTo(h[a],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]);this.globalData.canvasContext.closePath(),d.ctxFill()}if(this.stroke){for(r&&r.sw?C!==r.sw&&(C=r.sw,d.ctxLineWidth(r.sw)):C!==this.values.sWidth&&(C=this.values.sWidth,d.ctxLineWidth(this.values.sWidth)),r&&r.sc?c!==r.sc&&(c=r.sc,d.ctxStrokeStyle(r.sc)):c!==this.values.stroke&&(c=this.values.stroke,d.ctxStrokeStyle(this.values.stroke)),s=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<s;i+=1)for(n=(h=l[i]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),a=2;a<n;a+=6)this.globalData.canvasContext.bezierCurveTo(h[a],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]);this.globalData.canvasContext.closePath(),d.ctxStroke()}r&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,i,s=t.getContext("2d"),a=this.img.width,n=this.img.height,r=a/n,o=this.assetData.w/this.assetData.h,g=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;r>o&&"xMidYMid slice"===g||r<o&&"xMidYMid slice"!==g?e=(i=n)*o:i=(e=a)/o,s.drawImage(this.img,(a-e)/2,(n-i)/2,e,i,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){1===t[0]&&0===t[1]&&0===t[4]&&1===t[5]&&0===t[12]&&0===t[13]||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,i,s){this.canvasContext.fillRect(t,e,i,s)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){this.renderConfig.clearCanvas?(t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var i="0px 0px 0px";e.transformOrigin=i,e.mozTransformOrigin=i,e.webkitTransformOrigin=i,e["-webkit-transform"]=i,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){var i,s,a,n;if(this.reset(),t?(i=t,s=e,this.canvasContext.canvas.width=i,this.canvasContext.canvas.height=s):(this.animationItem.wrapper&&this.animationItem.container?(i=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight):(i=this.canvasContext.canvas.width,s=this.canvasContext.canvas.height),this.canvasContext.canvas.width=i*this.renderConfig.dpr,this.canvasContext.canvas.height=s*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var r=this.renderConfig.preserveAspectRatio.split(" "),o=r[1]||"meet",g=r[0]||"xMidYMid",l=g.substr(0,4),h=g.substr(4);a=i/s,(n=this.transformCanvas.w/this.transformCanvas.h)>a&&"meet"===o||n<a&&"slice"===o?(this.transformCanvas.sx=i/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===l&&(n<a&&"meet"===o||n>a&&"slice"===o)?(i-this.transformCanvas.w*(s/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===l&&(n<a&&"meet"===o||n>a&&"slice"===o)?(i-this.transformCanvas.w*(s/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===h&&(n>a&&"meet"===o||n<a&&"slice"===o)?(s-this.transformCanvas.h*(i/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===h&&(n>a&&"meet"===o||n<a&&"slice"===o)?(s-this.transformCanvas.h*(i/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=i/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var i;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var s=this.layers.length;for(this.completeLayers||this.checkLayers(t),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(t-this.layers[i].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var i=this.createItem(this.layers[t],this,this.globalData);e[t]=i,i.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e,i=this.stack[this.cArrPos],s=i.transform,a=this.cTr.props;for(e=0;e<16;e+=1)a[e]=s[e];if(t){this.nativeContext.restore();var n=this.stack[this.cArrPos+1];this.appliedFillStyle=n.fillStyle,this.appliedStrokeStyle=n.strokeStyle,this.appliedLineWidth=n.lineWidth,this.appliedLineCap=n.lineCap,this.appliedLineJoin=n.lineJoin,this.appliedMiterLimit=n.miterLimit}this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),(t||-1!==i.opacity&&this.currentOpacity!==i.opacity)&&(this.nativeContext.globalAlpha=i.opacity,this.currentOpacity=i.opacity),this.currentFillStyle=i.fillStyle,this.currentStrokeStyle=i.strokeStyle,this.currentLineWidth=i.lineWidth,this.currentLineCap=i.lineCap,this.currentLineJoin=i.lineJoin,this.currentMiterLimit=i.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var i,s=this.stack[this.cArrPos];for(i=0;i<16;i+=1)s.transform[i]=e[i];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=s.opacity,a.fillStyle=s.fillStyle,a.strokeStyle=s.strokeStyle,a.lineWidth=s.lineWidth,a.lineCap=s.lineCap,a.lineJoin=s.lineJoin,a.miterLimit=s.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var i=e.props;this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,i,s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,i,s)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)e=t[i].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var i,s,a,n,r,o=t.sh.v,g=t.transformers,l=o._length;if(!(l<=1)){for(i=0;i<l-1;i+=1)s=this.getTransformedPoint(g,o.v[i]),a=this.getTransformedPoint(g,o.o[i]),n=this.getTransformedPoint(g,o.i[i+1]),r=this.getTransformedPoint(g,o.v[i+1]),this.checkBounds(s,a,n,r,e);o.c&&(s=this.getTransformedPoint(g,o.v[i]),a=this.getTransformedPoint(g,o.o[i]),n=this.getTransformedPoint(g,o.i[0]),r=this.getTransformedPoint(g,o.v[0]),this.checkBounds(s,a,n,r,e))}},HShapeElement.prototype.checkBounds=function(t,e,i,s,a){this.getBoundsOfCurve(t,e,i,s);var n=this.shapeBoundingBox;a.x=bmMin(n.left,a.x),a.xMax=bmMax(n.right,a.xMax),a.y=bmMin(n.top,a.y),a.yMax=bmMax(n.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,i,s){for(var a,n,r,o,g,l,h,I=[[t[0],s[0]],[t[1],s[1]]],c=0;c<2;++c)n=6*t[c]-12*e[c]+6*i[c],a=-3*t[c]+9*e[c]-9*i[c]+3*s[c],r=3*e[c]-3*t[c],n|=0,r|=0,0==(a|=0)&&0===n||(0===a?(o=-r/n)>0&&o<1&&I[c].push(this.calculateF(o,t,e,i,s,c)):(g=n*n-4*r*a)>=0&&((l=(-n+bmSqrt(g))/(2*a))>0&&l<1&&I[c].push(this.calculateF(l,t,e,i,s,c)),(h=(-n-bmSqrt(g))/(2*a))>0&&h<1&&I[c].push(this.calculateF(h,t,e,i,s,c))));this.shapeBoundingBox.left=bmMin.apply(null,I[0]),this.shapeBoundingBox.top=bmMin.apply(null,I[1]),this.shapeBoundingBox.right=bmMax.apply(null,I[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,I[1])},HShapeElement.prototype.calculateF=function(t,e,i,s,a,n){return bmPow(1-t,3)*e[n]+3*bmPow(1-t,2)*t*i[n]+3*(1-t)*bmPow(t,2)*s[n]+bmPow(t,3)*a[n]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)t[i]&&t[i].sh?this.calculateShapeBoundingBox(t[i],e):t[i]&&t[i].it?this.calculateBoundingBox(t[i].it,e):t[i]&&t[i].style&&t[i].w&&this.expandStrokeBoundingBox(t[i].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var i=0;if(t.keyframes){for(var s=0;s<t.keyframes.length;s+=1){var a=t.keyframes[s].s;a>i&&(i=a)}i*=t.mult}else i=t.v*t.mult;e.x-=i,e.xMax+=i,e.y-=i,e.yMax+=i},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var i=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),i=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),i=!0),i||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var s=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=a,s.webkitTransform=a}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,i=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=i,e.color=i,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var s,a,n=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{e.fontFamily=n.fFamily;var r=t.fWeight,o=t.fStyle;e.fontStyle=o,e.fontWeight=r}var g,l,h,I=t.l;a=I.length;var c,C=this.mHelper,d="",p=0;for(s=0;s<a;s+=1){if(this.globalData.fontManager.chars?(this.textPaths[p]?g=this.textPaths[p]:((g=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),g.setAttribute("stroke-linejoin",lineJoinEnum[2]),g.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[p]?h=(l=this.textSpans[p]).children[0]:((l=createTag("div")).style.lineHeight=0,(h=createNS("svg")).appendChild(g),styleDiv(l)))):this.isMasked?g=this.textPaths[p]?this.textPaths[p]:createNS("text"):this.textSpans[p]?(l=this.textSpans[p],g=this.textPaths[p]):(styleDiv(l=createTag("span")),styleDiv(g=createTag("span")),l.appendChild(g)),this.globalData.fontManager.chars){var m,u=this.globalData.fontManager.getCharData(t.finalText[s],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(m=u?u.data:null,C.reset(),m&&m.shapes&&m.shapes.length&&(c=m.shapes[0].it,C.scale(t.finalSize/100,t.finalSize/100),d=this.createPathShape(C,c),g.setAttribute("d",d)),this.isMasked)this.innerElem.appendChild(g);else{if(this.innerElem.appendChild(l),m&&m.shapes){document.body.appendChild(h);var A=h.getBBox();h.setAttribute("width",A.width+2),h.setAttribute("height",A.height+2),h.setAttribute("viewBox",A.x-1+" "+(A.y-1)+" "+(A.width+2)+" "+(A.height+2));var f=h.style,y="translate("+(A.x-1)+"px,"+(A.y-1)+"px)";f.transform=y,f.webkitTransform=y,I[s].yOffset=A.y-1}else h.setAttribute("width",1),h.setAttribute("height",1);l.appendChild(h)}}else if(g.textContent=I[s].val,g.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(g);else{this.innerElem.appendChild(l);var b=g.style,v="translate3d(0,"+-t.finalSize/1.2+"px,0)";b.transform=v,b.webkitTransform=v}this.isMasked?this.textSpans[p]=g:this.textSpans[p]=l,this.textSpans[p].style.display="block",this.textPaths[p]=g,p+=1}for(;p<this.textSpans.length;)this.textSpans[p].style.display="none",p+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,s,a,n,r,o=0,g=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(s=l.length,i=0;i<s;i+=1)l[i].n?o+=1:(n=this.textSpans[i],r=this.textPaths[i],a=g[o],o+=1,a._mdf.m&&(this.isMasked?n.setAttribute("transform",a.m):(n.style.webkitTransform=a.m,n.style.transform=a.m)),n.style.opacity=a.o,a.sw&&a._mdf.sw&&r.setAttribute("stroke-width",a.sw),a.sc&&a._mdf.sc&&r.setAttribute("stroke",a.sc),a.fc&&a._mdf.fc&&(r.setAttribute("fill",a.fc),r.style.color=a.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var h=this.innerElem.getBBox();if(this.currentBBox.w!==h.width&&(this.currentBBox.w=h.width,this.svgElement.setAttribute("width",h.width)),this.currentBBox.h!==h.height&&(this.currentBBox.h=h.height,this.svgElement.setAttribute("height",h.height)),this.currentBBox.w!==h.width+2||this.currentBBox.h!==h.height+2||this.currentBBox.x!==h.x-1||this.currentBBox.y!==h.y-1){this.currentBBox.w=h.width+2,this.currentBBox.h=h.height+2,this.currentBBox.x=h.x-1,this.currentBBox.y=h.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var I="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=I,t.webkitTransform=I}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,i,s,a=this.comp.threeDElements.length;for(t=0;t<a;t+=1)if("3d"===(e=this.comp.threeDElements[t]).type){i=e.perspectiveElem.style,s=e.container.style;var n=this.pe.v+"px",r="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.perspective=n,i.webkitPerspective=n,s.transformOrigin=r,s.mozTransformOrigin=r,s.webkitTransformOrigin=r,i.transform=o,i.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,i=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)i=this.hierarchy[t].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var s=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-s.p.v[0],-s.p.v[1],s.p.v[2]),this.mat.rotateX(-s.or.v[0]).rotateY(-s.or.v[1]).rotateZ(s.or.v[2]),this.mat.rotateX(-s.rx.v).rotateY(-s.ry.v).rotateZ(s.rz.v),this.mat.scale(1/s.s.v[0],1/s.s.v[1],1/s.s.v[2]),this.mat.translate(s.a.v[0],s.a.v[1],s.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;a=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var n=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),r=[a[0]/n,a[1]/n,a[2]/n],o=Math.sqrt(r[2]*r[2]+r[0]*r[0]),g=Math.atan2(r[1],o),l=Math.atan2(r[0],-r[2]);this.mat.rotateY(l).rotateX(-g)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var h=!this._prevMat.equals(this.mat);if((h||this.pe._mdf)&&this.comp.threeDElements){var I,c,C;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)if("3d"===(I=this.comp.threeDElements[t]).type){if(h){var d=this.mat.toCSS();(C=I.container.style).transform=d,C.webkitTransform=d}this.pe._mdf&&((c=I.perspectiveElem.style).perspective=this.pe.v+"px",c.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){var s=this.layers[e];if(s.ddd&&this.supports3d)this.addTo3dContainer(i,e);else if(this.threeDElements)this.addTo3dContainer(i,e);else{for(var a,n,r=0;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r],a=(this.layers[r].ddd?this.getThreeDContainerByPos(r):n.getBaseElement())||a),r+=1;a?s.ddd&&this.supports3d||this.layerElement.insertBefore(i,a):s.ddd&&this.supports3d||this.layerElement.appendChild(i)}}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,i=this.threeDElements.length;e<i;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var i,s,a=createTag("div");styleDiv(a);var n=createTag("div");if(styleDiv(n),"3d"===e){(i=a.style).width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px";var r="50% 50%";i.webkitTransformOrigin=r,i.mozTransformOrigin=r,i.transformOrigin=r;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(s=n.style).transform=o,s.webkitTransform=o}a.appendChild(n);var g={container:n,perspectiveElem:a,startPos:t,endPos:t,type:e};return this.threeDElements.push(g),g},HybridRendererBase.prototype.build3dContainers=function(){var t,e,i=this.layers.length,s="";for(t=0;t<i;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==s&&(s="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==s&&(s="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(i=this.threeDElements.length)-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var i=0,s=this.threeDElements.length;i<s;){if(e<=this.threeDElements[i].endPos){for(var a,n=this.threeDElements[i].startPos;n<e;)this.elements[n]&&this.elements[n].getBaseElement&&(a=this.elements[n].getBaseElement()),n+=1;a?this.threeDElements[i].container.insertBefore(t,a):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),i=this.animationItem.wrapper,s=e.style;s.width=t.w+"px",s.height=t.h+"px",this.resizerElem=e,styleDiv(e),s.transformStyle="flat",s.mozTransformStyle="flat",s.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),i.appendChild(e),s.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var n=createNS("defs");a.appendChild(n),this.data=t,this.setupGlobalData(t,a),this.globalData.defs=n,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t,e,i,s,a=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight,r=a/n;this.globalData.compSize.w/this.globalData.compSize.h>r?(t=a/this.globalData.compSize.w,e=a/this.globalData.compSize.w,i=0,s=(n-this.globalData.compSize.h*(a/this.globalData.compSize.w))/2):(t=n/this.globalData.compSize.h,e=n/this.globalData.compSize.h,i=(a-this.globalData.compSize.w*(n/this.globalData.compSize.h))/2,s=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+i+","+s+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,i=this.globalData.compSize.h,s=this.threeDElements.length;for(t=0;t<s;t+=1){var a=this.threeDElements[t].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,i=t.length,s=createTag("div");for(e=0;e<i;e+=1)if(t[e].xt){var a=this.createComp(t[e],s,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var i,s=0;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(i=this.elements[s].getBaseElement()),s+=1;i?this.layerElement.insertBefore(t,i):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(t){function e(e){for(var i=0,s=t.layers.length;i<s;){if(t.layers[i].nm===e||t.layers[i].ind===e)return t.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e};function _typeof$2(t){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(t)}function seedRandom(t,e){var i,s=this,a=256,n="random",r=e.pow(a,6),o=e.pow(2,52),g=2*o,l=255;function h(t){var e,i=t.length,s=this,n=0,r=s.i=s.j=0,o=s.S=[];for(i||(t=[i++]);n<a;)o[n]=n++;for(n=0;n<a;n++)o[n]=o[r=l&r+t[n%i]+(e=o[n])],o[r]=e;s.g=function(t){for(var e,i=0,n=s.i,r=s.j,o=s.S;t--;)e=o[n=l&n+1],i=i*a+o[l&(o[n]=o[r=l&r+e])+(o[r]=e)];return s.i=n,s.j=r,i}}function I(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function c(t,e){var i,s=[],a=_typeof$2(t);if(e&&"object"==a)for(i in t)try{s.push(c(t[i],e-1))}catch(t){}return s.length?s:"string"==a?t:t+"\0"}function C(t,e){for(var i,s=t+"",a=0;a<s.length;)e[l&a]=l&(i^=19*e[l&a])+s.charCodeAt(a++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}e["seed"+n]=function(l,p,m){var u=[],A=C(c((p=!0===p?{entropy:!0}:p||{}).entropy?[l,d(t)]:null===l?function(){try{i;var e=new Uint8Array(a);return(s.crypto||s.msCrypto).getRandomValues(e),d(e)}catch(e){var n=s.navigator,r=n&&n.plugins;return[+new Date,s,r,s.screen,d(t)]}}():l,3),u),f=new h(u),y=function(){for(var t=f.g(6),e=r,i=0;t<o;)t=(t+i)*a,e*=a,i=f.g(1);for(;t>=g;)t/=2,e/=2,i>>>=1;return(t+i)/e};return y.int32=function(){return 0|f.g(4)},y.quick=function(){return f.g(4)/4294967296},y.double=y,C(d(f.S),t),(p.pass||m||function(t,i,s,a){return a&&(a.S&&I(a,f),t.state=function(){return I(f,{})}),s?(e[n]=t,i):t})(y,A,"global"in p?p.global:this==e,p.state)},C(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||e instanceof Number||"boolean"===t||"string"===t}function $bm_neg(t){var e=_typeof$1(t);if("number"===e||t instanceof Number||"boolean"===e)return-t;if($bm_isInstanceOfArray(t)){var i,s=t.length,a=[];for(i=0;i<s;i+=1)a[i]=-t[i];return a}return t.propType?t.v:-t}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var i=_typeof$1(t),s=_typeof$1(e);if(isNumerable(i,t)&&isNumerable(s,e)||"string"===i||"string"===s)return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var a=0,n=t.length,r=e.length,o=[];a<n||a<r;)("number"==typeof t[a]||t[a]instanceof Number)&&("number"==typeof e[a]||e[a]instanceof Number)?o[a]=t[a]+e[a]:o[a]=void 0===e[a]?t[a]:t[a]||e[a],a+=1;return o}return 0}var add=sum;function sub(t,e){var i=_typeof$1(t),s=_typeof$1(e);if(isNumerable(i,t)&&isNumerable(s,e))return"string"===i&&(t=parseInt(t,10)),"string"===s&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var a=0,n=t.length,r=e.length,o=[];a<n||a<r;)("number"==typeof t[a]||t[a]instanceof Number)&&("number"==typeof e[a]||e[a]instanceof Number)?o[a]=t[a]-e[a]:o[a]=void 0===e[a]?t[a]:t[a]||e[a],a+=1;return o}return 0}function mul(t,e){var i,s,a,n=_typeof$1(t),r=_typeof$1(e);if(isNumerable(n,t)&&isNumerable(r,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e)){for(a=t.length,i=createTypedArray("float32",a),s=0;s<a;s+=1)i[s]=t[s]*e;return i}if(isNumerable(n,t)&&$bm_isInstanceOfArray(e)){for(a=e.length,i=createTypedArray("float32",a),s=0;s<a;s+=1)i[s]=t*e[s];return i}return 0}function div(t,e){var i,s,a,n=_typeof$1(t),r=_typeof$1(e);if(isNumerable(n,t)&&isNumerable(r,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e)){for(a=t.length,i=createTypedArray("float32",a),s=0;s<a;s+=1)i[s]=t[s]/e;return i}if(isNumerable(n,t)&&$bm_isInstanceOfArray(e)){for(a=e.length,i=createTypedArray("float32",a),s=0;s<a;s+=1)i[s]=t/e[s];return i}return 0}function mod(t,e){return"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof e&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,i){if(e>i){var s=i;i=e,e=s}return Math.min(Math.max(t,e),i)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);var i;e||(e=helperLengthArray);var s=Math.min(t.length,e.length),a=0;for(i=0;i<s;i+=1)a+=Math.pow(e[i]-t[i],2);return Math.sqrt(a)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,i,s=t[0],a=t[1],n=t[2],r=Math.max(s,a,n),o=Math.min(s,a,n),g=(r+o)/2;if(r===o)e=0,i=0;else{var l=r-o;switch(i=g>.5?l/(2-r-o):l/(r+o),r){case s:e=(a-n)/l+(a<n?6:0);break;case a:e=(n-s)/l+2;break;case n:e=(s-a)/l+4}e/=6}return[e,i,g,t[3]]}function hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function hslToRgb(t){var e,i,s,a=t[0],n=t[1],r=t[2];if(0===n)e=r,s=r,i=r;else{var o=r<.5?r*(1+n):r+n-r*n,g=2*r-o;e=hue2rgb(g,o,a+1/3),i=hue2rgb(g,o,a),s=hue2rgb(g,o,a-1/3)}return[e,i,s,t[3]]}function linear(t,e,i,s,a){if(void 0!==s&&void 0!==a||(s=e,a=i,e=0,i=1),i<e){var n=i;i=e,e=n}if(t<=e)return s;if(t>=i)return a;var r,o=i===e?0:(t-e)/(i-e);if(!s.length)return s+(a-s)*o;var g=s.length,l=createTypedArray("float32",g);for(r=0;r<g;r+=1)l[r]=s[r]+(a[r]-s[r])*o;return l}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,s=e.length;t||(t=createTypedArray("float32",s));var a=createTypedArray("float32",s),n=BMMath.random();for(i=0;i<s;i+=1)a[i]=t[i]+n*(e[i]-t[i]);return a}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,i,s){var a,n=t.length,r=shapePool.newElement();r.setPathData(!!s,n);var o,g,l=[0,0];for(a=0;a<n;a+=1)o=e&&e[a]?e[a]:l,g=i&&i[a]?i[a]:l,r.setTripleAt(t[a][0],t[a][1],g[0]+t[a][0],g[1]+t[a][1],o[0]+t[a][0],o[1]+t[a][1],a,!0);return r}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var i,s,a=this.pv.length?this.pv.length:1,n=createTypedArray("float32",a),r=Math.floor(5*time);for(i=0,s=0;i<r;){for(s=0;s<a;s+=1)n[s]+=-e+2*e*BMMath.random();i+=1}var o=5*time,g=o-Math.floor(o),l=createTypedArray("float32",a);if(a>1){for(s=0;s<a;s+=1)l[s]=this.pv[s]+n[s]+(-e+2*e*BMMath.random())*g;return l}return this.pv+n[0]+(-e+2*e*BMMath.random())*g}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads;return[-Math.atan2(i[1],i[2])/degToRads,s,0]}function easeOut(t,e,i,s,a){return applyEase(easeOutBez,t,e,i,s,a)}function easeIn(t,e,i,s,a){return applyEase(easeInBez,t,e,i,s,a)}function ease(t,e,i,s,a){return applyEase(easeInOutBez,t,e,i,s,a)}function applyEase(t,e,i,s,a,n){void 0===a?(a=i,n=s):e=(e-i)/(s-i),e>1?e=1:e<0&&(e=0);var r=t(e);if($bm_isInstanceOfArray(a)){var o,g=a.length,l=createTypedArray("float32",g);for(o=0;o<g;o+=1)l[o]=(n[o]-a[o])*r+a[o];return l}return(n-a)*r+a}function nearestKey(t){var e,i,s,a=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(i=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)i=1,s=data.k[0].t;else{for(e=0;e<a-1;e+=1){if(t===data.k[e].t){i=e+1,s=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(i=e+2,s=data.k[e+1].t):(i=e+1,s=data.k[e].t);break}}-1===i&&(i=e+1,s=data.k[e].t)}else i=0,s=0;var n={};return n.index=i,n.time=s/elem.comp.globalData.frameRate,n}function key(t){var e,i,s;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(s=a.length,i=0;i<s;i+=1)e[i]=a[i],e.value[i]=a[i];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"==typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={initExpressions:function(t){var e=0,i=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0==(e-=1)&&function(){var t,e=i.length;for(t=0;t<e;t+=1)i[t].release();i.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===i.indexOf(t)&&i.push(t)}}};return t.resetFrame=ExpressionManager.resetFrame,t}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var i,s=createSizedArray(e.viewData.length),a=e.viewData.length;for(i=0;i<a;i+=1)s[i]=new t(e.viewData[i],e.masksProperties[i]);return function(t){for(i=0;i<a;){if(e.masksProperties[i].nm===t)return s[i];i+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function i(t,e,i){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(s){if(!t.numKeys)return 0;var a;a="s"in e.keyframes[s-1]?e.keyframes[s-1].s:"e"in e.keyframes[s-2]?e.keyframes[s-2].e:e.keyframes[s-2].s;var n="unidimensional"===i?new Number(a):Object.assign({},a);return n.time=e.keyframes[s-1].t/e.elem.comp.globalData.frameRate,n.value="unidimensional"===i?a[0]:a,n},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function s(){return t}return function(a){return a?"unidimensional"===a.propType?function(e){e&&"pv"in e||(e=t);var s=1/e.mult,a=e.pv*s,n=new Number(a);return n.value=a,i(n,e,"unidimensional"),function(){return e.k&&e.getValue(),a=e.v*s,n.value!==a&&((n=new Number(a)).value=a,i(n,e,"unidimensional")),n}}(a):function(t){t&&"pv"in t||(t=e);var s=1/t.mult,a=t.data&&t.data.l||t.pv.length,n=createTypedArray("float32",a),r=createTypedArray("float32",a);return n.value=r,i(n,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<a;e+=1)r[e]=t.v[e]*s,n[e]=r[e];return n}}(a):s}}(),TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var i,s,a,n;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?n=ExpressionPropertyInterface(t.p):(i=ExpressionPropertyInterface(t.px),s=ExpressionPropertyInterface(t.py),t.pz&&(a=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?n():[i(),s(),a?a():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},LayerExpressionInterface=function(){function t(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function e(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.applyPoint(i,t)}function i(t,e){var i=this.getMatrix(e);return this.applyPoint(i,t)}function s(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.invertPoint(i,t)}function a(t,e){var i=this.getMatrix(e);return this.invertPoint(i,t)}function n(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,s=this._elem.hierarchy.length;for(i=0;i<s;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function r(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,s=this._elem.hierarchy.length;for(i=0;i<s;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function o(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,s=this._elem.hierarchy.length;for(i=0;i<s;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function g(){return[1,1,1,1]}return function(l){var h;function I(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return I.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return h;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return I.effect;case"ADBE Text Properties":return I.textInterface;default:return null}}I.getMatrix=t,I.invertPoint=r,I.applyPoint=n,I.toWorld=i,I.toWorldVec=e,I.fromWorld=a,I.fromWorldVec=s,I.toComp=i,I.fromComp=o,I.sampleImage=g,I.sourceRectAtTime=l.sourceRectAtTime.bind(l),I._elem=l;var c=getDescriptor(h=TransformExpressionInterface(l.finalTransform.mProp),"anchorPoint");return Object.defineProperties(I,{hasParent:{get:function(){return l.hierarchy.length}},parent:{get:function(){return l.hierarchy[0].layerInterface}},rotation:getDescriptor(h,"rotation"),scale:getDescriptor(h,"scale"),position:getDescriptor(h,"position"),opacity:getDescriptor(h,"opacity"),anchorPoint:c,anchor_point:c,transform:{get:function(){return h}},active:{get:function(){return l.isInRange}}}),I.startTime=l.data.st,I.index=l.data.ind,I.source=l.data.refId,I.height=0===l.data.ty?l.data.h:100,I.width=0===l.data.ty?l.data.w:100,I.inPoint=l.data.ip/l.comp.globalData.frameRate,I.outPoint=l.data.op/l.comp.globalData.frameRate,I._name=l.data.nm,I.registerMaskInterface=function(t){I.mask=new MaskManagerInterface(t,l)},I.registerEffectsInterface=function(t){I.effect=t},I}}(),propertyGroupFactory=function(t,e){return function(i){return(i=void 0===i?1:i)<=0?t:e(i-1)}},PropertyInterface=function(t,e){var i={_name:t};return function(t){return(t=void 0===t?1:t)<=0?i:e(t-1)}},EffectsExpressionInterface=function(){function t(i,s,a,n){function r(t){for(var e=i.ef,s=0,a=e.length;s<a;){if(t===e[s].nm||t===e[s].mn||t===e[s].ix)return 5===e[s].ty?l[s]:l[s]();s+=1}throw new Error}var o,g=propertyGroupFactory(r,a),l=[],h=i.ef.length;for(o=0;o<h;o+=1)5===i.ef[o].ty?l.push(t(i.ef[o],s.effectElements[o],s.effectElements[o].propertyGroup,n)):l.push(e(s.effectElements[o],i.ef[o].ty,n,g));return"ADBE Color Control"===i.mn&&Object.defineProperty(r,"color",{get:function(){return l[0]()}}),Object.defineProperties(r,{numProperties:{get:function(){return i.np}},_name:{value:i.nm},propertyGroup:{value:g}}),r.enabled=0!==i.en,r.active=r.enabled,r}function e(t,e,i,s){var a=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",s)),function(){return 10===e?i.comp.compInterface(t.p.v):a()}}return{createEffectsInterface:function(e,i){if(e.effectsManager){var s,a=[],n=e.data.ef,r=e.effectsManager.effectElements.length;for(s=0;s<r;s+=1)a.push(t(n[s],e.effectsManager.effectElements[s],i,e));var o=e.data.ef||[],g=function(t){for(s=0,r=o.length;s<r;){if(t===o[s].nm||t===o[s].mn||t===o[s].ix)return a[s];s+=1}return null};return Object.defineProperty(g,"numProperties",{get:function(){return o.length}}),g}return null}}}(),ShapePathInterface=function(t,e,i){var s=e.sh;function a(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?a.path:null}var n=propertyGroupFactory(a,i);return s.setGroupProperty(PropertyInterface("Path",n)),Object.defineProperties(a,{path:{get:function(){return s.k&&s.getValue(),s}},shape:{get:function(){return s.k&&s.getValue(),s}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:i}}),a},ShapeExpressionInterface=function(){function t(t,r,c){var C,d=[],p=t?t.length:0;for(C=0;C<p;C+=1)"gr"===t[C].ty?d.push(e(t[C],r[C],c)):"fl"===t[C].ty?d.push(i(t[C],r[C],c)):"st"===t[C].ty?d.push(a(t[C],r[C],c)):"tm"===t[C].ty?d.push(n(t[C],r[C],c)):"tr"===t[C].ty||("el"===t[C].ty?d.push(o(t[C],r[C],c)):"sr"===t[C].ty?d.push(g(t[C],r[C],c)):"sh"===t[C].ty?d.push(ShapePathInterface(t[C],r[C],c)):"rc"===t[C].ty?d.push(l(t[C],r[C],c)):"rd"===t[C].ty?d.push(h(t[C],r[C],c)):"rp"===t[C].ty?d.push(I(t[C],r[C],c)):"gf"===t[C].ty?d.push(s(t[C],r[C],c)):d.push((t[C],r[C],function(){return null})));return d}function e(e,i,s){var a=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return a.content;default:return a.transform}};a.propertyGroup=propertyGroupFactory(a,s);var n=function(e,i,s){var a,n=function(t){for(var e=0,i=a.length;e<i;){if(a[e]._name===t||a[e].mn===t||a[e].propertyIndex===t||a[e].ix===t||a[e].ind===t)return a[e];e+=1}return"number"==typeof t?a[t-1]:null};n.propertyGroup=propertyGroupFactory(n,s),a=t(e.it,i.it,n.propertyGroup),n.numProperties=a.length;var o=r(e.it[e.it.length-1],i.it[i.it.length-1],n.propertyGroup);return n.transform=o,n.propertyIndex=e.cix,n._name=e.nm,n}(e,i,a.propertyGroup),o=r(e.it[e.it.length-1],i.it[i.it.length-1],a.propertyGroup);return a.content=n,a.transform=o,Object.defineProperty(a,"_name",{get:function(){return e.nm}}),a.numProperties=e.np,a.propertyIndex=e.ix,a.nm=e.nm,a.mn=e.mn,a}function i(t,e,i){function s(t){return"Color"===t||"color"===t?s.color:"Opacity"===t||"opacity"===t?s.opacity:null}return Object.defineProperties(s,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),s}function s(t,e,i){function s(t){return"Start Point"===t||"start point"===t?s.startPoint:"End Point"===t||"end point"===t?s.endPoint:"Opacity"===t||"opacity"===t?s.opacity:null}return Object.defineProperties(s,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",i)),e.e.setGroupProperty(PropertyInterface("End Point",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),s}function a(t,e,i){var s,a=propertyGroupFactory(l,i),n=propertyGroupFactory(g,a);function r(i){Object.defineProperty(g,t.d[i].nm,{get:ExpressionPropertyInterface(e.d.dataProps[i].p)})}var o=t.d?t.d.length:0,g={};for(s=0;s<o;s+=1)r(s),e.d.dataProps[s].p.setGroupProperty(n);function l(t){return"Color"===t||"color"===t?l.color:"Opacity"===t||"opacity"===t?l.opacity:"Stroke Width"===t||"stroke width"===t?l.strokeWidth:null}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return g}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",a)),e.o.setGroupProperty(PropertyInterface("Opacity",a)),e.w.setGroupProperty(PropertyInterface("Stroke Width",a)),l}function n(t,e,i){function s(e){return e===t.e.ix||"End"===e||"end"===e?s.end:e===t.s.ix?s.start:e===t.o.ix?s.offset:null}var a=propertyGroupFactory(s,i);return s.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",a)),e.e.setGroupProperty(PropertyInterface("End",a)),e.o.setGroupProperty(PropertyInterface("Offset",a)),s.propertyIndex=t.ix,s.propertyGroup=i,Object.defineProperties(s,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),s.mn=t.mn,s}function r(t,e,i){function s(e){return t.a.ix===e||"Anchor Point"===e?s.anchorPoint:t.o.ix===e||"Opacity"===e?s.opacity:t.p.ix===e||"Position"===e?s.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?s.rotation:t.s.ix===e||"Scale"===e?s.scale:t.sk&&t.sk.ix===e||"Skew"===e?s.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?s.skewAxis:null}var a=propertyGroupFactory(s,i);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",a)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",a)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",a)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",a)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",a)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",a)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",a))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",a)),Object.defineProperties(s,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),s.ty="tr",s.mn=t.mn,s.propertyGroup=i,s}function o(t,e,i){function s(e){return t.p.ix===e?s.position:t.s.ix===e?s.size:null}var a=propertyGroupFactory(s,i);s.propertyIndex=t.ix;var n="tm"===e.sh.ty?e.sh.prop:e.sh;return n.s.setGroupProperty(PropertyInterface("Size",a)),n.p.setGroupProperty(PropertyInterface("Position",a)),Object.defineProperties(s,{size:{get:ExpressionPropertyInterface(n.s)},position:{get:ExpressionPropertyInterface(n.p)},_name:{value:t.nm}}),s.mn=t.mn,s}function g(t,e,i){function s(e){return t.p.ix===e?s.position:t.r.ix===e?s.rotation:t.pt.ix===e?s.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?s.outerRadius:t.os.ix===e?s.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?s.innerRoundness:null:s.innerRadius}var a=propertyGroupFactory(s,i),n="tm"===e.sh.ty?e.sh.prop:e.sh;return s.propertyIndex=t.ix,n.or.setGroupProperty(PropertyInterface("Outer Radius",a)),n.os.setGroupProperty(PropertyInterface("Outer Roundness",a)),n.pt.setGroupProperty(PropertyInterface("Points",a)),n.p.setGroupProperty(PropertyInterface("Position",a)),n.r.setGroupProperty(PropertyInterface("Rotation",a)),t.ir&&(n.ir.setGroupProperty(PropertyInterface("Inner Radius",a)),n.is.setGroupProperty(PropertyInterface("Inner Roundness",a))),Object.defineProperties(s,{position:{get:ExpressionPropertyInterface(n.p)},rotation:{get:ExpressionPropertyInterface(n.r)},points:{get:ExpressionPropertyInterface(n.pt)},outerRadius:{get:ExpressionPropertyInterface(n.or)},outerRoundness:{get:ExpressionPropertyInterface(n.os)},innerRadius:{get:ExpressionPropertyInterface(n.ir)},innerRoundness:{get:ExpressionPropertyInterface(n.is)},_name:{value:t.nm}}),s.mn=t.mn,s}function l(t,e,i){function s(e){return t.p.ix===e?s.position:t.r.ix===e?s.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?s.size:null}var a=propertyGroupFactory(s,i),n="tm"===e.sh.ty?e.sh.prop:e.sh;return s.propertyIndex=t.ix,n.p.setGroupProperty(PropertyInterface("Position",a)),n.s.setGroupProperty(PropertyInterface("Size",a)),n.r.setGroupProperty(PropertyInterface("Rotation",a)),Object.defineProperties(s,{position:{get:ExpressionPropertyInterface(n.p)},roundness:{get:ExpressionPropertyInterface(n.r)},size:{get:ExpressionPropertyInterface(n.s)},_name:{value:t.nm}}),s.mn=t.mn,s}function h(t,e,i){function s(e){return t.r.ix===e||"Round Corners 1"===e?s.radius:null}var a=propertyGroupFactory(s,i),n=e;return s.propertyIndex=t.ix,n.rd.setGroupProperty(PropertyInterface("Radius",a)),Object.defineProperties(s,{radius:{get:ExpressionPropertyInterface(n.rd)},_name:{value:t.nm}}),s.mn=t.mn,s}function I(t,e,i){function s(e){return t.c.ix===e||"Copies"===e?s.copies:t.o.ix===e||"Offset"===e?s.offset:null}var a=propertyGroupFactory(s,i),n=e;return s.propertyIndex=t.ix,n.c.setGroupProperty(PropertyInterface("Copies",a)),n.o.setGroupProperty(PropertyInterface("Offset",a)),Object.defineProperties(s,{copies:{get:ExpressionPropertyInterface(n.c)},offset:{get:ExpressionPropertyInterface(n.o)},_name:{value:t.nm}}),s.mn=t.mn,s}return function(e,i,s){var a;function n(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?s:a[t-1];for(var e=0,i=a.length;e<i;){if(a[e]._name===t)return a[e];e+=1}return null}return n.propertyGroup=propertyGroupFactory(n,(function(){return s})),a=t(e,i,n.propertyGroup),n.numProperties=a.length,n._name="Contents",n}}(),TextExpressionInterface=function(t){var e;function i(t){return"ADBE Text Document"===t?i.sourceText:null}return Object.defineProperty(i,"sourceText",{get:function(){t.textProperty.getValue();var i=t.textProperty.currentData.t;return e&&i===e.value||((e=new String(i)).value=i||new String(i),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),i};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var FootageInterface=(dataInterfaceFactory=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",i=t.getFootageData();function s(t){if(i[t])return e=t,"object"===_typeof(i=i[t])?s:i;var a=t.indexOf(e);if(-1!==a){var n=parseInt(t.substr(a+e.length),10);return"object"===_typeof(i=i[n])?s:i}return""}return function(){return e="",i=t.getFootageData(),s}}(t),e},function(t){function e(t){return"Data"===t?e.dataInterface:null}return e._name="Data",e.dataInterface=dataInterfaceFactory(t),e}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers={searchExpressions:function(t,e,i){e.x&&(i.k=!0,i.x=!0,i.initiateExpression=ExpressionManager.initiateExpression,i.effectsSequence.push(i.initiateExpression(t,e,i).bind(i)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),i=this.getValueAtTime(t+-.01),s=0;if(e.length){var a;for(a=0;a<e.length;a+=1)s+=Math.pow(i[a]-e[a],2);s=100*Math.sqrt(s)}else s=0;return s},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,i,s=-.001,a=this.getValueAtTime(t),n=this.getValueAtTime(t+s);if(a.length)for(e=createTypedArray("float32",a.length),i=0;i<a.length;i+=1)e[i]=(n[i]-a[i])/s;else e=(n-a)/s;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};function addPropertyDecorator(){function t(t,e,i){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var s,a,n,r,o,g=this.comp.renderedFrame,l=this.keyframes,h=l[l.length-1].t;if(g<=h)return this.pv;if(i?a=h-(s=e?Math.abs(h-this.elem.comp.globalData.frameRate*e):Math.max(0,h-this.elem.data.ip)):((!e||e>l.length-1)&&(e=l.length-1),s=h-(a=l[l.length-1-e].t)),"pingpong"===t){if(Math.floor((g-a)/s)%2!=0)return this.getValueAtTime((s-(g-a)%s+a)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var I=this.getValueAtTime(a/this.comp.globalData.frameRate,0),c=this.getValueAtTime(h/this.comp.globalData.frameRate,0),C=this.getValueAtTime(((g-a)%s+a)/this.comp.globalData.frameRate,0),d=Math.floor((g-a)/s);if(this.pv.length){for(r=(o=new Array(I.length)).length,n=0;n<r;n+=1)o[n]=(c[n]-I[n])*d+C[n];return o}return(c-I)*d+C}if("continue"===t){var p=this.getValueAtTime(h/this.comp.globalData.frameRate,0),m=this.getValueAtTime((h-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(r=(o=new Array(p.length)).length,n=0;n<r;n+=1)o[n]=p[n]+(p[n]-m[n])*((g-h)/this.comp.globalData.frameRate)/5e-4;return o}return p+(g-h)/.001*(p-m)}}return this.getValueAtTime(((g-a)%s+a)/this.comp.globalData.frameRate,0)}function e(t,e,i){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var s,a,n,r,o,g=this.comp.renderedFrame,l=this.keyframes,h=l[0].t;if(g>=h)return this.pv;if(i?a=h+(s=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-h)):((!e||e>l.length-1)&&(e=l.length-1),s=(a=l[e].t)-h),"pingpong"===t){if(Math.floor((h-g)/s)%2==0)return this.getValueAtTime(((h-g)%s+h)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var I=this.getValueAtTime(h/this.comp.globalData.frameRate,0),c=this.getValueAtTime(a/this.comp.globalData.frameRate,0),C=this.getValueAtTime((s-(h-g)%s+h)/this.comp.globalData.frameRate,0),d=Math.floor((h-g)/s)+1;if(this.pv.length){for(r=(o=new Array(I.length)).length,n=0;n<r;n+=1)o[n]=C[n]-(c[n]-I[n])*d;return o}return C-(c-I)*d}if("continue"===t){var p=this.getValueAtTime(h/this.comp.globalData.frameRate,0),m=this.getValueAtTime((h+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(r=(o=new Array(p.length)).length,n=0;n<r;n+=1)o[n]=p[n]+(p[n]-m[n])*(h-g)/.001;return o}return p+(p-m)*(h-g)/.001}}return this.getValueAtTime((s-((h-g)%s+h))/this.comp.globalData.frameRate,0)}function i(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var i,s,a=this.comp.renderedFrame/this.comp.globalData.frameRate,n=a-t,r=e>1?(a+t-n)/(e-1):1,o=0,g=0;for(i=this.pv.length?createTypedArray("float32",this.pv.length):0;o<e;){if(s=this.getValueAtTime(n+o*r),this.pv.length)for(g=0;g<this.pv.length;g+=1)i[g]+=s[g];else i+=s;o+=1}if(this.pv.length)for(g=0;g<this.pv.length;g+=1)i[g]/=e;else i/=e;return i}function s(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var i=this.a.getValueAtTime(t);e.translate(-i[0]*this.a.mult,-i[1]*this.a.mult,i[2]*this.a.mult)}if(this.appliedTransformations<2){var s=this.s.getValueAtTime(t);e.scale(s[0]*this.s.mult,s[1]*this.s.mult,s[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var a=this.sk.getValueAtTime(t),n=this.sa.getValueAtTime(t);e.skewFromAxis(-a*this.sk.mult,n*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var r=this.r.getValueAtTime(t);e.rotate(-r*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(t),g=this.ry.getValueAtTime(t),l=this.rx.getValueAtTime(t),h=this.or.getValueAtTime(t);e.rotateZ(-o*this.rz.mult).rotateY(g*this.ry.mult).rotateX(l*this.rx.mult).rotateZ(-h[2]*this.or.mult).rotateY(h[1]*this.or.mult).rotateX(h[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var I=this.px.getValueAtTime(t),c=this.py.getValueAtTime(t);if(this.data.p.z){var C=this.pz.getValueAtTime(t);e.translate(I*this.px.mult,c*this.py.mult,-C*this.pz.mult)}else e.translate(I*this.px.mult,c*this.py.mult,0)}else{var d=this.p.getValueAtTime(t);e.translate(d[0]*this.p.mult,d[1]*this.p.mult,-d[2]*this.p.mult)}return e}function a(){return this.v.clone(new Matrix)}var n=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,i){var r=n(t,e,i);return r.dynamicProperties.length?r.getValueAtTime=s.bind(r):r.getValueAtTime=a.bind(r),r.setGroupProperty=expressionHelpers.setGroupProperty,r};var r=PropertyFactory.getProp;PropertyFactory.getProp=function(s,a,n,o,g){var l=r(s,a,n,o,g);l.kf?l.getValueAtTime=expressionHelpers.getValueAtTime.bind(l):l.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(l),l.setGroupProperty=expressionHelpers.setGroupProperty,l.loopOut=t,l.loopIn=e,l.smooth=i,l.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(l),l.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(l),l.numKeys=1===a.a?a.k.length:0,l.propertyIndex=a.ix;var h=0;return 0!==n&&(h=createTypedArray("float32",1===a.a?a.k[0].s.length:a.k.length)),l._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:h},expressionHelpers.searchExpressions(s,a,l),l.k&&g.addDynamicProperty(l),l};var o=ShapePropertyFactory.getConstructorFunction(),g=ShapePropertyFactory.getKeyframedConstructorFunction();function l(){}l.prototype={vertices:function(t,e){this.k&&this.getValue();var i,s=this.v;void 0!==e&&(s=this.getValueAtTime(e,0));var a=s._length,n=s[t],r=s.v,o=createSizedArray(a);for(i=0;i<a;i+=1)o[i]="i"===t||"o"===t?[n[i][0]-r[i][0],n[i][1]-r[i][1]]:[n[i][0],n[i][1]];return o},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(i));for(var s,a=this._segmentsLength,n=a.lengths,r=a.totalLength*t,o=0,g=n.length,l=0;o<g;){if(l+n[o].addedLength>r){var h=o,I=i.c&&o===g-1?0:o+1,c=(r-l)/n[o].addedLength;s=bez.getPointInSegment(i.v[h],i.v[I],i.o[h],i.i[I],c,n[o]);break}l+=n[o].addedLength,o+=1}return s||(s=i.c?[i.v[0][0],i.v[0][1]]:[i.v[i._length-1][0],i.v[i._length-1][1]]),s},vectorOnPath:function(t,e,i){1==t?t=this.v.c:0==t&&(t=.999);var s=this.pointOnPath(t,e),a=this.pointOnPath(t+.001,e),n=a[0]-s[0],r=a[1]-s[1],o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));return 0===o?[0,0]:"tangent"===i?[n/o,r/o]:[-r/o,n/o]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([l],o),extendPrototype([l],g),g.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},g.prototype.initiateExpression=ExpressionManager.initiateExpression;var h=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,i,s,a){var n=h(t,e,i,s,a);return n.propertyIndex=e.ix,n.lock=!1,3===i?expressionHelpers.searchExpressions(t,e.pt,n):4===i&&expressionHelpers.searchExpressions(t,e.ks,n),n.k&&t.addDynamicProperty(n),n}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(t,e){var i=this.calculateExpression(e);if(t.t!==i){var s={};return this.copyData(s,t),s.t=i.toString(),s.__complete=!1,s}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(t,e){var i,s,a=createNS("feMerge");for(a.setAttribute("result",t),s=0;s<e.length;s+=1)(i=createNS("feMergeNode")).setAttribute("in",e[s]),a.appendChild(i),a.appendChild(i);return a}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,i,s,a){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=n,n.setAttribute("result",s+"_tint_1"),t.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",s+"_tint_2"),t.appendChild(n),this.matrixFilter=n;var r=this.createMergeNode(s,[a,s+"_tint_1",s+"_tint_2"]);t.appendChild(r)}function SVGFillFilter(t,e,i,s){this.filterManager=e;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",s),t.appendChild(a),this.matrixFilter=a}function SVGStrokeEffect(t,e,i){this.initialized=!1,this.filterManager=e,this.elem=i,this.paths=[]}function SVGTritoneFilter(t,e,i,s){this.filterManager=e;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(a);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",s),this.matrixFilter=n;var r=createNS("feFuncR");r.setAttribute("type","table"),n.appendChild(r),this.feFuncR=r;var o=createNS("feFuncG");o.setAttribute("type","table"),n.appendChild(o),this.feFuncG=o;var g=createNS("feFuncB");g.setAttribute("type","table"),n.appendChild(g),this.feFuncB=g,t.appendChild(n)}function SVGProLevelsFilter(t,e,i,s){this.filterManager=e;var a=this.filterManager.effectElements,n=createNS("feComponentTransfer");(a[10].p.k||0!==a[10].p.v||a[11].p.k||1!==a[11].p.v||a[12].p.k||1!==a[12].p.v||a[13].p.k||0!==a[13].p.v||a[14].p.k||1!==a[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(a[17].p.k||0!==a[17].p.v||a[18].p.k||1!==a[18].p.v||a[19].p.k||1!==a[19].p.v||a[20].p.k||0!==a[20].p.v||a[21].p.k||1!==a[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(a[24].p.k||0!==a[24].p.v||a[25].p.k||1!==a[25].p.v||a[26].p.k||1!==a[26].p.v||a[27].p.k||0!==a[27].p.v||a[28].p.k||1!==a[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(a[31].p.k||0!==a[31].p.v||a[32].p.k||1!==a[32].p.v||a[33].p.k||1!==a[33].p.v||a[34].p.k||0!==a[34].p.v||a[35].p.k||1!==a[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n)),(a[3].p.k||0!==a[3].p.v||a[4].p.k||1!==a[4].p.v||a[5].p.k||1!==a[5].p.v||a[6].p.k||0!==a[6].p.v||a[7].p.k||1!==a[7].p.v)&&((n=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",s),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(t,e,i,s,a){var n=e.container.globalData.renderConfig.filterSize,r=e.data.fs||n;t.setAttribute("x",r.x||n.x),t.setAttribute("y",r.y||n.y),t.setAttribute("width",r.width||n.width),t.setAttribute("height",r.height||n.height),this.filterManager=e;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",s+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,t.appendChild(o);var g=createNS("feOffset");g.setAttribute("dx","25"),g.setAttribute("dy","0"),g.setAttribute("in",s+"_drop_shadow_1"),g.setAttribute("result",s+"_drop_shadow_2"),this.feOffset=g,t.appendChild(g);var l=createNS("feFlood");l.setAttribute("flood-color","#00ff00"),l.setAttribute("flood-opacity","1"),l.setAttribute("result",s+"_drop_shadow_3"),this.feFlood=l,t.appendChild(l);var h=createNS("feComposite");h.setAttribute("in",s+"_drop_shadow_3"),h.setAttribute("in2",s+"_drop_shadow_2"),h.setAttribute("operator","in"),h.setAttribute("result",s+"_drop_shadow_4"),t.appendChild(h);var I=this.createMergeNode(s,[s+"_drop_shadow_4",a]);t.appendChild(I)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+s+" 0"),this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,i,s,a=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(s=this.elem.maskManager.masksProperties.length,i=0):s=1+(i=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);i<s;i+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var n=createNS("mask"),r=createElementID();n.setAttribute("id",r),n.setAttribute("mask-type","alpha"),n.appendChild(e),this.elem.globalData.defs.appendChild(n);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+r+")");a[0];)o.appendChild(a[0]);this.elem.layerElement.appendChild(o),this.masker=n,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(a=this.elem.layerElement.children||this.elem.layerElement.childNodes;a.length;)this.elem.layerElement.removeChild(a[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){var e;this.initialized||this.initialize();var i,s,a=this.paths.length;for(e=0;e<a;e+=1)if(-1!==this.paths[e].m&&(i=this.elem.maskManager.viewData[this.paths[e].m],s=this.paths[e].p,(t||this.filterManager._mdf||i.prop._mdf)&&s.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){var n;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var r=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),g=s.getTotalLength();n="0 0 0 "+g*r+" ";var l,h=g*(o-r),I=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,c=Math.floor(h/I);for(l=0;l<c;l+=1)n+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";n+="0 "+10*g+" 0 0"}else n="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;s.setAttribute("stroke-dasharray",n)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var C=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*C[0])+","+bmFloor(255*C[1])+","+bmFloor(255*C[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v,a=s[0]+" "+i[0]+" "+e[0],n=s[1]+" "+i[1]+" "+e[1],r=s[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",n),this.feFuncB.setAttribute("tableValues",r)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var i=createNS(t);return i.setAttribute("type","table"),e.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(t,e,i,s,a){for(var n,r,o=0,g=Math.min(t,e),l=Math.max(t,e),h=Array.call(null,{length:256}),I=0,c=a-s,C=e-t;o<=256;)r=(n=o/256)<=g?C<0?a:s:n>=l?C<0?s:a:s+c*Math.pow((n-t)/C,1/i),h[I]=r,I+=1,o+=256/255;return h.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[3].p._mdf||i[4].p._mdf||i[5].p._mdf||i[6].p._mdf||i[7].p._mdf)&&(e=this.getTableValue(i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v,i[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[10].p._mdf||i[11].p._mdf||i[12].p._mdf||i[13].p._mdf||i[14].p._mdf)&&(e=this.getTableValue(i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v,i[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[17].p._mdf||i[18].p._mdf||i[19].p._mdf||i[20].p._mdf||i[21].p._mdf)&&(e=this.getTableValue(i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v,i[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[24].p._mdf||i[25].p._mdf||i[26].p._mdf||i[27].p._mdf||i[28].p._mdf)&&(e=this.getTableValue(i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v,i[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[31].p._mdf||i[32].p._mdf||i[33].p._mdf||i[34].p._mdf||i[35].p._mdf)&&(e=this.getTableValue(i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v,i[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var i=this.filterManager.effectElements[3].p.v,s=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=i*Math.cos(s),n=i*Math.sin(s);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",n)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,i){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=i,i.matteElement=createNS("g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}function SVGGaussianBlurEffect(t,e,i,s){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var a=createNS("feGaussianBlur");a.setAttribute("result",s),t.appendChild(a),this.feGaussianBlur=a}function TransformEffect(){}function SVGTransformEffect(t,e){this.init(e)}function CVTransformEffect(t){this.init(t)}return SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,i=_svgMatteSymbols.length;e<i;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var i=t.layerElement.parentNode;if(i){for(var s,a=i.children,n=0,r=a.length;n<r&&a[n]!==t.layerElement;)n+=1;n<=r-2&&(s=a[n+1]);var o=createNS("use");o.setAttribute("href","#"+e),s?i.insertBefore(o,s):i.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var i=createElementID(),s=createNS("mask");s.setAttribute("id",e.layerId),s.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var a=t.globalData.defs;a.appendChild(s);var n=createNS("symbol");n.setAttribute("id",i),this.replaceInParent(e,i),n.appendChild(e.layerElement),a.appendChild(n);var r=createNS("use");r.setAttribute("href","#"+i),s.appendChild(r),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,i=0,s=e.length;i<s;)e[i]&&e[i].data.ind===t&&this.setElementAsMask(this.elem,e[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,s=3==i?0:e,a=2==i?0:e;this.feGaussianBlur.setAttribute("stdDeviation",s+" "+a);var n=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",n)}},TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,i=e[0].p.v,s=e[1].p.v,a=1===e[2].p.v,n=e[3].p.v,r=a?n:e[4].p.v,o=e[5].p.v,g=e[6].p.v,l=e[7].p.v;this.matrix.reset(),this.matrix.translate(-i[0],-i[1],i[2]),this.matrix.scale(.01*r,.01*n,1),this.matrix.rotate(-l*degToRads),this.matrix.skewFromAxis(-o*degToRads,(g+90)*degToRads),this.matrix.translate(s[0],s[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())},915:function(t){"use strict";var e,i,s=0;function a(t){return t>=48&&t<=57}function n(t,e){for(var n=(t+="").length,r=(e+="").length,o=0,g=0;o<n&&g<r;){var l=t.charCodeAt(o),h=e.charCodeAt(g);if(a(l)){if(!a(h))return l-h;for(var I=o,c=g;48===l&&++I<n;)l=t.charCodeAt(I);for(;48===h&&++c<r;)h=e.charCodeAt(c);for(var C=I,d=c;C<n&&a(t.charCodeAt(C));)++C;for(;d<r&&a(e.charCodeAt(d));)++d;var p=C-I-d+c;if(p)return p;for(;I<C;)if(p=t.charCodeAt(I++)-e.charCodeAt(c++))return p;o=C,g=d}else{if(l!==h)return l<s&&h<s&&-1!==i[l]&&-1!==i[h]?i[l]-i[h]:l-h;++o,++g}}return o>=n&&g<r&&n>=r?-1:g>=r&&o<n&&r>=n?1:n-r}n.caseInsensitive=n.i=function(t,e){return n((""+t).toLowerCase(),(""+e).toLowerCase())},Object.defineProperties(n,{alphabet:{get:function(){return e},set:function(t){i=[];var a=0;if(e=t)for(;a<e.length;a++)i[e.charCodeAt(a)]=a;for(s=i.length,a=0;a<s;a++)void 0===i[a]&&(i[a]=-1)}}}),t.exports=n},379:function(t){"use strict";var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var n={},r=[],o=0;o<t.length;o++){var g=t[o],l=s.base?g[0]+s.base:g[0],h=n[l]||0,I="".concat(l," ").concat(h);n[l]=h+1;var c=i(I),C={css:g[1],media:g[2],sourceMap:g[3],supports:g[4],layer:g[5]};if(-1!==c)e[c].references++,e[c].updater(C);else{var d=a(C,s);s.byIndex=o,e.splice(o,0,{identifier:I,updater:d,references:1})}r.push(I)}return r}function a(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,a){var n=s(t=t||[],a=a||{});return function(t){t=t||[];for(var r=0;r<n.length;r++){var o=i(n[r]);e[o].references--}for(var g=s(t,a),l=0;l<n.length;l++){var h=i(n[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}n=g}}},569:function(t){"use strict";var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,i){"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var a=void 0!==i.layer;a&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,a&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},442:function(){const t=document.querySelectorAll(".catalog__item-btn-buy"),e=document.querySelectorAll(".catalog__item-btn-in-cart");t.forEach((t=>{t.addEventListener("click",(()=>{t.classList.add("none"),t.closest(".catalog__item-btn-block").children[1].classList.remove("none")}))})),e.forEach((t=>{t.addEventListener("click",(()=>{t.classList.add("none"),t.closest(".catalog__item-btn-block").children[0].classList.remove("none")}))}))},952:function(){const t=document.querySelectorAll(".reviews__item"),e=document.querySelector(".reviews__item");let{top:i}=e.getBoundingClientRect(),s=window.scrollY;window.addEventListener("scroll",(()=>{s=window.scrollY+600,i<s&&t.forEach((t=>{t.classList.add("visible")}))}))}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.amdO={},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.nc=void 0;var __webpack_exports__={};!function(){"use strict";const t=Math.min,e=Math.max,i=Math.round,s=(Math.floor,t=>({x:t,y:t})),a={left:"right",right:"left",bottom:"top",top:"bottom"},n={start:"end",end:"start"};function r(i,s,a){return e(i,t(s,a))}function o(t,e){return"function"==typeof t?t(e):t}function g(t){return t.split("-")[0]}function l(t){return t.split("-")[1]}function h(t){return"x"===t?"y":"x"}function I(t){return"y"===t?"height":"width"}function c(t){return["top","bottom"].includes(g(t))?"y":"x"}function C(t){return h(c(t))}function d(t){return t.replace(/start|end/g,(t=>n[t]))}function p(t){return t.replace(/left|right|bottom|top/g,(t=>a[t]))}function m(t){const{x:e,y:i,width:s,height:a}=t;return{width:s,height:a,top:i,left:e,right:e+s,bottom:i+a,x:e,y:i}}function u(t,e,i){let{reference:s,floating:a}=t;const n=c(e),r=C(e),o=I(r),h=g(e),d="y"===n,p=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,u=s[o]/2-a[o]/2;let A;switch(h){case"top":A={x:p,y:s.y-a.height};break;case"bottom":A={x:p,y:s.y+s.height};break;case"right":A={x:s.x+s.width,y:m};break;case"left":A={x:s.x-a.width,y:m};break;default:A={x:s.x,y:s.y}}switch(l(e)){case"start":A[r]-=u*(i&&d?-1:1);break;case"end":A[r]+=u*(i&&d?-1:1)}return A}async function A(t,e){var i;void 0===e&&(e={});const{x:s,y:a,platform:n,rects:r,elements:g,strategy:l}=t,{boundary:h="clippingAncestors",rootBoundary:I="viewport",elementContext:c="floating",altBoundary:C=!1,padding:d=0}=o(e,t),p=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(d),u=g[C?"floating"===c?"reference":"floating":c],A=m(await n.getClippingRect({element:null==(i=await(null==n.isElement?void 0:n.isElement(u)))||i?u:u.contextElement||await(null==n.getDocumentElement?void 0:n.getDocumentElement(g.floating)),boundary:h,rootBoundary:I,strategy:l})),f="floating"===c?{x:s,y:a,width:r.floating.width,height:r.floating.height}:r.reference,y=await(null==n.getOffsetParent?void 0:n.getOffsetParent(g.floating)),b=await(null==n.isElement?void 0:n.isElement(y))&&await(null==n.getScale?void 0:n.getScale(y))||{x:1,y:1},v=m(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:g,rect:f,offsetParent:y,strategy:l}):f);return{top:(A.top-v.top+p.top)/b.y,bottom:(v.bottom-A.bottom+p.bottom)/b.y,left:(A.left-v.left+p.left)/b.x,right:(v.right-A.right+p.right)/b.x}}function f(t){return v(t)?(t.nodeName||"").toLowerCase():"#document"}function y(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function b(t){var e;return null==(e=(v(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function v(t){return t instanceof Node||t instanceof y(t).Node}function S(t){return t instanceof Element||t instanceof y(t).Element}function G(t){return t instanceof HTMLElement||t instanceof y(t).HTMLElement}function B(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof y(t).ShadowRoot)}function w(t){const{overflow:e,overflowX:i,overflowY:s,display:a}=E(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(a)}function Z(t){return["table","td","th"].includes(f(t))}function k(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function P(t){const e=W(),i=S(t)?E(t):t;return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some((t=>(i.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(i.contain||"").includes(t)))}function W(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function x(t){return["html","body","#document"].includes(f(t))}function E(t){return y(t).getComputedStyle(t)}function V(t){return S(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function R(t){if("html"===f(t))return t;const e=t.assignedSlot||t.parentNode||B(t)&&t.host||b(t);return B(e)?e.host:e}function F(t){const e=R(t);return x(e)?t.ownerDocument?t.ownerDocument.body:t.body:G(e)&&w(e)?e:F(e)}function K(t,e,i){var s;void 0===e&&(e=[]),void 0===i&&(i=!0);const a=F(t),n=a===(null==(s=t.ownerDocument)?void 0:s.body),r=y(a);return n?e.concat(r,r.visualViewport||[],w(a)?a:[],r.frameElement&&i?K(r.frameElement):[]):e.concat(a,K(a,[],i))}function Y(t){const e=E(t);let s=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const n=G(t),r=n?t.offsetWidth:s,o=n?t.offsetHeight:a,g=i(s)!==r||i(a)!==o;return g&&(s=r,a=o),{width:s,height:a,$:g}}function T(t){return S(t)?t:t.contextElement}function _(t){const e=T(t);if(!G(e))return s(1);const a=e.getBoundingClientRect(),{width:n,height:r,$:o}=Y(e);let g=(o?i(a.width):a.width)/n,l=(o?i(a.height):a.height)/r;return g&&Number.isFinite(g)||(g=1),l&&Number.isFinite(l)||(l=1),{x:g,y:l}}const M=s(0);function D(t){const e=y(t);return W()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:M}function L(t,e,i,a){void 0===e&&(e=!1),void 0===i&&(i=!1);const n=t.getBoundingClientRect(),r=T(t);let o=s(1);e&&(a?S(a)&&(o=_(a)):o=_(t));const g=function(t,e,i){return void 0===e&&(e=!1),!(!i||e&&i!==y(t))&&e}(r,i,a)?D(r):s(0);let l=(n.left+g.x)/o.x,h=(n.top+g.y)/o.y,I=n.width/o.x,c=n.height/o.y;if(r){const t=y(r),e=a&&S(a)?y(a):a;let i=t,s=i.frameElement;for(;s&&a&&e!==i;){const t=_(s),e=s.getBoundingClientRect(),a=E(s),n=e.left+(s.clientLeft+parseFloat(a.paddingLeft))*t.x,r=e.top+(s.clientTop+parseFloat(a.paddingTop))*t.y;l*=t.x,h*=t.y,I*=t.x,c*=t.y,l+=n,h+=r,i=y(s),s=i.frameElement}}return m({width:I,height:c,x:l,y:h})}function H(t){return L(b(t)).left+V(t).scrollLeft}function X(t,i,a){let n;if("viewport"===i)n=function(t,e){const i=y(t),s=b(t),a=i.visualViewport;let n=s.clientWidth,r=s.clientHeight,o=0,g=0;if(a){n=a.width,r=a.height;const t=W();(!t||t&&"fixed"===e)&&(o=a.offsetLeft,g=a.offsetTop)}return{width:n,height:r,x:o,y:g}}(t,a);else if("document"===i)n=function(t){const i=b(t),s=V(t),a=t.ownerDocument.body,n=e(i.scrollWidth,i.clientWidth,a.scrollWidth,a.clientWidth),r=e(i.scrollHeight,i.clientHeight,a.scrollHeight,a.clientHeight);let o=-s.scrollLeft+H(t);const g=-s.scrollTop;return"rtl"===E(a).direction&&(o+=e(i.clientWidth,a.clientWidth)-n),{width:n,height:r,x:o,y:g}}(b(t));else if(S(i))n=function(t,e){const i=L(t,!0,"fixed"===e),a=i.top+t.clientTop,n=i.left+t.clientLeft,r=G(t)?_(t):s(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:n*r.x,y:a*r.y}}(i,a);else{const e=D(t);n={...i,x:i.x-e.x,y:i.y-e.y}}return m(n)}function N(t,e){const i=R(t);return!(i===e||!S(i)||x(i))&&("fixed"===E(i).position||N(i,e))}function z(t,e,i){const a=G(e),n=b(e),r="fixed"===i,o=L(t,!0,r,e);let g={scrollLeft:0,scrollTop:0};const l=s(0);if(a||!a&&!r)if(("body"!==f(e)||w(n))&&(g=V(e)),a){const t=L(e,!0,r,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else n&&(l.x=H(n));return{x:o.left+g.scrollLeft-l.x,y:o.top+g.scrollTop-l.y,width:o.width,height:o.height}}function O(t){return"static"===E(t).position}function J(t,e){return G(t)&&"fixed"!==E(t).position?e?e(t):t.offsetParent:null}function j(t,e){const i=y(t);if(k(t))return i;if(!G(t)){let e=R(t);for(;e&&!x(e);){if(S(e)&&!O(e))return e;e=R(e)}return i}let s=J(t,e);for(;s&&Z(s)&&O(s);)s=J(s,e);return s&&x(s)&&O(s)&&!P(s)?i:s||function(t){let e=R(t);for(;G(e)&&!x(e);){if(P(e))return e;if(k(e))return null;e=R(e)}return null}(t)||i}const U={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:i,offsetParent:a,strategy:n}=t;const r="fixed"===n,o=b(a),g=!!e&&k(e.floating);if(a===o||g&&r)return i;let l={scrollLeft:0,scrollTop:0},h=s(1);const I=s(0),c=G(a);if((c||!c&&!r)&&(("body"!==f(a)||w(o))&&(l=V(a)),G(a))){const t=L(a);h=_(a),I.x=t.x+a.clientLeft,I.y=t.y+a.clientTop}return{width:i.width*h.x,height:i.height*h.y,x:i.x*h.x-l.scrollLeft*h.x+I.x,y:i.y*h.y-l.scrollTop*h.y+I.y}},getDocumentElement:b,getClippingRect:function(i){let{element:s,boundary:a,rootBoundary:n,strategy:r}=i;const o=[..."clippingAncestors"===a?k(s)?[]:function(t,e){const i=e.get(t);if(i)return i;let s=K(t,[],!1).filter((t=>S(t)&&"body"!==f(t))),a=null;const n="fixed"===E(t).position;let r=n?R(t):t;for(;S(r)&&!x(r);){const e=E(r),i=P(r);i||"fixed"!==e.position||(a=null),(n?!i&&!a:!i&&"static"===e.position&&a&&["absolute","fixed"].includes(a.position)||w(r)&&!i&&N(t,r))?s=s.filter((t=>t!==r)):a=e,r=R(r)}return e.set(t,s),s}(s,this._c):[].concat(a),n],g=o[0],l=o.reduce(((i,a)=>{const n=X(s,a,r);return i.top=e(n.top,i.top),i.right=t(n.right,i.right),i.bottom=t(n.bottom,i.bottom),i.left=e(n.left,i.left),i}),X(s,g,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:j,getElementRects:async function(t){const e=this.getOffsetParent||j,i=this.getDimensions,s=await i(t.floating);return{reference:z(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:i}=Y(t);return{width:e,height:i}},getScale:_,isElement:S,isRTL:function(t){return"rtl"===E(t).direction}},Q=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var i,s;const{x:a,y:n,placement:r,middlewareData:h}=e,I=await async function(t,e){const{placement:i,platform:s,elements:a}=t,n=await(null==s.isRTL?void 0:s.isRTL(a.floating)),r=g(i),h=l(i),I="y"===c(i),C=["left","top"].includes(r)?-1:1,d=n&&I?-1:1,p=o(e,t);let{mainAxis:m,crossAxis:u,alignmentAxis:A}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return h&&"number"==typeof A&&(u="end"===h?-1*A:A),I?{x:u*d,y:m*C}:{x:m*C,y:u*d}}(e,t);return r===(null==(i=h.offset)?void 0:i.placement)&&null!=(s=h.arrow)&&s.alignmentOffset?{}:{x:a+I.x,y:n+I.y,data:{...I,placement:r}}}}},q=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:s,placement:a}=e,{mainAxis:n=!0,crossAxis:l=!1,limiter:I={fn:t=>{let{x:e,y:i}=t;return{x:e,y:i}}},...C}=o(t,e),d={x:i,y:s},p=await A(e,C),m=c(g(a)),u=h(m);let f=d[u],y=d[m];if(n){const t="y"===u?"bottom":"right";f=r(f+p["y"===u?"top":"left"],f,f-p[t])}if(l){const t="y"===m?"bottom":"right";y=r(y+p["y"===m?"top":"left"],y,y-p[t])}const b=I.fn({...e,[u]:f,[m]:y});return{...b,data:{x:b.x-i,y:b.y-s}}}}},$=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var i,s;const{placement:a,middlewareData:n,rects:r,initialPlacement:h,platform:m,elements:u}=e,{mainAxis:f=!0,crossAxis:y=!0,fallbackPlacements:b,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:G=!0,...B}=o(t,e);if(null!=(i=n.arrow)&&i.alignmentOffset)return{};const w=g(a),Z=c(h),k=g(h)===h,P=await(null==m.isRTL?void 0:m.isRTL(u.floating)),W=b||(k||!G?[p(h)]:function(t){const e=p(t);return[d(t),e,d(e)]}(h)),x="none"!==S;!b&&x&&W.push(...function(t,e,i,s){const a=l(t);let n=function(t,e,i){const s=["left","right"],a=["right","left"],n=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return i?e?a:s:e?s:a;case"left":case"right":return e?n:r;default:return[]}}(g(t),"start"===i,s);return a&&(n=n.map((t=>t+"-"+a)),e&&(n=n.concat(n.map(d)))),n}(h,G,S,P));const E=[h,...W],V=await A(e,B),R=[];let F=(null==(s=n.flip)?void 0:s.overflows)||[];if(f&&R.push(V[w]),y){const t=function(t,e,i){void 0===i&&(i=!1);const s=l(t),a=C(t),n=I(a);let r="x"===a?s===(i?"end":"start")?"right":"left":"start"===s?"bottom":"top";return e.reference[n]>e.floating[n]&&(r=p(r)),[r,p(r)]}(a,r,P);R.push(V[t[0]],V[t[1]])}if(F=[...F,{placement:a,overflows:R}],!R.every((t=>t<=0))){var K,Y;const t=((null==(K=n.flip)?void 0:K.index)||0)+1,e=E[t];if(e)return{data:{index:t,overflows:F},reset:{placement:e}};let i=null==(Y=F.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:Y.placement;if(!i)switch(v){case"bestFit":{var T;const t=null==(T=F.filter((t=>{if(x){const e=c(t.placement);return e===Z||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:T[0];t&&(i=t);break}case"initialPlacement":i=h}if(a!==i)return{reset:{placement:i}}}return{}}}},tt=document.querySelector(".sub-menu"),et=document.querySelector(".menu__item-catalog"),it=document.querySelector(".sub-menu-service");function st(t,e){var i;e.style.display="block",((t,e,i)=>{const s=new Map,a={platform:U,...i},n={...a.platform,_c:s};return(async(t,e,i)=>{const{placement:s="bottom",strategy:a="absolute",middleware:n=[],platform:r}=i,o=n.filter(Boolean),g=await(null==r.isRTL?void 0:r.isRTL(e));let l=await r.getElementRects({reference:t,floating:e,strategy:a}),{x:h,y:I}=u(l,s,g),c=s,C={},d=0;for(let i=0;i<o.length;i++){const{name:n,fn:p}=o[i],{x:m,y:A,data:f,reset:y}=await p({x:h,y:I,initialPlacement:s,placement:c,strategy:a,middlewareData:C,rects:l,platform:r,elements:{reference:t,floating:e}});h=null!=m?m:h,I=null!=A?A:I,C={...C,[n]:{...C[n],...f}},y&&d<=50&&(d++,"object"==typeof y&&(y.placement&&(c=y.placement),y.rects&&(l=!0===y.rects?await r.getElementRects({reference:t,floating:e,strategy:a}):y.rects),({x:h,y:I}=u(l,c,g))),i=-1)}return{x:h,y:I,placement:c,strategy:a,middlewareData:C}})(t,e,{...a,platform:n})})(t,i=e,{placement:"bottom-start",middleware:[Q(0),$(),q({padding:5})]}).then((({x:t,y:e})=>{Object.assign(i.style,{left:`${t}px`,top:`${e}px`})}))}function at(t){t.style.display=""}const nt=(t,e)=>{[["mouseenter",()=>{st(t,e)}],["mouseleave",()=>{at(e)}],["focus",()=>{st(t,e)}],["blur",()=>{at(e)}]].forEach((([e,i])=>{t.addEventListener(e,i)}))};nt(document.querySelector(".menu__item-service"),it),nt(et,tt);var rt=__webpack_require__(248),ot=__webpack_require__.n(rt);function gt(t){return JSON.parse(JSON.stringify(t))}function lt(t){return null==t}function ht(t){return null!==t&&"object"==typeof t}function It(t,e,i){const s=Array.isArray(e)?e:e.split(".");let a=t;for(const t of s){if(!ht(a))return i;if(!(t in a))return i;a=a[t]}return void 0===a?i:a}function ct(t,e,i){let s=t;const a=Array.isArray(e)?e:e.split(".");for(let t=0;t<a.length;++t)t===a.length-1?s[a[t]]=i:s=s[a[t]]}const Ct={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function dt(t){return t.startsWith("#")?4===t.length?`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`:t:Ct[t.toLowerCase()]||"#000000"}function pt(t){if(t&&"string"==typeof t)return t.split(",").filter((t=>t)).map((t=>t.split(":"))).filter((t=>2==t.length)).reduce(((t,e)=>(t[e[0].toLowerCase()]=dt(e[1]),t)),{})}function mt(t){return"light"===t||1===t||"1"===t?1:"regular"===t||2===t||"2"===t?2:"bold"===t||3===t||"3"===t?3:"number"==typeof t||"string"==typeof t?+t:void 0}function ut(t){if("string"==typeof t)return t}function At(t){const e=t.toString(16);return 1==e.length?"0"+e:e}function ft(t){return Math.round(t/255*1e3)/1e3}function yt(t){return Math.round(255*t)}function bt(t){const{r:e,g:i,b:s}=function(t){let e=parseInt("#"!=t[0]?t:t.substring(1),16);return{r:e>>16&255,g:e>>8&255,b:255&e}}(t);return[ft(e),ft(i),ft(s)]}function vt(t){return function(t){return"#"+At(t.r)+At(t.g)+At(t.b)}({r:yt(t[0]),g:yt(t[1]),b:yt(t[2])})}function St(t,{lottieInstance:e}={}){const i=[];return t&&t.layers?(t.layers.forEach(((t,s)=>{t.nm&&t.ef&&t.ef.forEach(((t,a)=>{const n=t?.ef?.[0]?.v?.k;if(void 0===n)return;let r,o;if(r=e?`renderer.elements.${s}.effectsManager.effectElements.${a}.effectElements.0.p.v`:`layers.${s}.ef.${a}.ef.0.v.k`,"ADBE Color Control"===t.mn?o="color":"ADBE Slider Control"===t.mn?o="slider":"ADBE Point Control"===t.mn?o="point":"ADBE Checkbox Control"===t.mn?o="checkbox":t.mn.startsWith("Pseudo/")&&(o="feature"),!o)return;const g=t.nm.toLowerCase();i.push({name:g,path:r,value:n,type:o})}))})),i):i}function Gt(t,e){for(const i of e)ct(t,i.path,i.value)}function Bt(t,e,i){for(const s of e)"color"===s.type?"object"==typeof i&&"r"in i&&"g"in i&&"b"in i?ct(t,s.path,[ft(i.r),ft(i.g),ft(i.b)]):Array.isArray(i)?ct(t,s.path,i):"string"==typeof i&&ct(t,s.path,bt(dt(i))):"point"===s.type?"object"==typeof i&&"x"in i&&"y"in i?(ct(t,s.path+".0",i.x),ct(t,s.path+".1",i.y)):Array.isArray(i)&&(ct(t,s.path+".0",i[0]),ct(t,s.path+".1",i[1])):ct(t,s.path,i)}const wt=["click","mouseenter","mouseleave"];let Zt;const kt=["colors","src","icon","state","trigger","loading","target","stroke"];class Pt extends HTMLElement{static _iconLoader;static _playerFactory;static _definedTriggers=new Map;static get version(){return"1.6.0"}static get observedAttributes(){return kt}static setIconLoader(t){Pt._iconLoader=t}static setPlayerFactory(t){Pt._playerFactory=t}static defineTrigger(t,e){Pt._definedTriggers.set(t,e)}_root;_isConnected=!1;_isReady=!1;_assignedIconData;_loadedIconData;_triggerInstance;_playerInstance;delayedLoading=null;attributeChangedCallback(t,e,i){this[`${t}Changed`].call(this)}connectedCallback(){if(this._root||this.createElements(),"lazy"===this.loading){let t;this.delayedLoading=e=>{t.unobserve(this),t=void 0,this.delayedLoading=null,e||this.createPlayer()},t=new IntersectionObserver(((e,i)=>{e.forEach((e=>{e.isIntersecting&&t&&this.delayedLoading&&this.delayedLoading()}))})),t.observe(this)}else if("interaction"===this.loading){let t;this.delayedLoading=s=>{for(const t of wt)(e||this).removeEventListener(t,i);this.delayedLoading=null,s||this.createPlayer().then((()=>{t&&(e||this).dispatchEvent(new Event(t))}))};const e=this.target?this.closest(this.target):null;let i=e=>{const i=e?.type;t?t=i:(t=i,this.delayedLoading&&this.delayedLoading())};i=i.bind(this);for(const t of wt)(e||this).addEventListener(t,i)}else if("delay"===this.loading){this.delayedLoading=t=>{this.delayedLoading=null,t||this.createPlayer()};const t=this.hasAttribute("delay")?+this.getAttribute("delay"):0;setTimeout((()=>{this.delayedLoading&&this.delayedLoading()}),t)}else this.createPlayer();this._isConnected=!0}disconnectedCallback(){this.delayedLoading&&this.delayedLoading(!0),this.destroyPlayer(),this._isConnected=!1}createElements(){this._root=this.attachShadow({mode:"open"}),Zt||(Zt=new CSSStyleSheet,Zt.replaceSync("\n    :host {\n        position: relative;\n        display: inline-block;\n        width: 32px;\n        height: 32px;\n        transform: translate3d(0px, 0px, 0px);\n    }\n\n    :host(.current-color) svg path[fill] {\n        fill: currentColor;\n    }\n\n    :host(.current-color) svg path[stroke] {\n        stroke: currentColor;\n    }\n\n    svg {\n        position: absolute;\n        pointer-events: none;\n        display: block;\n        transform: unset!important;\n    }\n\n    ::slotted(*) {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n    }\n\n    .body.ready ::slotted(*) {\n        display: none;\n    }\n")),this._root.adoptedStyleSheets=[Zt];const t=document.createElement("div");t.classList.add("body"),this._root.appendChild(t);const e=document.createElement("slot");t.appendChild(e)}async createPlayer(){if(!Pt._playerFactory)throw new Error("Missing player loader!");if(this.delayedLoading)return;const t=await this.loadIconData();if(!t)return;this._playerInstance=Pt._playerFactory(this.animationContainer,t,{state:ut(this.state),stroke:mt(this.stroke),colors:pt(this.colors),scale:parseFloat(""+this.getAttribute("scale")||""),axisX:parseFloat(""+this.getAttribute("axis-x")||""),axisY:parseFloat(""+this.getAttribute("axis-y")||"")});const e=Object.entries(this._playerInstance.colors||{});if(e.length){let t="";for(const[i,s]of e)t+=`\n                    :host(:not(.current-color)) svg path[fill].${i} {\n                        fill: var(--lord-icon-${i}, var(--lord-icon-${i}-base, #000));\n                    }\n        \n                    :host(:not(.current-color)) svg path[stroke].${i} {\n                        stroke: var(--lord-icon-${i}, var(--lord-icon-${i}-base, #000));\n                    }\n                `;const i=document.createElement("style");i.innerHTML=t,this.animationContainer.appendChild(i)}this._playerInstance.connect(),this._playerInstance.addEventListener("ready",(()=>{this._triggerInstance&&this._triggerInstance.onReady&&this._triggerInstance.onReady()})),this._playerInstance.addEventListener("refresh",(()=>{this.refresh(),this._triggerInstance&&this._triggerInstance.onRefresh&&this._triggerInstance.onRefresh()})),this._playerInstance.addEventListener("complete",(()=>{this._triggerInstance&&this._triggerInstance.onComplete&&this._triggerInstance.onComplete()})),this._playerInstance.addEventListener("frame",(()=>{this._triggerInstance&&this._triggerInstance.onFrame&&this._triggerInstance.onFrame()})),this.refresh(),this.triggerChanged(),await new Promise(((t,e)=>{this._playerInstance.isReady?t():this._playerInstance.addEventListener("ready",t)})),this.animationContainer.classList.add("ready"),this._isReady=!0,this.dispatchEvent(new CustomEvent("ready"))}destroyPlayer(){this._isReady=!1,this._loadedIconData=void 0,this._triggerInstance&&(this._triggerInstance.onDisconnected&&this._triggerInstance.onDisconnected(),this._triggerInstance=void 0),this._playerInstance&&(this._playerInstance.disconnect(),this._playerInstance=void 0,this.animationContainer.classList.remove("ready"))}async loadIconData(){let t=this.iconData;if(!t)if(this.icon&&Pt._iconLoader)this._loadedIconData=t=await Pt._iconLoader(this.icon);else if(this.src){const e=await fetch(this.src);this._loadedIconData=t=await e.json()}return t}refresh(){this.movePaletteToCssVariables()}movePaletteToCssVariables(){for(const[t,e]of Object.entries(this._playerInstance.colors||{}))e?this.animationContainer.style.setProperty(`--lord-icon-${t}-base`,e):this.animationContainer.style.removeProperty(`--lord-icon-${t}-base`)}targetChanged(){this.triggerChanged()}loadingChanged(){}triggerChanged(){if(this._triggerInstance&&(this._triggerInstance.onDisconnected&&this._triggerInstance.onDisconnected(),this._triggerInstance=void 0,this._playerInstance?.pause()),!this.trigger||!this._playerInstance)return;const t=Pt._definedTriggers.get(this.trigger);if(!t)throw new Error("Can't use unregistered trigger!");const e=this.target?this.closest(this.target):null;this._triggerInstance=new t(this._playerInstance,this,e||this),this._triggerInstance.onConnected&&this._triggerInstance.onConnected(),this._playerInstance.isReady&&this._triggerInstance.onReady&&this._triggerInstance.onReady()}colorsChanged(){this._playerInstance&&(this._playerInstance.colors=pt(this.colors)||null)}strokeChanged(){this._playerInstance&&(this._playerInstance.stroke=mt(this.stroke)||null)}stateChanged(){this._playerInstance&&(this._playerInstance.state=this.state)}iconChanged(){this._isConnected&&(this.destroyPlayer(),this.createPlayer())}srcChanged(){this._isConnected&&(this.destroyPlayer(),this.createPlayer())}set icon(t){const e=this._assignedIconData;t&&ht(t)?(this._assignedIconData=t,e!==t&&(this.hasAttribute("icon")?this.removeAttribute("icon"):this.iconChanged())):(this._assignedIconData=void 0,t&&"string"==typeof t?this.setAttribute("icon",t):this.hasAttribute("icon")?this.removeAttribute("icon"):e&&this.iconChanged())}get icon(){return this._assignedIconData||this.getAttribute("icon")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get src(){return this.getAttribute("src")}set state(t){t?this.setAttribute("state",t):this.removeAttribute("state")}get state(){return this.getAttribute("state")}set colors(t){t?this.setAttribute("colors",t):this.removeAttribute("colors")}get colors(){return this.getAttribute("colors")}set trigger(t){t?this.setAttribute("trigger",t):this.removeAttribute("trigger")}get trigger(){return this.getAttribute("trigger")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get loading(){if(this.getAttribute("loading")){const t=this.getAttribute("loading").toLowerCase();if("lazy"===t)return"lazy";if("interaction"===t)return"interaction";if("delay"===t)return"delay"}return null}set target(t){t?this.setAttribute("target",t):this.removeAttribute("target")}get target(){return this.getAttribute("target")}set stroke(t){t?this.setAttribute("stroke",t):this.removeAttribute("stroke")}get stroke(){return this.hasAttribute("stroke")?this.getAttribute("stroke"):null}set iconData(t){t!==this._assignedIconData&&(this._assignedIconData=t,this.iconChanged())}get iconData(){return this._assignedIconData||this._loadedIconData}get isReady(){return this._isReady}get playerInstance(){return this._playerInstance}get triggerInstance(){return this._triggerInstance}get animationContainer(){return this._root.lastElementChild}}const Wt={renderer:"svg",loop:!1,autoplay:!1,rendererSettings:{preserveAspectRatio:"xMidYMid meet",progressiveLoad:!0,hideOnTransparent:!0}};function xt(){return new Proxy(this,{set:(t,e,i,s)=>("string"==typeof e&&(i?Bt(this.lottie,this.rawProperties.filter((t=>"color"===t.type&&t.name===e)),i):Gt(this.lottie,this.rawProperties.filter((t=>"color"===t.type&&t.name===e))),t.refresh()),!0),get:(t,e,i)=>{for(const i of t.rawProperties)if("color"==i.type&&"string"==typeof e&&e==i.name){const t=It(this.lottie,i.path);if(t)return vt(t)}},deleteProperty:(t,e)=>("string"==typeof e&&(Gt(this.lottie,this.rawProperties.filter((t=>"color"===t.type&&t.name===e))),t.refresh()),!0),ownKeys:t=>t.rawProperties.filter((t=>"color"==t.type)).map((t=>t.name)),has:(t,e)=>{for(const i of t.rawProperties)if("color"==i.type&&"string"==typeof e&&e==i.name)return!0;return!1},getOwnPropertyDescriptor:t=>({enumerable:!0,configurable:!0})})}class Et{_animationLoader;_container;_iconData;_initial;_options;_lottie;_isReady=!1;_colorsProxy;_direction=1;_speed=1;_rawProperties;_eventCallbacks={};_state;_states;constructor(t,e,i,s,a){if(this._animationLoader=t,this._container=e,this._iconData=i,this._initial=s||{},this._options=a||Wt,this._states=(i.markers||[]).map((t=>{const[e,i]=t.cm.split(":"),s={time:t.tm,duration:t.dr,name:i||e,default:!(!i||!e.includes("default"))};return(s.name===this._initial.state||s.default&&lt(this._initial.state))&&(this._state=s),s})).filter((t=>t.duration>0)),this._states.length&&(this._initial.stroke&&![1,2,3,"light","regular","bold"].includes(this._initial.stroke)&&delete this._initial.stroke,this._initial.state&&!this._state&&(this._state=this._states.filter((t=>t.default))[0])),!this._states.length){this._iconData=gt(this._iconData);const t=St(this._iconData,{lottieInstance:!1});if(t&&this._initial.state){const e=`state-${this._initial.state.toLowerCase()}`;Bt(this._iconData,t.filter((t=>t.name.startsWith("state-"))),0),Bt(this._iconData,t.filter((t=>t.name===e)),1)}if(t&&this._initial.stroke){const e=t.filter((t=>"stroke"===t.name))[0];if(e){const t=e.value/50,i=this._initial.stroke*t;ct(this._iconData,e.path,i)}}if(t&&this._initial.scale){const e=t.filter((t=>"scale"===t.name))[0];if(e){const t=e.value/50,i=this._initial.scale*t;ct(this._iconData,e.path,i)}}if(t&&this._initial.axisX&&this._initial.axisY){const e=t.filter((t=>"axis"===t.name))[0];if(e){const t=(e.value[0]+e.value[1])/2/50;ct(this._iconData,e.path+".0",this._initial.axisX*t),ct(this._iconData,e.path+".1",this._initial.axisY*t)}}}}connect(){if(this._lottie)throw new Error("Already connected player!");const t={},e={};if(this._state&&(e.initialSegment=[this._state.time,this._state.time+this._state.duration+1]),this._states.length){const e=this._states[0],i=this._states[this._states.length-1];t.ip=e.time,t.op=i.time+i.duration+1}this._lottie=this._animationLoader({...this._options,...e,container:this._container,animationData:Object.assign(gt(this._iconData),t)}),this._initial.colors&&(this.colors=this._initial.colors),this._initial.stroke&&(this.stroke=this._initial.stroke),this._lottie.addEventListener("complete",(t=>{this.triggerEvent("complete")})),this._lottie.addEventListener("loopComplete",(()=>{this.triggerEvent("complete")})),this._lottie.addEventListener("enterFrame",(t=>{this.triggerEvent("frame")})),this._lottie.isLoaded?(this._isReady=!0,this.triggerEvent("ready")):this._lottie.addEventListener("config_ready",(()=>{this._isReady=!0,this.triggerEvent("ready")}))}disconnect(){if(!this._lottie)throw new Error("Not connected player!");this._isReady=!1,this._lottie.destroy(),this._lottie=void 0,this._colorsProxy=void 0,this._rawProperties=void 0}addEventListener(t,e){return this._eventCallbacks[t]||(this._eventCallbacks[t]=[]),this._eventCallbacks[t].push(e),()=>{this.removeEventListener(t,e)}}removeEventListener(t,e){if(e){if(this._eventCallbacks[t]){let i=0,s=this._eventCallbacks[t].length;for(;i<s;)this._eventCallbacks[t][i]===e&&(this._eventCallbacks[t].splice(i,1),i-=1,s-=1),i+=1;this._eventCallbacks[t].length||(this._eventCallbacks[t]=null)}}else this._eventCallbacks[t]=null}triggerEvent(t,e){if(this._eventCallbacks[t]){const i=this._eventCallbacks[t];for(let t=0;t<i.length;t+=1)i[t](e)}}refresh(){this._lottie?.renderer.renderFrame(null),this.triggerEvent("refresh")}play(){this._lottie.setDirection(this._direction),this._lottie.play()}playFromBeginning(){this._lottie.setDirection(1),this._state?this._lottie.playSegments([this._state.time,this._state.time+this._state.duration+1],!0):this._lottie.goToAndPlay(0)}pause(){this._lottie.pause()}stop(){this._lottie.stop()}goToFrame(t){this._lottie.goToAndStop(t,!0)}goToFirstFrame(){this.goToFrame(0)}goToLastFrame(){this.goToFrame(Math.max(0,this.frames))}set properties(t){this.colors=t.colors||null,this.stroke=t.stroke||null,this.state=t.state||null}get properties(){const t={};return this.rawProperties.filter((t=>"color"===t.type)).length&&(t.colors={...this.colors}),this.rawProperties.filter((t=>"stroke"===t.name||"stroke-layers"===t.name)).length&&(t.stroke=this.stroke),this._states.length&&(t.state=this.state),t}set colors(t){if(Gt(this._lottie,this.rawProperties.filter((t=>"color"===t.type))),t)for(const[e,i]of Object.entries(t))Bt(this._lottie,this.rawProperties.filter((t=>"color"===t.type&&t.name===e)),i);this.refresh()}get colors(){return this._colorsProxy||(this._colorsProxy=xt.call(this)),this._colorsProxy}set stroke(t){Gt(this._lottie,this.rawProperties.filter((t=>"stroke"===t.name||"stroke-layers"===t.name)));const e=mt(t);e&&Bt(this._lottie,this.rawProperties.filter((t=>"stroke"===t.name||"stroke-layers"===t.name)),e),this.refresh()}get stroke(){const t=this.rawProperties.filter((t=>"stroke"===t.name||"stroke-layers"===t.name))[0];return t&&mt(+It(this._lottie,t.path))||null}set state(t){if(t===this.state)return;const e=this.isPlaying;this._state=void 0,lt(t)?this._state=this._states.filter((t=>t.default))[0]:t&&(this._state=this._states.filter((e=>e.name===t))[0],this._state||(this._state=this._states.filter((t=>t.default))[0])),this._state?this._lottie?.setSegment(this._state.time,this._state.time+this._state.duration+1):this._lottie.resetSegments(!0),this.goToFirstFrame(),e&&(this.pause(),this.play())}get state(){return this._state?this._state.name:""}set speed(t){this._speed=t,this._lottie?.setSpeed(t)}get speed(){return this._speed}set direction(t){this._direction=t,this._lottie.setDirection(t)}get direction(){return this._direction}set loop(t){this._lottie.loop=t}get loop(){return!!this._lottie.loop}set frame(t){this.goToFrame(Math.max(0,Math.min(this.frames,t)))}get frame(){return this._lottie.currentFrame}get states(){return this._states}get isPlaying(){return!this._lottie.isPaused}get isReady(){return this._isReady}get frames(){return this._lottie.getDuration(!0)-1}get duration(){return this._lottie.getDuration(!1)}get lottie(){return this._lottie}get rawProperties(){return this._rawProperties||(this._rawProperties=St(this._iconData,{lottieInstance:!0}),!this._states.length&&this._rawProperties&&(this._rawProperties=this._rawProperties.filter((t=>"scale"!==t.name&&"axis"!==t.name&&"stroke"!==t.name&&!t.name.startsWith("state-"))))),this._rawProperties||[]}}class Vt{player;element;targetElement;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i,this.onHover=this.onHover.bind(this)}onConnected(){this.targetElement.addEventListener("mouseenter",this.onHover)}onDisconnected(){this.targetElement.removeEventListener("mouseenter",this.onHover),this.player.direction=1}onComplete(){this.player.direction=-1,this.player.play()}onHover(){this.player.direction=1,this.player.play()}}const Rt=[{name:"mousedown"},{name:"touchstart",options:{passive:!0}}];class Ft{player;element;targetElement;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i,this.onClick=this.onClick.bind(this)}onConnected(){for(const t of Rt)this.targetElement.addEventListener(t.name,this.onClick,t.options)}onDisconnected(){for(const t of Rt)this.targetElement.removeEventListener(t.name,this.onClick)}onClick(){this.player.isPlaying||this.player.playFromBeginning()}}class Kt{player;element;targetElement;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i,this.onHover=this.onHover.bind(this)}onConnected(){this.targetElement.addEventListener("mouseenter",this.onHover)}onDisconnected(){this.targetElement.removeEventListener("mouseenter",this.onHover)}onHover(){this.player.isPlaying||this.player.playFromBeginning()}}class Yt{player;element;targetElement;playTimeout=null;played=!1;intersectionObserver;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i}onConnected(){if(this.loading)this.play();else{const t=(t,e)=>{t.forEach((t=>{t.isIntersecting&&(this.play(),this.resetIntersectionObserver())}))};this.intersectionObserver=new IntersectionObserver(t),this.intersectionObserver.observe(this.element)}}onDisconnected(){this.played=!1,this.resetIntersectionObserver(),this.resetPlayDelayTimer()}play(){this.played||(this.played=!0,this.resetPlayDelayTimer(),this.delay>0?this.playTimeout=setTimeout((()=>{this.player.playFromBeginning(),this.playTimeout=null}),this.delay):this.player.playFromBeginning())}resetIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.unobserve(this.element),this.intersectionObserver=void 0)}resetPlayDelayTimer(){this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null)}get delay(){const t=this.element.hasAttribute("delay")?+(this.element.getAttribute("delay")||0):0;return Math.max(t,0)}get loading(){return this.element.hasAttribute("loading")}}class Tt{player;element;targetElement;playTimeout=null;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i}onReady(){this.play()}onComplete(){this.play()}onDisconnected(){this.resetPlayDelayTimer()}play(){this.resetPlayDelayTimer(),this.delay>0?this.playTimeout=setTimeout((()=>{this.player.playFromBeginning()}),this.delay):this.player.playFromBeginning()}resetPlayDelayTimer(){this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null)}get delay(){const t=this.element.hasAttribute("delay")?+(this.element.getAttribute("delay")||0):0;return Math.max(t,0)}}class _t{player;element;targetElement;playTimeout=null;mouseIn=!1;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}onConnected(){this.targetElement.addEventListener("mouseenter",this.onMouseEnter),this.targetElement.addEventListener("mouseleave",this.onMouseLeave)}onDisconnected(){this.targetElement.removeEventListener("mouseenter",this.onMouseEnter),this.targetElement.removeEventListener("mouseleave",this.onMouseLeave),this.resetPlayDelayTimer()}onMouseEnter(){this.mouseIn=!0,this.player.isPlaying||this.play()}onMouseLeave(){this.mouseIn=!1,this.resetPlayDelayTimer()}onComplete(){this.play()}play(){this.resetPlayDelayTimer(),this.mouseIn&&(this.delay>0?this.playTimeout=setTimeout((()=>{this.player.playFromBeginning()}),this.delay):this.player.playFromBeginning())}resetPlayDelayTimer(){this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null)}get delay(){const t=this.element.hasAttribute("delay")?+(this.element.getAttribute("delay")||0):0;return Math.max(t,0)}}class Mt{player;element;targetElement;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}onConnected(){this.targetElement.addEventListener("mouseenter",this.onMouseEnter),this.targetElement.addEventListener("mouseleave",this.onMouseLeave)}onDisconnected(){this.targetElement.removeEventListener("mouseenter",this.onMouseEnter),this.targetElement.removeEventListener("mouseleave",this.onMouseLeave),this.player.direction=1}onMouseEnter(){this.player.direction=1,this.player.play()}onMouseLeave(){this.player.direction=-1,this.player.play()}}const Dt=/^\d*(\.\d+)?$/,Lt={attributes:!0,childList:!1,subtree:!1};class Ht{player;element;targetElement;sequenceIndex=0;frameState=null;frameDelayFirst=null;frameDelayLast=null;timer;observer;constructor(t,e,i){this.player=t,this.element=e,this.targetElement=i,this.observer=new MutationObserver(((t,e)=>{for(const e of t)"attributes"===e.type&&"sequence"===e.attributeName&&(this.reset(),this.step())}))}onReady(){this.step()}onComplete(){this.timer=setTimeout((()=>{this.timer=null,this.frameDelayLast=null,this.step()}),this.frameDelayLast||0)}onConnected(){this.observer.observe(this.element,Lt)}onDisconnected(){this.observer.disconnect(),this.timer&&(clearTimeout(this.timer),this.timer=null)}reset(){this.player.pause(),this.sequenceIndex=0,this.frameState=this.frameDelayFirst=this.frameDelayLast=null,this.timer&&(clearTimeout(this.timer),this.timer=null)}takeStep(){const t=this.sequence.split(","),e=t[this.sequenceIndex];this.sequenceIndex++,this.sequenceIndex>=t.length&&(this.sequenceIndex=0);const[i,...s]=e.split(":");return{action:i,params:s}}handleStep(t,e){if("play"===t)this.frameState&&(this.player.state=this.frameState,this.frameState=null),e.includes("reverse")?(this.player.goToLastFrame(),this.player.direction=-1):(this.player.goToFirstFrame(),this.player.direction=1),this.timer=setTimeout((()=>{this.timer=null,this.frameDelayFirst=null,this.player.play()}),this.frameDelayFirst||0);else if("frame"===t){let t=0;e.length&&e[0].match(Dt)&&(t=Math.max(0,Math.min(this.player.frames,+e[0]))),this.player.frame=t,this.timer=setTimeout((()=>{this.timer=null,this.frameDelayFirst=null,this.step()}),this.frameDelayFirst||0)}else if("state"===t)this.frameState=e[0],this.step();else if("delay"===t){let t=null;for(const i of e)i&&i.match(Dt)&&(t=+i);t&&t>0&&(e.includes("first")&&e.includes("last")?(this.frameDelayFirst=t,this.frameDelayLast=t):e.includes("first")?this.frameDelayFirst=t:e.includes("last")?this.frameDelayLast=t:this.frameDelayFirst=t),this.step()}else if("idle"!==t)throw new Error(`Invalid sequence action: ${t}`)}step(){const{action:t,params:e}=this.takeStep();t&&this.handleStep(t,e)}get sequence(){return this.element.getAttribute("sequence")||""}}var Xt=Object.defineProperty,Nt=(t,e,i)=>((t,e,i)=>e in t?Xt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),zt=class{requestAnimationFrame(t){return requestAnimationFrame(t)}cancelAnimationFrame(t){cancelAnimationFrame(t)}},Ot=class{constructor(){Nt(this,"_lastHandleId",0),Nt(this,"_lastImmediate",null)}requestAnimationFrame(t){return this._lastHandleId>=Number.MAX_SAFE_INTEGER&&(this._lastHandleId=0),this._lastHandleId+=1,this._lastImmediate=setImmediate((()=>{t(Date.now())})),this._lastHandleId}cancelAnimationFrame(t){this._lastImmediate&&clearImmediate(this._lastImmediate)}},Jt=class{constructor(){Nt(this,"_strategy"),this._strategy="function"==typeof requestAnimationFrame?new zt:new Ot}requestAnimationFrame(t){return this._strategy.requestAnimationFrame(t)}cancelAnimationFrame(t){this._strategy.cancelAnimationFrame(t)}},jt=typeof window<"u"&&typeof window.document<"u",Ut=new Uint8Array([80,75,3,4]),Qt=["v","ip","op","layers","fr","w","h"],qt="0.30.3",$t="@lottiefiles/dotlottie-web",te=(()=>{var t=typeof document<"u"?document.currentScript?.src:void 0;return function(e={}){var i,s,a=e,n=new Promise(((t,e)=>{i=t,s=e})),r=Object.assign({},a),o="./this.program",g="";typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g=g.startsWith("blob:")?"":g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1);var l,h=a.print||console.log.bind(console),I=a.printErr||console.error.bind(console);Object.assign(a,r),r=null,a.thisProgram&&(o=a.thisProgram),a.wasmBinary&&(l=a.wasmBinary);var c,C,d,p,m,u,A,f,y,b=!1;function v(){var t=c.buffer;a.HEAP8=C=new Int8Array(t),a.HEAP16=p=new Int16Array(t),a.HEAPU8=d=new Uint8Array(t),a.HEAPU16=m=new Uint16Array(t),a.HEAP32=u=new Int32Array(t),a.HEAPU32=A=new Uint32Array(t),a.HEAPF32=f=new Float32Array(t),a.HEAPF64=y=new Float64Array(t)}var S=[],G=[],B=[];function w(){var t=a.preRun.shift();S.unshift(t)}var Z=0,k=null;function P(t){throw a.onAbort?.(t),I(t="Aborted("+t+")"),b=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}var W,x=t=>t.startsWith("data:application/octet-stream;base64,");if(!x(W="DotLottiePlayer.wasm")){var E=W;W=a.locateFile?a.locateFile(E,g):g+E}function V(t){if(t==W&&l)return new Uint8Array(l);throw"both async and sync fetching of the wasm failed"}function R(t,e,i){return function(t){return l||"function"!=typeof fetch?Promise.resolve().then((()=>V(t))):fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw`failed to load wasm binary file at '${t}'`;return e.arrayBuffer()})).catch((()=>V(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then(i,(t=>{I(`failed to asynchronously prepare wasm: ${t}`),P(t)}))}var F=t=>{for(;0<t.length;)t.shift()(a)},K=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Y=(t,e,i)=>{var s=e+i;for(i=e;t[i]&&!(i>=s);)++i;if(16<i-e&&t.buffer&&K)return K.decode(t.subarray(e,i));for(s="";e<i;){var a=t[e++];if(128&a){var n=63&t[e++];if(192==(224&a))s+=String.fromCharCode((31&a)<<6|n);else{var r=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|n<<6|r:(7&a)<<18|n<<12|r<<6|63&t[e++])?s+=String.fromCharCode(a):(a-=65536,s+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else s+=String.fromCharCode(a)}return s};class T{constructor(t){this.ya=t-24}}var _=t=>{for(var e=0,i=0;i<t.length;++i){var s=t.charCodeAt(i);127>=s?e++:2047>=s?e+=2:55296<=s&&57343>=s?(e+=4,++i):e+=3}return e},M=(t,e,i,s)=>{if(0<s){s=i+s-1;for(var a=0;a<t.length;++a){var n=t.charCodeAt(a);if(55296<=n&&57343>=n&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++a)),127>=n){if(i>=s)break;e[i++]=n}else{if(2047>=n){if(i+1>=s)break;e[i++]=192|n>>6}else{if(65535>=n){if(i+2>=s)break;e[i++]=224|n>>12}else{if(i+3>=s)break;e[i++]=240|n>>18,e[i++]=128|n>>12&63}e[i++]=128|n>>6&63}e[i++]=128|63&n}}e[i]=0}},D={},L=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function H(t){return this.fromWireType(A[t>>2])}var X,N,z,O={},J={},j={},U=(t,e,i)=>{function s(e){if((e=i(e)).length!==t.length)throw new X("Mismatched type converter count");for(var s=0;s<t.length;++s)q(t[s],e[s])}t.forEach((function(t){j[t]=e}));var a=Array(e.length),n=[],r=0;e.forEach(((t,e)=>{J.hasOwnProperty(t)?a[e]=J[t]:(n.push(t),O.hasOwnProperty(t)||(O[t]=[]),O[t].push((()=>{a[e]=J[t],++r===n.length&&s(a)})))})),0===n.length&&s(a)},Q=t=>{for(var e="";d[t];)e+=N[d[t++]];return e};function q(t,e,i={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(t,e,i={}){var s=e.name;if(!t)throw new z(`type "${s}" must have a positive integer typeid pointer`);if(J.hasOwnProperty(t)){if(i.ib)return;throw new z(`Cannot register type '${s}' twice`)}J[t]=e,delete j[t],O.hasOwnProperty(t)&&(e=O[t],delete O[t],e.forEach((t=>t())))}(t,e,i)}var $,tt=t=>{throw new z(t.ma.za.xa.name+" instance already deleted")},et=!1,it=()=>{},st=(t,e,i)=>e===i?t:void 0===i.Ca||null===(t=st(t,e,i.Ca))?null:i.ab(t),at={},nt=[],rt=()=>{for(;nt.length;){var t=nt.pop();t.ma.Ka=!1,t.delete()}},ot={},gt=(t,e)=>{if(!e.za||!e.ya)throw new X("makeClassHandle requires ptr and ptrType");if(!!e.Da!=!!e.Aa)throw new X("Both smartPtrType and smartPtr must be specified");return e.count={value:1},lt(Object.create(t,{ma:{value:e,writable:!0}}))},lt=t=>typeof FinalizationRegistry>"u"?(lt=t=>t,t):(et=new FinalizationRegistry((t=>{--(t=t.ma).count.value,0===t.count.value&&(t.Aa?t.Da.Fa(t.Aa):t.za.xa.Fa(t.ya))})),lt=t=>{var e=t.ma;return e.Aa&&et.register(t,{ma:e},t),t},it=t=>{et.unregister(t)},lt(t));function ht(){}var It=(t,e)=>Object.defineProperty(e,"name",{value:t}),ct=(t,e,i)=>{if(void 0===t[e].Ba){var s=t[e];t[e]=function(...s){if(!t[e].Ba.hasOwnProperty(s.length))throw new z(`Function '${i}' called with an invalid number of arguments (${s.length}) - expects one of (${t[e].Ba})!`);return t[e].Ba[s.length].apply(this,s)},t[e].Ba=[],t[e].Ba[s.Oa]=s}},Ct=(t,e,i)=>{if(a.hasOwnProperty(t)){if(void 0===i||void 0!==a[t].Ba&&void 0!==a[t].Ba[i])throw new z(`Cannot register public name '${t}' twice`);if(ct(a,t,t),a.hasOwnProperty(i))throw new z(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`);a[t].Ba[i]=e}else a[t]=e,void 0!==i&&(a[t].vb=i)};function dt(t,e,i,s,a,n,r,o){this.name=t,this.constructor=e,this.La=i,this.Fa=s,this.Ca=a,this.cb=n,this.Na=r,this.ab=o,this.kb=[]}var pt=(t,e,i)=>{for(;e!==i;){if(!e.Na)throw new z(`Expected null or instance of ${i.name}, got an instance of ${e.name}`);t=e.Na(t),e=e.Ca}return t};function mt(t,e){if(null===e){if(this.Ta)throw new z(`null is not a valid ${this.name}`);return 0}if(!e.ma)throw new z(`Cannot pass "${Tt(e)}" as a ${this.name}`);if(!e.ma.ya)throw new z(`Cannot pass deleted object as a pointer of type ${this.name}`);return pt(e.ma.ya,e.ma.za.xa,this.xa)}function ut(t,e){if(null===e){if(this.Ta)throw new z(`null is not a valid ${this.name}`);if(this.Qa){var i=this.Ua();return null!==t&&t.push(this.Fa,i),i}return 0}if(!e||!e.ma)throw new z(`Cannot pass "${Tt(e)}" as a ${this.name}`);if(!e.ma.ya)throw new z(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.Pa&&e.ma.za.Pa)throw new z(`Cannot convert argument of type ${e.ma.Da?e.ma.Da.name:e.ma.za.name} to parameter type ${this.name}`);if(i=pt(e.ma.ya,e.ma.za.xa,this.xa),this.Qa){if(void 0===e.ma.Aa)throw new z("Passing raw pointer to smart pointer is illegal");switch(this.pb){case 0:if(e.ma.Da!==this)throw new z(`Cannot convert argument of type ${e.ma.Da?e.ma.Da.name:e.ma.za.name} to parameter type ${this.name}`);i=e.ma.Aa;break;case 1:i=e.ma.Aa;break;case 2:if(e.ma.Da===this)i=e.ma.Aa;else{var s=e.clone();i=this.lb(i,Rt((()=>s.delete()))),null!==t&&t.push(this.Fa,i)}break;default:throw new z("Unsupporting sharing policy")}}return i}function At(t,e){if(null===e){if(this.Ta)throw new z(`null is not a valid ${this.name}`);return 0}if(!e.ma)throw new z(`Cannot pass "${Tt(e)}" as a ${this.name}`);if(!e.ma.ya)throw new z(`Cannot pass deleted object as a pointer of type ${this.name}`);if(e.ma.za.Pa)throw new z(`Cannot convert argument of type ${e.ma.za.name} to parameter type ${this.name}`);return pt(e.ma.ya,e.ma.za.xa,this.xa)}function ft(t,e,i,s,a,n,r,o,g,l,h){this.name=t,this.xa=e,this.Ta=i,this.Pa=s,this.Qa=a,this.jb=n,this.pb=r,this.Za=o,this.Ua=g,this.lb=l,this.Fa=h,a||void 0!==e.Ca?this.toWireType=ut:(this.toWireType=s?mt:At,this.Ea=null)}var yt,bt,vt=(t,e,i)=>{if(!a.hasOwnProperty(t))throw new X("Replacing nonexistent public symbol");void 0!==a[t].Ba&&void 0!==i?a[t].Ba[i]=e:(a[t]=e,a[t].Oa=i)},St=(t,e)=>{var i=(t=Q(t)).includes("j")?((t,e)=>(...i)=>((t,e,i=[])=>(t.includes("j")?(t=t.replace(/p/g,"i"),e=(0,a["dynCall_"+t])(e,...i)):e=yt.get(e)(...i),e))(t,e,i))(t,e):yt.get(e);if("function"!=typeof i)throw new z(`unknown function pointer with signature ${t}: ${e}`);return i},Gt=t=>{t=ge(t);var e=Q(t);return le(t),e},Bt=(t,e)=>{var i=[],s={};throw e.forEach((function t(e){s[e]||J[e]||(j[e]?j[e].forEach(t):(i.push(e),s[e]=!0))})),new bt(`${t}: `+i.map(Gt).join([", "]))},wt=(t,e)=>{for(var i=[],s=0;s<t;s++)i.push(A[e+4*s>>2]);return i};function Zt(t,e,i,s,a){var n=e.length;if(2>n)throw new z("argTypes array size mismatch! Must at least get return value and 'this' types!");var r=null!==e[1]&&null!==i,o=function(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].Ea)return!0;return!1}(e),g="void"!==e[0].name,l=n-2,h=Array(l),I=[],c=[];return It(t,(function(...i){if(i.length!==l)throw new z(`function ${t} called with ${i.length} arguments, expected ${l}`);if(c.length=0,I.length=r?2:1,I[0]=a,r){var n=e[1].toWireType(c,this);I[1]=n}for(var C=0;C<l;++C)h[C]=e[C+2].toWireType(c,i[C]),I.push(h[C]);if(i=s(...I),o)L(c);else for(C=r?1:2;C<e.length;C++){var d=1===C?n:h[C-2];null!==e[C].Ea&&e[C].Ea(d)}return g?e[0].fromWireType(i):void 0}))}var kt,Pt=t=>{let e=(t=t.trim()).indexOf("(");return-1!==e?t.substr(0,e):t},Wt=[],xt=[],Et=t=>{9<t&&0==--xt[t+1]&&(xt[t]=void 0,Wt.push(t))},Vt=t=>{if(!t)throw new z("Cannot use deleted val. handle = "+t);return xt[t]},Rt=t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let e=Wt.pop()||xt.length;return xt[e]=t,xt[e+1]=1,e}},Ft={name:"emscripten::val",fromWireType:t=>{var e=Vt(t);return Et(t),e},toWireType:(t,e)=>Rt(e),argPackAdvance:8,readValueFromPointer:H,Ea:null},Kt=(t,e,i)=>{switch(e){case 1:return i?function(t){return this.fromWireType(C[t])}:function(t){return this.fromWireType(d[t])};case 2:return i?function(t){return this.fromWireType(p[t>>1])}:function(t){return this.fromWireType(m[t>>1])};case 4:return i?function(t){return this.fromWireType(u[t>>2])}:function(t){return this.fromWireType(A[t>>2])};default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Yt=(t,e)=>{var i=J[t];if(void 0===i)throw t=`${e} has unknown type ${Gt(t)}`,new z(t);return i},Tt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t},_t=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(f[t>>2])};case 8:return function(t){return this.fromWireType(y[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},Mt=(t,e,i)=>{switch(e){case 1:return i?t=>C[t]:t=>d[t];case 2:return i?t=>p[t>>1]:t=>m[t>>1];case 4:return i?t=>u[t>>2]:t=>A[t>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Dt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Lt=(t,e)=>{for(var i=t>>1,s=i+e/2;!(i>=s)&&m[i];)++i;if(32<(i<<=1)-t&&Dt)return Dt.decode(d.subarray(t,i));for(i="",s=0;!(s>=e/2);++s){var a=p[t+2*s>>1];if(0==a)break;i+=String.fromCharCode(a)}return i},Ht=(t,e,i)=>{if(i??(i=2147483647),2>i)return 0;var s=e;i=(i-=2)<2*t.length?i/2:t.length;for(var a=0;a<i;++a)p[e>>1]=t.charCodeAt(a),e+=2;return p[e>>1]=0,e-s},Xt=t=>2*t.length,Nt=(t,e)=>{for(var i=0,s="";!(i>=e/4);){var a=u[t+4*i>>2];if(0==a)break;++i,65536<=a?(a-=65536,s+=String.fromCharCode(55296|a>>10,56320|1023&a)):s+=String.fromCharCode(a)}return s},zt=(t,e,i)=>{if(i??(i=2147483647),4>i)return 0;var s=e;i=s+i-4;for(var a=0;a<t.length;++a){var n=t.charCodeAt(a);if(55296<=n&&57343>=n&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++a)),u[e>>2]=n,(e+=4)+4>i)break}return u[e>>2]=0,e-s},Ot=t=>{for(var e=0,i=0;i<t.length;++i){var s=t.charCodeAt(i);55296<=s&&57343>=s&&++i,e+=4}return e},Jt=[],jt=Reflect.construct,Ut={},Qt=()=>{if(!kt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:o||"./this.program"};for(t in Ut)void 0===Ut[t]?delete e[t]:e[t]=Ut[t];var i=[];for(t in e)i.push(`${t}=${e[t]}`);kt=i}return kt},qt=[null,[],[]],$t=t=>($t=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>crypto.getRandomValues(t);P("initRandomDevice")})())(t),te=t=>t%4==0&&(t%100!=0||t%400==0),ee=[31,29,31,30,31,30,31,31,30,31,30,31],ie=[31,28,31,30,31,30,31,31,30,31,30,31];X=a.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}};for(var se=Array(256),ae=0;256>ae;++ae)se[ae]=String.fromCharCode(ae);N=se,z=a.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Object.assign(ht.prototype,{isAliasOf:function(t){if(!(this instanceof ht&&t instanceof ht))return!1;var e=this.ma.za.xa,i=this.ma.ya;t.ma=t.ma;var s=t.ma.za.xa;for(t=t.ma.ya;e.Ca;)i=e.Na(i),e=e.Ca;for(;s.Ca;)t=s.Na(t),s=s.Ca;return e===s&&i===t},clone:function(){if(this.ma.ya||tt(this),this.ma.Ma)return this.ma.count.value+=1,this;var t=lt,e=Object,i=e.create,s=Object.getPrototypeOf(this),a=this.ma;return(t=t(i.call(e,s,{ma:{value:{count:a.count,Ka:a.Ka,Ma:a.Ma,ya:a.ya,za:a.za,Aa:a.Aa,Da:a.Da}}}))).ma.count.value+=1,t.ma.Ka=!1,t},delete(){if(this.ma.ya||tt(this),this.ma.Ka&&!this.ma.Ma)throw new z("Object already scheduled for deletion");it(this);var t=this.ma;--t.count.value,0===t.count.value&&(t.Aa?t.Da.Fa(t.Aa):t.za.xa.Fa(t.ya)),this.ma.Ma||(this.ma.Aa=void 0,this.ma.ya=void 0)},isDeleted:function(){return!this.ma.ya},deleteLater:function(){if(this.ma.ya||tt(this),this.ma.Ka&&!this.ma.Ma)throw new z("Object already scheduled for deletion");return nt.push(this),1===nt.length&&$&&$(rt),this.ma.Ka=!0,this}}),a.getInheritedInstanceCount=()=>Object.keys(ot).length,a.getLiveInheritedInstances=()=>{var t,e=[];for(t in ot)ot.hasOwnProperty(t)&&e.push(ot[t]);return e},a.flushPendingDeletes=rt,a.setDelayFunction=t=>{$=t,nt.length&&$&&$(rt)},Object.assign(ft.prototype,{eb(t){return this.Za&&(t=this.Za(t)),t},Xa(t){this.Fa?.(t)},argPackAdvance:8,readValueFromPointer:H,fromWireType:function(t){function e(){return this.Qa?gt(this.xa.La,{za:this.jb,ya:i,Da:this,Aa:t}):gt(this.xa.La,{za:this,ya:t})}var i=this.eb(t);if(!i)return this.Xa(t),null;var s=((t,e)=>{if(void 0===e)throw new z("ptr should not be undefined");for(;t.Ca;)e=t.Na(e),t=t.Ca;return ot[e]})(this.xa,i);if(void 0!==s)return 0===s.ma.count.value?(s.ma.ya=i,s.ma.Aa=t,s.clone()):(s=s.clone(),this.Xa(t),s);if(s=this.xa.cb(i),!(s=at[s]))return e.call(this);s=this.Pa?s.$a:s.pointerType;var a=st(i,this.xa,s.xa);return null===a?e.call(this):this.Qa?gt(s.xa.La,{za:s,ya:a,Da:this,Aa:t}):gt(s.xa.La,{za:s,ya:a})}}),bt=a.UnboundTypeError=((t,e)=>{var i=It(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},i})(Error,"UnboundTypeError"),xt.push(0,1,void 0,1,null,1,!0,1,!1,1),a.count_emval_handles=()=>xt.length/2-5-Wt.length;var ne={c:(t,e,i,s)=>{P(`Assertion failed: ${t?Y(d,t):""}, at: `+[e?e?Y(d,e):"":"unknown filename",i,s?s?Y(d,s):"":"unknown function"])},m:(t,e,i)=>{var s=new T(t);throw A[s.ya+16>>2]=0,A[s.ya+4>>2]=e,A[s.ya+8>>2]=i,t},B:function(){return 0},P:()=>{},M:()=>{},R:function(){return 0},N:()=>{},A:function(){},O:()=>{},v:t=>{var e=D[t];delete D[t];var i=e.Ua,s=e.Fa,a=e.Ya,n=a.map((t=>t.hb)).concat(a.map((t=>t.nb)));U([t],n,(t=>{var n={};return a.forEach(((e,i)=>{var s=t[i],r=e.fb,o=e.gb,g=t[i+a.length],l=e.mb,h=e.ob;n[e.bb]={read:t=>s.fromWireType(r(o,t)),write:(t,e)=>{var i=[];l(h,t,g.toWireType(i,e)),L(i)}}})),[{name:e.name,fromWireType:t=>{var e,i={};for(e in n)i[e]=n[e].read(t);return s(t),i},toWireType:(t,e)=>{for(var a in n)if(!(a in e))throw new TypeError(`Missing field: "${a}"`);var r=i();for(a in n)n[a].write(r,e[a]);return null!==t&&t.push(s,r),r},argPackAdvance:8,readValueFromPointer:H,Ea:s}]}))},I:()=>{},Y:(t,e,i,s)=>{q(t,{name:e=Q(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:s},argPackAdvance:8,readValueFromPointer:function(t){return this.fromWireType(d[t])},Ea:null})},r:(t,e,i,s,a,n,r,o,g,l,h,I,c)=>{h=Q(h),n=St(a,n),o&&(o=St(r,o)),l&&(l=St(g,l)),c=St(I,c);var C=(t=>{if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t})(h);Ct(C,(function(){Bt(`Cannot construct ${h} due to unbound types`,[s])})),U([t,e,i],s?[s]:[],(e=>{if(e=e[0],s)var i=e.xa,a=i.La;else a=ht.prototype;e=It(h,(function(...t){if(Object.getPrototypeOf(this)!==r)throw new z("Use 'new' to construct "+h);if(void 0===I.Ha)throw new z(h+" has no accessible constructor");var e=I.Ha[t.length];if(void 0===e)throw new z(`Tried to invoke ctor of ${h} with invalid number of parameters (${t.length}) - expected (${Object.keys(I.Ha).toString()}) parameters instead!`);return e.apply(this,t)}));var r=Object.create(a,{constructor:{value:e}});e.prototype=r;var g,I=new dt(h,e,r,c,i,n,o,l);return I.Ca&&((g=I.Ca).Wa??(g.Wa=[]),I.Ca.Wa.push(I)),i=new ft(h,I,!0,!1,!1),g=new ft(h+"*",I,!1,!1,!1),a=new ft(h+" const*",I,!1,!0,!1),at[t]={pointerType:g,$a:a},vt(C,e),[i,g,a]}))},q:(t,e,i,s,a,n)=>{var r=wt(e,i);a=St(s,a),U([],[t],(t=>{var i=`constructor ${(t=t[0]).name}`;if(void 0===t.xa.Ha&&(t.xa.Ha=[]),void 0!==t.xa.Ha[e-1])throw new z(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.xa.Ha[e-1]=()=>{Bt(`Cannot construct ${t.name} due to unbound types`,r)},U([],r,(s=>(s.splice(1,0,null),t.xa.Ha[e-1]=Zt(i,s,null,a,n),[]))),[]}))},f:(t,e,i,s,a,n,r,o)=>{var g=wt(i,s);e=Q(e),e=Pt(e),n=St(a,n),U([],[t],(t=>{function s(){Bt(`Cannot call ${a} due to unbound types`,g)}var a=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),o&&t.xa.kb.push(e);var l=t.xa.La,h=l[e];return void 0===h||void 0===h.Ba&&h.className!==t.name&&h.Oa===i-2?(s.Oa=i-2,s.className=t.name,l[e]=s):(ct(l,e,a),l[e].Ba[i-2]=s),U([],g,(s=>(s=Zt(a,s,t,n,r),void 0===l[e].Ba?(s.Oa=i-2,l[e]=s):l[e].Ba[i-2]=s,[]))),[]}))},X:t=>q(t,Ft),x:(t,e,i,s)=>{function a(){}e=Q(e),a.values={},q(t,{name:e,constructor:a,fromWireType:function(t){return this.constructor.values[t]},toWireType:(t,e)=>e.value,argPackAdvance:8,readValueFromPointer:Kt(e,i,s),Ea:null}),Ct(e,a)},k:(t,e,i)=>{var s=Yt(t,"enum");e=Q(e),t=s.constructor,s=Object.create(s.constructor.prototype,{value:{value:i},constructor:{value:It(`${s.name}_${e}`,(function(){}))}}),t.values[i]=s,t[e]=s},C:(t,e,i)=>{q(t,{name:e=Q(e),fromWireType:t=>t,toWireType:(t,e)=>e,argPackAdvance:8,readValueFromPointer:_t(e,i),Ea:null})},E:(t,e,i,s,a,n)=>{var r=wt(e,i);t=Q(t),t=Pt(t),a=St(s,a),Ct(t,(function(){Bt(`Cannot call ${t} due to unbound types`,r)}),e-1),U([],r,(i=>(vt(t,Zt(t,[i[0],null].concat(i.slice(1)),null,a,n),e-1),[])))},l:(t,e,i,s,a)=>{if(e=Q(e),-1===a&&(a=4294967295),a=t=>t,0===s){var n=32-8*i;a=t=>t<<n>>>n}var r=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e};q(t,{name:e,fromWireType:a,toWireType:r,argPackAdvance:8,readValueFromPointer:Mt(e,i,0!==s),Ea:null})},g:(t,e,i)=>{function s(t){return new a(C.buffer,A[t+4>>2],A[t>>2])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];q(t,{name:i=Q(i),fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ib:!0})},w:t=>{q(t,Ft)},ca:(t,e,i,s,a,n,r,o,g,l,h,I)=>{i=Q(i),n=St(a,n),o=St(r,o),l=St(g,l),I=St(h,I),U([t],[e],(t=>(t=t[0],[new ft(i,t.xa,!1,!1,!0,t,s,n,o,l,I)])))},D:(t,e)=>{var i="std::string"===(e=Q(e));q(t,{name:e,fromWireType:function(t){var e=A[t>>2],s=t+4;if(i)for(var a=s,n=0;n<=e;++n){var r=s+n;if(n==e||0==d[r]){if(a=a?Y(d,a,r-a):"",void 0===o)var o=a;else o+="\0",o+=a;a=r+1}}else{for(o=Array(e),n=0;n<e;++n)o[n]=String.fromCharCode(d[s+n]);o=o.join("")}return le(t),o},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var s="string"==typeof e;if(!(s||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array))throw new z("Cannot pass non-string to std::string");var a=i&&s?_(e):e.length,n=oe(4+a+1),r=n+4;if(A[n>>2]=a,i&&s)M(e,d,r,a+1);else if(s)for(s=0;s<a;++s){var o=e.charCodeAt(s);if(255<o)throw le(r),new z("String has UTF-16 code units that do not fit in 8 bits");d[r+s]=o}else for(s=0;s<a;++s)d[r+s]=e[s];return null!==t&&t.push(le,n),n},argPackAdvance:8,readValueFromPointer:H,Ea(t){le(t)}})},u:(t,e,i)=>{if(i=Q(i),2===e)var s=Lt,a=Ht,n=Xt,r=t=>m[t>>1];else 4===e&&(s=Nt,a=zt,n=Ot,r=t=>A[t>>2]);q(t,{name:i,fromWireType:t=>{for(var i,a=A[t>>2],n=t+4,o=0;o<=a;++o){var g=t+4+o*e;(o==a||0==r(g))&&(n=s(n,g-n),void 0===i?i=n:(i+="\0",i+=n),n=g+e)}return le(t),i},toWireType:(t,s)=>{if("string"!=typeof s)throw new z(`Cannot pass non-string to C++ string type ${i}`);var r=n(s),o=oe(4+r+e);return A[o>>2]=r/e,a(s,o+4,r+e),null!==t&&t.push(le,o),o},argPackAdvance:8,readValueFromPointer:H,Ea(t){le(t)}})},s:(t,e,i,s,a,n)=>{D[t]={name:Q(e),Ua:St(i,s),Fa:St(a,n),Ya:[]}},j:(t,e,i,s,a,n,r,o,g,l)=>{D[t].Ya.push({bb:Q(e),hb:i,fb:St(s,a),gb:n,nb:r,mb:St(o,g),ob:l})},Z:(t,e)=>{q(t,{ub:!0,name:e=Q(e),argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},J:()=>{throw 1/0},aa:(t,e,i,s)=>(t=Jt[t])(null,e=Vt(e),i,s),F:Et,$:(t,e,i)=>{var s=((t,e)=>{for(var i=Array(t),s=0;s<t;++s)i[s]=Yt(A[e+4*s>>2],"parameter "+s);return i})(t,e),a=s.shift();t--;var n=Array(t);return e=`methodCaller<(${s.map((t=>t.name)).join(", ")}) => ${a.name}>`,(t=>{var e=Jt.length;return Jt.push(t),e})(It(e,((e,r,o,g)=>{for(var l=0,h=0;h<t;++h)n[h]=s[h].readValueFromPointer(g+l),l+=s[h].argPackAdvance;return r=1===i?jt(r,n):r.apply(e,n),e=[],r=a.toWireType(e,r),e.length&&(A[o>>2]=Rt(e)),r})))},ba:t=>{9<t&&(xt[t+1]+=1)},_:t=>{var e=Vt(t);L(e),Et(t)},o:(t,e)=>(t=(t=Yt(t,"_emval_take_value")).readValueFromPointer(e),Rt(t)),W:()=>{P("")},V:()=>performance.now(),L:t=>{var e=d.length;if(2147483648<(t>>>=0))return!1;for(var i=1;4>=i;i*=2){var s=e*(1+.2/i);s=Math.min(s,t+100663296);var a=Math;s=Math.max(t,s);t:{a=(a.min.call(a,2147483648,s+(65536-s%65536)%65536)-c.buffer.byteLength+65535)/65536;try{c.grow(a),v();var n=1;break t}catch{}n=void 0}if(n)return!0}return!1},S:(t,e)=>{var i=0;return Qt().forEach(((s,a)=>{var n=e+i;for(a=A[t+4*a>>2]=n,n=0;n<s.length;++n)C[a++]=s.charCodeAt(n);C[a]=0,i+=s.length+1})),0},T:(t,e)=>{var i=Qt();A[t>>2]=i.length;var s=0;return i.forEach((t=>s+=t.length+1)),A[e>>2]=s,0},t:()=>52,z:()=>52,H:function(){return 70},Q:(t,e,i,s)=>{for(var a=0,n=0;n<i;n++){var r=A[e>>2],o=A[e+4>>2];e+=8;for(var g=0;g<o;g++){var l=d[r+g],c=qt[t];0===l||10===l?((1===t?h:I)(Y(c,0)),c.length=0):c.push(l)}a+=o}return A[s>>2]=a,0},U:(t,e)=>($t(d.subarray(t,t+e)),0),i:function(t,e){var i=ce();try{return yt.get(t)(e)}catch(t){if(Ie(i),t!==t+0)throw t;he(1,0)}},d:function(t,e,i){var s=ce();try{return yt.get(t)(e,i)}catch(t){if(Ie(s),t!==t+0)throw t;he(1,0)}},e:function(t,e,i,s){var a=ce();try{return yt.get(t)(e,i,s)}catch(t){if(Ie(a),t!==t+0)throw t;he(1,0)}},p:function(t,e,i,s,a,n){var r=ce();try{return yt.get(t)(e,i,s,a,n)}catch(t){if(Ie(r),t!==t+0)throw t;he(1,0)}},y:function(t){var e=ce();try{yt.get(t)()}catch(t){if(Ie(e),t!==t+0)throw t;he(1,0)}},b:function(t,e){var i=ce();try{yt.get(t)(e)}catch(t){if(Ie(i),t!==t+0)throw t;he(1,0)}},a:function(t,e,i){var s=ce();try{yt.get(t)(e,i)}catch(t){if(Ie(s),t!==t+0)throw t;he(1,0)}},h:function(t,e,i,s){var a=ce();try{yt.get(t)(e,i,s)}catch(t){if(Ie(a),t!==t+0)throw t;he(1,0)}},n:function(t,e,i,s,a){var n=ce();try{yt.get(t)(e,i,s,a)}catch(t){if(Ie(n),t!==t+0)throw t;he(1,0)}},G:function(t,e,i,s,a,n){var r=ce();try{de(t,e,i,s,a,n)}catch(t){if(Ie(r),t!==t+0)throw t;he(1,0)}},K:(t,e,i,s)=>((t,e,i,s)=>{function a(t,e,i){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=i[0]+t;return t}function n(t,e){return a(t,e,"0")}function r(t,e){function i(t){return 0>t?-1:0<t?1:0}var s;return 0===(s=i(t.getFullYear()-e.getFullYear()))&&0===(s=i(t.getMonth()-e.getMonth()))&&(s=i(t.getDate()-e.getDate())),s}function o(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function g(t){var e=t.Ia;for(t=new Date(new Date(t.Ja+1900,0,1).getTime());0<e;){var i=t.getMonth(),s=(te(t.getFullYear())?ee:ie)[i];if(!(e>s-t.getDate())){t.setDate(t.getDate()+e);break}e-=s-t.getDate()+1,t.setDate(1),11>i?t.setMonth(i+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return i=new Date(t.getFullYear()+1,0,4),e=o(new Date(t.getFullYear(),0,4)),i=o(i),0>=r(e,t)?0>=r(i,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var l=A[s+40>>2];for(var h in s={sb:u[s>>2],rb:u[s+4>>2],Ra:u[s+8>>2],Va:u[s+12>>2],Sa:u[s+16>>2],Ja:u[s+20>>2],Ga:u[s+24>>2],Ia:u[s+28>>2],wb:u[s+32>>2],qb:u[s+36>>2],tb:l&&l?Y(d,l):""},i=i?Y(d,i):"",l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(h,"g"),l[h]);var I="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c="January February March April May June July August September October November December".split(" ");for(h in l={"%a":t=>I[t.Ga].substring(0,3),"%A":t=>I[t.Ga],"%b":t=>c[t.Sa].substring(0,3),"%B":t=>c[t.Sa],"%C":t=>n((t.Ja+1900)/100|0,2),"%d":t=>n(t.Va,2),"%e":t=>a(t.Va,2," "),"%g":t=>g(t).toString().substring(2),"%G":g,"%H":t=>n(t.Ra,2),"%I":t=>(0==(t=t.Ra)?t=12:12<t&&(t-=12),n(t,2)),"%j":t=>{for(var e=0,i=0;i<=t.Sa-1;e+=(te(t.Ja+1900)?ee:ie)[i++]);return n(t.Va+e,3)},"%m":t=>n(t.Sa+1,2),"%M":t=>n(t.rb,2),"%n":()=>"\n","%p":t=>0<=t.Ra&&12>t.Ra?"AM":"PM","%S":t=>n(t.sb,2),"%t":()=>"\t","%u":t=>t.Ga||7,"%U":t=>n(Math.floor((t.Ia+7-t.Ga)/7),2),"%V":t=>{var e=Math.floor((t.Ia+7-(t.Ga+6)%7)/7);if(2>=(t.Ga+371-t.Ia-2)%7&&e++,e)53==e&&(4==(i=(t.Ga+371-t.Ia)%7)||3==i&&te(t.Ja)||(e=1));else{e=52;var i=(t.Ga+7-t.Ia-1)%7;(4==i||5==i&&te(t.Ja%400-1))&&e++}return n(e,2)},"%w":t=>t.Ga,"%W":t=>n(Math.floor((t.Ia+7-(t.Ga+6)%7)/7),2),"%y":t=>(t.Ja+1900).toString().substring(2),"%Y":t=>t.Ja+1900,"%z":t=>(0<=(t=t.qb)?"+":"-")+("0000"+((t=Math.abs(t)/60)/60*100+t%60)).slice(-4),"%Z":t=>t.tb,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0"),l)i.includes(h)&&(i=i.replace(new RegExp(h,"g"),l[h](s)));return h=function(t){var e=Array(_(t)+1);return M(t,e,0,e.length),e}(i=i.replace(/\0\0/g,"%")),h.length>e?0:(C.set(h,t),h.length-1)})(t,e,i,s)},re=function(){function t(t){return re=t.exports,c=re.da,v(),yt=re.ha,G.unshift(re.ea),Z--,a.monitorRunDependencies?.(Z),0==Z&&k&&(t=k,k=null,t()),re}var e={a:ne};if(Z++,a.monitorRunDependencies?.(Z),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(t){I(`Module.instantiateWasm callback failed with error: ${t}`),s(t)}return function(t,e){var i=W;return l||"function"!=typeof WebAssembly.instantiateStreaming||x(i)||"function"!=typeof fetch?R(i,t,e):fetch(i,{credentials:"same-origin"}).then((s=>WebAssembly.instantiateStreaming(s,t).then(e,(function(s){return I(`wasm streaming compile failed: ${s}`),I("falling back to ArrayBuffer instantiation"),R(i,t,e)}))))}(e,(function(e){t(e.instance)})).catch(s),{}}(),oe=t=>(oe=re.fa)(t),ge=t=>(ge=re.ga)(t),le=t=>(le=re.ia)(t),he=(t,e)=>(he=re.ja)(t,e),Ie=t=>(Ie=re.ka)(t),ce=()=>(ce=re.la)();a.dynCall_iijj=(t,e,i,s,n,r)=>(a.dynCall_iijj=re.na)(t,e,i,s,n,r),a.dynCall_vijj=(t,e,i,s,n,r)=>(a.dynCall_vijj=re.oa)(t,e,i,s,n,r),a.dynCall_jiii=(t,e,i,s)=>(a.dynCall_jiii=re.pa)(t,e,i,s),a.dynCall_jii=(t,e,i)=>(a.dynCall_jii=re.qa)(t,e,i);var Ce,de=a.dynCall_viiij=(t,e,i,s,n,r)=>(de=a.dynCall_viiij=re.ra)(t,e,i,s,n,r);function pe(){function t(){if(!Ce&&(Ce=!0,a.calledRun=!0,!b)){if(F(G),i(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var t=a.postRun.shift();B.unshift(t)}F(B)}}if(!(0<Z)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)w();F(S),0<Z||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t())}}if(a.dynCall_jiji=(t,e,i,s,n)=>(a.dynCall_jiji=re.sa)(t,e,i,s,n),a.dynCall_viijii=(t,e,i,s,n,r,o)=>(a.dynCall_viijii=re.ta)(t,e,i,s,n,r,o),a.dynCall_iiiiij=(t,e,i,s,n,r,o)=>(a.dynCall_iiiiij=re.ua)(t,e,i,s,n,r,o),a.dynCall_iiiiijj=(t,e,i,s,n,r,o,g,l)=>(a.dynCall_iiiiijj=re.va)(t,e,i,s,n,r,o,g,l),a.dynCall_iiiiiijj=(t,e,i,s,n,r,o,g,l,h)=>(a.dynCall_iiiiiijj=re.wa)(t,e,i,s,n,r,o,g,l,h),k=function t(){Ce||pe(),Ce||(k=t)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return pe(),n}})(),ee=te,ie=class{constructor(){throw new Error("RendererLoader is a static class and cannot be instantiated.")}static async _tryLoad(t){return await ee({locateFile:()=>t})}static async _loadWithBackup(){return this._ModulePromise||(this._ModulePromise=this._tryLoad(this._wasmURL).catch((async t=>{let e=`https://unpkg.com/${$t}@${qt}/dist/dotlottie-player.wasm`;console.warn(`Primary WASM load failed from ${this._wasmURL}. Error: ${t.message}`),console.warn(`Attempting to load WASM from backup URL: ${e}`);try{return await this._tryLoad(e)}catch(e){throw console.error(`Primary WASM URL failed: ${t.message}`),console.error(`Backup WASM URL failed: ${e.message}`),new Error("WASM loading failed from all sources.")}}))),this._ModulePromise}static async load(){return this._loadWithBackup()}static setWasmUrl(t){this._wasmURL=t,this._ModulePromise=null}};Nt(ie,"_ModulePromise",null),Nt(ie,"_wasmURL",`https://cdn.jsdelivr.net/npm/${$t}@${qt}/dist/dotlottie-player.wasm`);var se=class{constructor(){Nt(this,"_eventListeners",new Map)}addEventListener(t,e){let i=this._eventListeners.get(t);i||(i=new Set,this._eventListeners.set(t,i)),i.add(e)}removeEventListener(t,e){let i=this._eventListeners.get(t);i&&(e?(i.delete(e),0===i.size&&this._eventListeners.delete(t)):this._eventListeners.delete(t))}dispatch(t){this._eventListeners.get(t.type)?.forEach((e=>e(t)))}removeAllEventListeners(){this._eventListeners.clear()}};function ae(t){if(!function(t){return/^#([\da-f]{6}|[\da-f]{8})$/iu.test(t)}(t))return 0;let e=t.replace("#","");return e=6===e.length?`${e}ff`:e,parseInt(e,16)}function ne(t){if(t.byteLength<4)return!1;let e=new Uint8Array(t.slice(0,Ut.byteLength));for(let t=0;t<Ut.length;t+=1)if(Ut[t]!==e[t])return!1;return!0}function re(t){return Qt.every((e=>Object.prototype.hasOwnProperty.call(t,e)))}function oe(t){if("string"!=typeof t)return re(t);try{return re(JSON.parse(t))}catch{return!1}}var ge=(t,e)=>"reverse"===t?e.Mode.Reverse:"bounce"===t?e.Mode.Bounce:"reverse-bounce"===t?e.Mode.ReverseBounce:e.Mode.Forward,le=(t,e)=>"contain"===t?e.Fit.Contain:"cover"===t?e.Fit.Cover:"fill"===t?e.Fit.Fill:"fit-height"===t?e.Fit.FitHeight:"fit-width"===t?e.Fit.FitWidth:e.Fit.None,he=(t,e)=>{let i=new e.VectorFloat;return i.push_back(t[0]),i.push_back(t[1]),i},Ie=(t,e)=>{let i=new e.VectorFloat;return 2!==t.length||(i.push_back(t[0]),i.push_back(t[1])),i},ce=class t{constructor(e){Nt(this,"_canvas"),Nt(this,"_context",null),Nt(this,"_eventManager"),Nt(this,"_animationFrameId",null),Nt(this,"_frameManager"),Nt(this,"_dotLottieCore",null),Nt(this,"_renderConfig",{}),Nt(this,"_isFrozen",!1),Nt(this,"_backgroundColor",null),Nt(this,"_pointerUpMethod"),Nt(this,"_pointerDownMethod"),Nt(this,"_pointerMoveMethod"),Nt(this,"_pointerEnterMethod"),Nt(this,"_pointerExitMethod"),Nt(this,"_onCompleteMethod"),this._canvas=e.canvas,this._context=this._canvas.getContext("2d"),this._eventManager=new se,this._frameManager=new Jt,this._renderConfig=e.renderConfig??{},ie.load().then((i=>{t._wasmModule=i,this._dotLottieCore=new i.DotLottiePlayer({autoplay:e.autoplay??!1,backgroundColor:0,loopAnimation:e.loop??!1,mode:ge(e.mode??"forward",i),segment:Ie(e.segment??[],i),speed:e.speed??1,useFrameInterpolation:e.useFrameInterpolation??!0,marker:e.marker??"",layout:e.layout?{align:he(e.layout.align,i),fit:le(e.layout.fit,i)}:i.createDefaultLayout()}),this._eventManager.dispatch({type:"ready"}),e.data?this._loadFromData(e.data):e.src&&this._loadFromSrc(e.src),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor)})).catch((t=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load wasm module: ${t}`)})})),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this),this._onCompleteMethod=this._onComplete.bind(this)}_dispatchError(t){console.error(t),this._eventManager.dispatch({type:"loadError",error:new Error(t)})}async _fetchData(t){let e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch animation data from URL: ${t}. ${e.status}: ${e.statusText}`);let i=await e.arrayBuffer();return ne(i)?i:(new TextDecoder).decode(i)}_loadFromData(t){if(null===this._dotLottieCore)return;let e=this._canvas.width,i=this._canvas.height,s=!1;if("string"==typeof t){if(!oe(t))return void this._dispatchError("Invalid Lottie JSON string: The provided string does not conform to the Lottie JSON format.");s=this._dotLottieCore.loadAnimationData(t,e,i)}else if(t instanceof ArrayBuffer){if(!ne(t))return void this._dispatchError("Invalid dotLottie ArrayBuffer: The provided ArrayBuffer does not conform to the dotLottie format.");s=this._dotLottieCore.loadDotLottieData(t,e,i)}else{if("object"!=typeof t)return void this._dispatchError("Unsupported data type for animation data. Expected: \n          - string (Lottie JSON),\n          - ArrayBuffer (dotLottie),\n          - object (Lottie JSON). \n          Received: "+typeof t);if(!oe(t))return void this._dispatchError("Invalid Lottie JSON object: The provided object does not conform to the Lottie JSON format.");s=this._dotLottieCore.loadAnimationData(JSON.stringify(t),e,i)}s?(this._eventManager.dispatch({type:"load"}),jt&&this.resize(),this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._dotLottieCore.config().autoplay&&(this._dotLottieCore.play(),this._dotLottieCore.isPlaying()?(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))):console.error("something went wrong, the animation was suppose to autoplay"))):this._dispatchError("Failed to load animation data")}_loadFromSrc(t){this._fetchData(t).then((t=>this._loadFromData(t))).catch((e=>this._dispatchError(`Failed to load animation data from URL: ${t}. ${e}`)))}get activeAnimationId(){return this._dotLottieCore?.activeAnimationId()}get activeThemeId(){return this._dotLottieCore?.activeThemeId()}get layout(){let e=this._dotLottieCore?.config().layout;if(e)return{align:[e.align.get(0),e.align.get(1)],fit:(()=>{switch(e.fit){case t._wasmModule?.Fit.Contain:return"contain";case t._wasmModule?.Fit.Cover:return"cover";case t._wasmModule?.Fit.Fill:return"fill";case t._wasmModule?.Fit.FitHeight:return"fit-height";case t._wasmModule?.Fit.FitWidth:return"fit-width";case t._wasmModule?.Fit.None:return"none";default:return"contain"}})()}}get marker(){return this._dotLottieCore?.config().marker}get manifest(){try{let t=this._dotLottieCore?.manifestString();if(null===this._dotLottieCore||!t)return null;let e=JSON.parse(t);return 0===Object.keys(e).length?null:e}catch{return null}}get renderConfig(){return this._renderConfig}get segment(){let t=this._dotLottieCore?.config().segment;if(t&&2===t.size())return[t.get(0),t.get(1)]}get loop(){return this._dotLottieCore?.config().loopAnimation??!1}get mode(){let e=this._dotLottieCore?.config().mode;return e===t._wasmModule?.Mode.Reverse?"reverse":e===t._wasmModule?.Mode.Bounce?"bounce":e===t._wasmModule?.Mode.ReverseBounce?"reverse-bounce":"forward"}get isFrozen(){return this._isFrozen}get backgroundColor(){return this._backgroundColor??""}get autoplay(){return this._dotLottieCore?.config().autoplay??!1}get useFrameInterpolation(){return this._dotLottieCore?.config().useFrameInterpolation??!1}get speed(){return this._dotLottieCore?.config().speed??0}get isReady(){return null!==this._dotLottieCore}get isLoaded(){return this._dotLottieCore?.isLoaded()??!1}get isPlaying(){return this._dotLottieCore?.isPlaying()??!1}get isPaused(){return this._dotLottieCore?.isPaused()??!1}get isStopped(){return this._dotLottieCore?.isStopped()??!1}get currentFrame(){return this._dotLottieCore?.currentFrame()??0}get loopCount(){return this._dotLottieCore?.loopCount()??0}get totalFrames(){return this._dotLottieCore?.totalFrames()??0}get duration(){return this._dotLottieCore?.duration()??0}get segmentDuration(){return this._dotLottieCore?.segmentDuration()??0}get canvas(){return this._canvas}load(e){null===this._dotLottieCore||null===t._wasmModule||(this._dotLottieCore.setConfig({autoplay:e.autoplay??!1,backgroundColor:0,loopAnimation:e.loop??!1,mode:ge(e.mode??"forward",t._wasmModule),segment:Ie(e.segment??[],t._wasmModule),speed:e.speed??1,useFrameInterpolation:e.useFrameInterpolation??!0,marker:e.marker??"",layout:e.layout?{align:he(e.layout.align,t._wasmModule),fit:le(e.layout.fit,t._wasmModule)}:t._wasmModule.createDefaultLayout()}),e.data?this._loadFromData(e.data):e.src&&this._loadFromSrc(e.src),this.setBackgroundColor(e.backgroundColor??""))}_render(){if(null===this._dotLottieCore||null===this._context)return!1;if(this._dotLottieCore.render()){let t=this._dotLottieCore.buffer(),e=new Uint8ClampedArray(t,0,this._canvas.width*this._canvas.height*4),i=null;return typeof ImageData>"u"?(i=this._context.createImageData(this._canvas.width,this._canvas.height),i.data.set(e)):i=new ImageData(e,this._canvas.width,this._canvas.height),this._context.putImageData(i,0,0),this._eventManager.dispatch({type:"render",currentFrame:this._dotLottieCore.currentFrame()}),!0}return!1}_draw(){if(null===this._dotLottieCore||null===this._context||!this._dotLottieCore.isPlaying())return;let t=this._dotLottieCore.requestFrame();this._dotLottieCore.setFrame(t)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render()&&this._dotLottieCore.isComplete()&&(this._dotLottieCore.config().loopAnimation?this._eventManager.dispatch({type:"loop",loopCount:this._dotLottieCore.loopCount()}):this._eventManager.dispatch({type:"complete"}))),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))}play(){null!==this._dotLottieCore&&(this._dotLottieCore.play()||this._dotLottieCore.isPlaying())&&(this._isFrozen=!1,this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)))}pause(){null!==this._dotLottieCore&&(this._dotLottieCore.pause()||this._dotLottieCore.isPaused())&&this._eventManager.dispatch({type:"pause"})}stop(){null!==this._dotLottieCore&&this._dotLottieCore.stop()&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._eventManager.dispatch({type:"stop"}))}setFrame(t){null===this._dotLottieCore||t<0||t>this._dotLottieCore.totalFrames()||this._dotLottieCore.seek(t)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render())}setSpeed(t){null!==this._dotLottieCore&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),speed:t})}setBackgroundColor(t){null!==this._dotLottieCore&&(jt&&this._canvas instanceof HTMLCanvasElement?this._canvas.style.backgroundColor=t:this._dotLottieCore.setConfig({...this._dotLottieCore.config(),backgroundColor:ae(t)}),this._backgroundColor=t)}setLoop(t){null!==this._dotLottieCore&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),loopAnimation:t})}setUseFrameInterpolation(t){null!==this._dotLottieCore&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),useFrameInterpolation:t})}addEventListener(t,e){this._eventManager.addEventListener(t,e)}removeEventListener(t,e){this._eventManager.removeEventListener(t,e)}destroy(){this._dotLottieCore?.delete(),this._dotLottieCore=null,this._context=null,this._eventManager.dispatch({type:"destroy"}),this._eventManager.removeAllEventListeners(),this._cleanupStateMachineListeners()}freeze(){null!==this._animationFrameId&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._isFrozen=!0,this._eventManager.dispatch({type:"freeze"}))}unfreeze(){null===this._animationFrameId&&(this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)),this._isFrozen=!1,this._eventManager.dispatch({type:"unfreeze"}))}resize(){if(jt&&this._canvas instanceof HTMLCanvasElement){let t=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,{height:e,width:i}=this._canvas.getBoundingClientRect();this._canvas.width=i*t,this._canvas.height=e*t}this._dotLottieCore?.resize(this._canvas.width,this._canvas.height)&&this._render()}setSegment(e,i){null===this._dotLottieCore||null===t._wasmModule||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),segment:Ie([e,i],t._wasmModule)})}setMode(e){null===this._dotLottieCore||null===t._wasmModule||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),mode:ge(e,t._wasmModule)})}setRenderConfig(t){this._renderConfig=t}loadAnimation(t){null!==this._dotLottieCore&&this._dotLottieCore.activeAnimationId()!==t&&(this._dotLottieCore.loadAnimation(t,this._canvas.width,this._canvas.height)?(this._eventManager.dispatch({type:"load"}),this.resize()):this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to animation :${t}`)}))}setMarker(t){null!==this._dotLottieCore&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),marker:t})}markers(){let t=this._dotLottieCore?.markers();if(t){let e=[];for(let i=0;i<t.size();i+=1){let s=t.get(i);e.push({name:s.name,time:s.time,duration:s.duration})}return e}return[]}loadTheme(t){if(null===this._dotLottieCore)return!1;let e=this._dotLottieCore.loadTheme(t);return this._render(),e}loadThemeData(t){if(null===this._dotLottieCore)return!1;let e=this._dotLottieCore.loadThemeData(t);return this._render(),e}setLayout(e){null===this._dotLottieCore||null===t._wasmModule||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),layout:{align:he(e.align,t._wasmModule),fit:le(e.fit,t._wasmModule)}})}setViewport(t,e,i,s){return null!==this._dotLottieCore&&this._dotLottieCore.setViewport(t,e,i,s)}static setWasmUrl(t){ie.setWasmUrl(t)}loadStateMachine(t){return this._dotLottieCore?.loadStateMachine(t)??!1}startStateMachine(){let t=this._dotLottieCore?.startStateMachine()??!1;return t&&this._setupStateMachineListeners(),t}stopStateMachine(){let t=this._dotLottieCore?.stopStateMachine()??!1;return t&&this._cleanupStateMachineListeners(),t}_getPointerPosition(t){let e=this._canvas.getBoundingClientRect(),i=this._canvas.width/e.width,s=this._canvas.height/e.height,a=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1;return{x:(t.clientX-e.left)*i/a,y:(t.clientY-e.top)*s/a}}_onPointerUp(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerUp: ${e} ${i}`)}_onPointerDown(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerDown: ${e} ${i}`)}_onPointerMove(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerMove: ${e} ${i}`)}_onPointerEnter(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerEnter: ${e} ${i}`)}_onPointerLeave(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerExit: ${e} ${i}`)}_onComplete(){this.postStateMachineEvent("OnComplete")}postStateMachineEvent(t){let e=this._dotLottieCore?.postEventPayload(t)??1;return 2===e?this.play():3===e?this.pause():4===e&&this._render(),e}getStateMachineListeners(){if(!this._dotLottieCore)return[];let t=this._dotLottieCore.stateMachineFrameworkSetup(),e=[];for(let i=0;i<t.size();i+=1)e.push(t.get(i));return e}_setupStateMachineListeners(){if(jt&&this._canvas instanceof HTMLCanvasElement&&null!==this._dotLottieCore&&this.isLoaded){let t=this.getStateMachineListeners();t.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),t.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),t.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),t.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),t.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod),t.includes("Complete")&&this.addEventListener("complete",this._onCompleteMethod)}}_cleanupStateMachineListeners(){jt&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod),this.removeEventListener("complete",this._onCompleteMethod))}loadStateMachineData(t){return this._dotLottieCore?.loadStateMachineData(t)??!1}animationSize(){return{width:this._dotLottieCore?.animationSize().get(0)??0,height:this._dotLottieCore?.animationSize().get(1)??0}}setStateMachineBooleanContext(t,e){return this._dotLottieCore?.setStateMachineBooleanContext(t,e)??!1}setStateMachineNumericContext(t,e){return this._dotLottieCore?.setStateMachineNumericContext(t,e)??!1}setStateMachineStringContext(t,e){return this._dotLottieCore?.setStateMachineStringContext(t,e)??!1}};Nt(ce,"_wasmModule",null);var Ce=ce,de=class{constructor(){if(typeof window>"u")throw new Error("Worker is not available in this environment.");return new Worker("data:application/javascript;base64,InVzZSBzdHJpY3QiOwooKCkgPT4gewogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlOwogIHZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gInN5bWJvbCIgPyBrZXkgKyAiIiA6IGtleSwgdmFsdWUpOwoKICAvLyBzcmMvYW5pbWF0aW9uLWZyYW1lLW1hbmFnZXIudHMKICB2YXIgV2ViQW5pbWF0aW9uRnJhbWVTdHJhdGVneSA9IGNsYXNzIHsKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykgewogICAgICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTsKICAgIH0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKSB7CiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTsKICAgIH0KICB9OwogIHZhciBOb2RlQW5pbWF0aW9uRnJhbWVTdHJhdGVneSA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfbGFzdEhhbmRsZUlkIiwgMCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9sYXN0SW1tZWRpYXRlIiwgbnVsbCk7CiAgICB9CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICAgICAgaWYgKHRoaXMuX2xhc3RIYW5kbGVJZCA+PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgewogICAgICAgIHRoaXMuX2xhc3RIYW5kbGVJZCA9IDA7CiAgICAgIH0KICAgICAgdGhpcy5fbGFzdEhhbmRsZUlkICs9IDE7CiAgICAgIHRoaXMuX2xhc3RJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGUoKCkgPT4gewogICAgICAgIGNhbGxiYWNrKERhdGUubm93KCkpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMuX2xhc3RIYW5kbGVJZDsKICAgIH0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKF9pZCkgewogICAgICBpZiAodGhpcy5fbGFzdEltbWVkaWF0ZSkgewogICAgICAgIGNsZWFySW1tZWRpYXRlKHRoaXMuX2xhc3RJbW1lZGlhdGUpOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgQW5pbWF0aW9uRnJhbWVNYW5hZ2VyID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9zdHJhdGVneSIpOwogICAgICB0aGlzLl9zdHJhdGVneSA9IHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09ICJmdW5jdGlvbiIgPyBuZXcgV2ViQW5pbWF0aW9uRnJhbWVTdHJhdGVneSgpIDogbmV3IE5vZGVBbmltYXRpb25GcmFtZVN0cmF0ZWd5KCk7CiAgICB9CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIHRoaXMuX3N0cmF0ZWd5LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7CiAgICB9CiAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCkgewogICAgICB0aGlzLl9zdHJhdGVneS5jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7CiAgICB9CiAgfTsKCiAgLy8gc3JjL2NvbnN0YW50cy50cwogIHZhciBJU19CUk9XU0VSID0gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gInVuZGVmaW5lZCI7CiAgdmFyIFpJUF9TSUdOQVRVUkUgPSBuZXcgVWludDhBcnJheShbODAsIDc1LCAzLCA0XSk7CiAgdmFyIExPVFRJRV9KU09OX01BTkRBVE9SWV9GSUVMRFMgPSBbInYiLCAiaXAiLCAib3AiLCAibGF5ZXJzIiwgImZyIiwgInciLCAiaCJdOwogIHZhciBQQUNLQUdFX1ZFUlNJT04gPSAiMC4zMC4zIjsKICB2YXIgUEFDS0FHRV9OQU1FID0gIkBsb3R0aWVmaWxlcy9kb3Rsb3R0aWUtd2ViIjsKCiAgLy8gc3JjL2NvcmUvZG90bG90dGllLXBsYXllci5qcwogIHZhciBjcmVhdGVEb3RMb3R0aWVQbGF5ZXJNb2R1bGUgPSAoKCkgPT4gewogICAgdmFyIF9zY3JpcHREaXIgPSB0eXBlb2YgZG9jdW1lbnQgIT0gInVuZGVmaW5lZCIgPyBkb2N1bWVudC5jdXJyZW50U2NyaXB0Py5zcmMgOiB2b2lkIDA7CiAgICByZXR1cm4gZnVuY3Rpb24obW9kdWxlQXJnID0ge30pIHsKICAgICAgdmFyIGsgPSBtb2R1bGVBcmcsIGFhLCBiYSwgcmVhZHlQcm9taXNlID0gbmV3IFByb21pc2UoKGEsIGIpID0+IHsKICAgICAgICBhYSA9IGE7CiAgICAgICAgYmEgPSBiOwogICAgICB9KSwgY2EgPSBPYmplY3QuYXNzaWduKHt9LCBrKSwgZGEgPSAiLi90aGlzLnByb2dyYW0iLCB0ID0gIiI7CiAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBkb2N1bWVudCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmICh0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpOwogICAgICBfc2NyaXB0RGlyICYmICh0ID0gX3NjcmlwdERpcik7CiAgICAgIHQuc3RhcnRzV2l0aCgiYmxvYjoiKSA/IHQgPSAiIiA6IHQgPSB0LnN1YnN0cigwLCB0LnJlcGxhY2UoL1s/I10uKi8sICIiKS5sYXN0SW5kZXhPZigiLyIpICsgMSk7CiAgICAgIHZhciBlYSA9IGsucHJpbnQgfHwgY29uc29sZS5sb2cuYmluZChjb25zb2xlKSwgdyA9IGsucHJpbnRFcnIgfHwgY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpOwogICAgICBPYmplY3QuYXNzaWduKGssIGNhKTsKICAgICAgY2EgPSBudWxsOwogICAgICBrLnRoaXNQcm9ncmFtICYmIChkYSA9IGsudGhpc1Byb2dyYW0pOwogICAgICB2YXIgeDsKICAgICAgay53YXNtQmluYXJ5ICYmICh4ID0gay53YXNtQmluYXJ5KTsKICAgICAgdmFyIGZhLCBoYSA9IGZhbHNlLCB5LCBBLCBCLCBDLCBFLCBGLCBqYSwga2E7CiAgICAgIGZ1bmN0aW9uIGxhKCkgewogICAgICAgIHZhciBhID0gZmEuYnVmZmVyOwogICAgICAgIGsuSEVBUDggPSB5ID0gbmV3IEludDhBcnJheShhKTsKICAgICAgICBrLkhFQVAxNiA9IEIgPSBuZXcgSW50MTZBcnJheShhKTsKICAgICAgICBrLkhFQVBVOCA9IEEgPSBuZXcgVWludDhBcnJheShhKTsKICAgICAgICBrLkhFQVBVMTYgPSBDID0gbmV3IFVpbnQxNkFycmF5KGEpOwogICAgICAgIGsuSEVBUDMyID0gRSA9IG5ldyBJbnQzMkFycmF5KGEpOwogICAgICAgIGsuSEVBUFUzMiA9IEYgPSBuZXcgVWludDMyQXJyYXkoYSk7CiAgICAgICAgay5IRUFQRjMyID0gamEgPSBuZXcgRmxvYXQzMkFycmF5KGEpOwogICAgICAgIGsuSEVBUEY2NCA9IGthID0gbmV3IEZsb2F0NjRBcnJheShhKTsKICAgICAgfQogICAgICB2YXIgbWEgPSBbXSwgbmEgPSBbXSwgb2EgPSBbXTsKICAgICAgZnVuY3Rpb24gcGEoKSB7CiAgICAgICAgdmFyIGEgPSBrLnByZVJ1bi5zaGlmdCgpOwogICAgICAgIG1hLnVuc2hpZnQoYSk7CiAgICAgIH0KICAgICAgdmFyIEcgPSAwLCBxYSA9IG51bGwsIEggPSBudWxsOwogICAgICBmdW5jdGlvbiByYShhKSB7CiAgICAgICAgay5vbkFib3J0Py4oYSk7CiAgICAgICAgYSA9ICJBYm9ydGVkKCIgKyBhICsgIikiOwogICAgICAgIHcoYSk7CiAgICAgICAgaGEgPSB0cnVlOwogICAgICAgIGEgPSBuZXcgV2ViQXNzZW1ibHkuUnVudGltZUVycm9yKGEgKyAiLiBCdWlsZCB3aXRoIC1zQVNTRVJUSU9OUyBmb3IgbW9yZSBpbmZvLiIpOwogICAgICAgIGJhKGEpOwogICAgICAgIHRocm93IGE7CiAgICAgIH0KICAgICAgdmFyIHNhID0gKGEpID0+IGEuc3RhcnRzV2l0aCgiZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCIpLCBJOwogICAgICBJID0gIkRvdExvdHRpZVBsYXllci53YXNtIjsKICAgICAgaWYgKCFzYShJKSkgewogICAgICAgIHZhciB0YSA9IEk7CiAgICAgICAgSSA9IGsubG9jYXRlRmlsZSA/IGsubG9jYXRlRmlsZSh0YSwgdCkgOiB0ICsgdGE7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdWEoYSkgewogICAgICAgIGlmIChhID09IEkgJiYgeCkgcmV0dXJuIG5ldyBVaW50OEFycmF5KHgpOwogICAgICAgIHRocm93ICJib3RoIGFzeW5jIGFuZCBzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZCI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmEoYSkgewogICAgICAgIHJldHVybiB4IHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIGZldGNoID8gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB1YShhKSkgOiBmZXRjaChhLCB7IGNyZWRlbnRpYWxzOiAic2FtZS1vcmlnaW4iIH0pLnRoZW4oKGIpID0+IHsKICAgICAgICAgIGlmICghYi5vaykgdGhyb3cgYGZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyR7YX0nYDsKICAgICAgICAgIHJldHVybiBiLmFycmF5QnVmZmVyKCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gdWEoYSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhKGEsIGIsIGMpIHsKICAgICAgICByZXR1cm4gdmEoYSkudGhlbigoZCkgPT4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoZCwgYikpLnRoZW4oYywgKGQpID0+IHsKICAgICAgICAgIHcoYGZhaWxlZCB0byBhc3luY2hyb25vdXNseSBwcmVwYXJlIHdhc206ICR7ZH1gKTsKICAgICAgICAgIHJhKGQpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHhhKGEsIGIpIHsKICAgICAgICB2YXIgYyA9IEk7CiAgICAgICAgcmV0dXJuIHggfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcgfHwgc2EoYykgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgZmV0Y2ggPyB3YShjLCBhLCBiKSA6IGZldGNoKGMsIHsgY3JlZGVudGlhbHM6ICJzYW1lLW9yaWdpbiIgfSkudGhlbigKICAgICAgICAgIChkKSA9PiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhkLCBhKS50aGVuKGIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdyhgd2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICR7ZX1gKTsKICAgICAgICAgICAgdygiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24iKTsKICAgICAgICAgICAgcmV0dXJuIHdhKGMsIGEsIGIpOwogICAgICAgICAgfSkKICAgICAgICApOwogICAgICB9CiAgICAgIHZhciB5YSA9IChhKSA9PiB7CiAgICAgICAgZm9yICg7IDAgPCBhLmxlbmd0aDsgKSBhLnNoaWZ0KCkoayk7CiAgICAgIH0sIHphID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFRleHREZWNvZGVyID8gbmV3IFRleHREZWNvZGVyKCJ1dGY4IikgOiB2b2lkIDAsIEogPSAoYSwgYiwgYykgPT4gewogICAgICAgIHZhciBkID0gYiArIGM7CiAgICAgICAgZm9yIChjID0gYjsgYVtjXSAmJiAhKGMgPj0gZCk7ICkgKytjOwogICAgICAgIGlmICgxNiA8IGMgLSBiICYmIGEuYnVmZmVyICYmIHphKSByZXR1cm4gemEuZGVjb2RlKGEuc3ViYXJyYXkoYiwgYykpOwogICAgICAgIGZvciAoZCA9ICIiOyBiIDwgYzsgKSB7CiAgICAgICAgICB2YXIgZSA9IGFbYisrXTsKICAgICAgICAgIGlmIChlICYgMTI4KSB7CiAgICAgICAgICAgIHZhciBmID0gYVtiKytdICYgNjM7CiAgICAgICAgICAgIGlmICgxOTIgPT0gKGUgJiAyMjQpKSBkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGUgJiAzMSkgPDwgNiB8IGYpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB2YXIgbCA9IGFbYisrXSAmIDYzOwogICAgICAgICAgICAgIGUgPSAyMjQgPT0gKGUgJiAyNDApID8gKGUgJiAxNSkgPDwgMTIgfCBmIDw8IDYgfCBsIDogKGUgJiA3KSA8PCAxOCB8IGYgPDwgMTIgfCBsIDw8IDYgfCBhW2IrK10gJiA2MzsKICAgICAgICAgICAgICA2NTUzNiA+IGUgPyBkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiAoZSAtPSA2NTUzNiwgZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2IHwgZSA+PiAxMCwgNTYzMjAgfCBlICYgMTAyMykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZDsKICAgICAgfTsKICAgICAgY2xhc3MgQWEgewogICAgICAgIGNvbnN0cnVjdG9yKGEpIHsKICAgICAgICAgIHRoaXMueWEgPSBhIC0gMjQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBCYSA9IDAsIENhID0gMCwgRGEgPSAoYSkgPT4gewogICAgICAgIGZvciAodmFyIGIgPSAwLCBjID0gMDsgYyA8IGEubGVuZ3RoOyArK2MpIHsKICAgICAgICAgIHZhciBkID0gYS5jaGFyQ29kZUF0KGMpOwogICAgICAgICAgMTI3ID49IGQgPyBiKysgOiAyMDQ3ID49IGQgPyBiICs9IDIgOiA1NTI5NiA8PSBkICYmIDU3MzQzID49IGQgPyAoYiArPSA0LCArK2MpIDogYiArPSAzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYjsKICAgICAgfSwgRWEgPSAoYSwgYiwgYywgZCkgPT4gewogICAgICAgIGlmICgwIDwgZCkgewogICAgICAgICAgZCA9IGMgKyBkIC0gMTsKICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgYS5sZW5ndGg7ICsrZSkgewogICAgICAgICAgICB2YXIgZiA9IGEuY2hhckNvZGVBdChlKTsKICAgICAgICAgICAgaWYgKDU1Mjk2IDw9IGYgJiYgNTczNDMgPj0gZikgewogICAgICAgICAgICAgIHZhciBsID0gYS5jaGFyQ29kZUF0KCsrZSk7CiAgICAgICAgICAgICAgZiA9IDY1NTM2ICsgKChmICYgMTAyMykgPDwgMTApIHwgbCAmIDEwMjM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKDEyNyA+PSBmKSB7CiAgICAgICAgICAgICAgaWYgKGMgPj0gZCkgYnJlYWs7CiAgICAgICAgICAgICAgYltjKytdID0gZjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoMjA0NyA+PSBmKSB7CiAgICAgICAgICAgICAgICBpZiAoYyArIDEgPj0gZCkgYnJlYWs7CiAgICAgICAgICAgICAgICBiW2MrK10gPSAxOTIgfCBmID4+IDY7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICg2NTUzNSA+PSBmKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjICsgMiA+PSBkKSBicmVhazsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMjI0IHwgZiA+PiAxMjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChjICsgMyA+PSBkKSBicmVhazsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMjQwIHwgZiA+PiAxODsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMTI4IHwgZiA+PiAxMiAmIDYzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYltjKytdID0gMTI4IHwgZiA+PiA2ICYgNjM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJbYysrXSA9IDEyOCB8IGYgJiA2MzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYltjXSA9IDA7CiAgICAgICAgfQogICAgICB9LCBGYSA9IHt9LCBHYSA9IChhKSA9PiB7CiAgICAgICAgZm9yICg7IGEubGVuZ3RoOyApIHsKICAgICAgICAgIHZhciBiID0gYS5wb3AoKTsKICAgICAgICAgIGEucG9wKCkoYik7CiAgICAgICAgfQogICAgICB9OwogICAgICBmdW5jdGlvbiBLKGEpIHsKICAgICAgICByZXR1cm4gdGhpcy5mcm9tV2lyZVR5cGUoRlthID4+IDJdKTsKICAgICAgfQogICAgICB2YXIgTCA9IHt9LCBNID0ge30sIEhhID0ge30sIElhLCBQID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBmdW5jdGlvbiBkKGgpIHsKICAgICAgICAgIGggPSBjKGgpOwogICAgICAgICAgaWYgKGgubGVuZ3RoICE9PSBhLmxlbmd0aCkgdGhyb3cgbmV3IElhKCJNaXNtYXRjaGVkIHR5cGUgY29udmVydGVyIGNvdW50Iik7CiAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGEubGVuZ3RoOyArK24pIE8oYVtuXSwgaFtuXSk7CiAgICAgICAgfQogICAgICAgIGEuZm9yRWFjaChmdW5jdGlvbihoKSB7CiAgICAgICAgICBIYVtoXSA9IGI7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGUgPSBBcnJheShiLmxlbmd0aCksIGYgPSBbXSwgbCA9IDA7CiAgICAgICAgYi5mb3JFYWNoKChoLCBuKSA9PiB7CiAgICAgICAgICBNLmhhc093blByb3BlcnR5KGgpID8gZVtuXSA9IE1baF0gOiAoZi5wdXNoKGgpLCBMLmhhc093blByb3BlcnR5KGgpIHx8IChMW2hdID0gW10pLCBMW2hdLnB1c2goKCkgPT4gewogICAgICAgICAgICBlW25dID0gTVtoXTsKICAgICAgICAgICAgKytsOwogICAgICAgICAgICBsID09PSBmLmxlbmd0aCAmJiBkKGUpOwogICAgICAgICAgfSkpOwogICAgICAgIH0pOwogICAgICAgIDAgPT09IGYubGVuZ3RoICYmIGQoZSk7CiAgICAgIH0sIEphLCBRID0gKGEpID0+IHsKICAgICAgICBmb3IgKHZhciBiID0gIiI7IEFbYV07ICkgYiArPSBKYVtBW2ErK11dOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBSOwogICAgICBmdW5jdGlvbiBLYShhLCBiLCBjID0ge30pIHsKICAgICAgICB2YXIgZCA9IGIubmFtZTsKICAgICAgICBpZiAoIWEpIHRocm93IG5ldyBSKGB0eXBlICIke2R9IiBtdXN0IGhhdmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIHR5cGVpZCBwb2ludGVyYCk7CiAgICAgICAgaWYgKE0uaGFzT3duUHJvcGVydHkoYSkpIHsKICAgICAgICAgIGlmIChjLmliKSByZXR1cm47CiAgICAgICAgICB0aHJvdyBuZXcgUihgQ2Fubm90IHJlZ2lzdGVyIHR5cGUgJyR7ZH0nIHR3aWNlYCk7CiAgICAgICAgfQogICAgICAgIE1bYV0gPSBiOwogICAgICAgIGRlbGV0ZSBIYVthXTsKICAgICAgICBMLmhhc093blByb3BlcnR5KGEpICYmIChiID0gTFthXSwgZGVsZXRlIExbYV0sIGIuZm9yRWFjaCgoZSkgPT4gZSgpKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gTyhhLCBiLCBjID0ge30pIHsKICAgICAgICBpZiAoISgiYXJnUGFja0FkdmFuY2UiIGluIGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJyZWdpc3RlclR5cGUgcmVnaXN0ZXJlZEluc3RhbmNlIHJlcXVpcmVzIGFyZ1BhY2tBZHZhbmNlIik7CiAgICAgICAgcmV0dXJuIEthKGEsIGIsIGMpOwogICAgICB9CiAgICAgIHZhciBMYSA9IChhKSA9PiB7CiAgICAgICAgdGhyb3cgbmV3IFIoYS5tYS56YS54YS5uYW1lICsgIiBpbnN0YW5jZSBhbHJlYWR5IGRlbGV0ZWQiKTsKICAgICAgfSwgTWEgPSBmYWxzZSwgT2EgPSAoKSA9PiB7CiAgICAgIH0sIFBhID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAoYiA9PT0gYykgcmV0dXJuIGE7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYy5DYSkgcmV0dXJuIG51bGw7CiAgICAgICAgYSA9IFBhKGEsIGIsIGMuQ2EpOwogICAgICAgIHJldHVybiBudWxsID09PSBhID8gbnVsbCA6IGMuYWIoYSk7CiAgICAgIH0sIFFhID0ge30sIFJhID0gW10sIFNhID0gKCkgPT4gewogICAgICAgIGZvciAoOyBSYS5sZW5ndGg7ICkgewogICAgICAgICAgdmFyIGEgPSBSYS5wb3AoKTsKICAgICAgICAgIGEubWEuS2EgPSBmYWxzZTsKICAgICAgICAgIGFbImRlbGV0ZSJdKCk7CiAgICAgICAgfQogICAgICB9LCBUYSwgVWEgPSB7fSwgVmEgPSAoYSwgYikgPT4gewogICAgICAgIGlmICh2b2lkIDAgPT09IGIpIHRocm93IG5ldyBSKCJwdHIgc2hvdWxkIG5vdCBiZSB1bmRlZmluZWQiKTsKICAgICAgICBmb3IgKDsgYS5DYTsgKSBiID0gYS5OYShiKSwgYSA9IGEuQ2E7CiAgICAgICAgcmV0dXJuIFVhW2JdOwogICAgICB9LCBYYSA9IChhLCBiKSA9PiB7CiAgICAgICAgaWYgKCFiLnphIHx8ICFiLnlhKSB0aHJvdyBuZXcgSWEoIm1ha2VDbGFzc0hhbmRsZSByZXF1aXJlcyBwdHIgYW5kIHB0clR5cGUiKTsKICAgICAgICBpZiAoISFiLkRhICE9PSAhIWIuQWEpIHRocm93IG5ldyBJYSgiQm90aCBzbWFydFB0clR5cGUgYW5kIHNtYXJ0UHRyIG11c3QgYmUgc3BlY2lmaWVkIik7CiAgICAgICAgYi5jb3VudCA9IHsgdmFsdWU6IDEgfTsKICAgICAgICByZXR1cm4gV2EoT2JqZWN0LmNyZWF0ZShhLCB7IG1hOiB7IHZhbHVlOiBiLCB3cml0YWJsZTogdHJ1ZSB9IH0pKTsKICAgICAgfSwgV2EgPSAoYSkgPT4gewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5KSByZXR1cm4gV2EgPSAoYikgPT4gYiwgYTsKICAgICAgICBNYSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoYikgPT4gewogICAgICAgICAgYiA9IGIubWE7CiAgICAgICAgICAtLWIuY291bnQudmFsdWU7CiAgICAgICAgICAwID09PSBiLmNvdW50LnZhbHVlICYmIChiLkFhID8gYi5EYS5GYShiLkFhKSA6IGIuemEueGEuRmEoYi55YSkpOwogICAgICAgIH0pOwogICAgICAgIFdhID0gKGIpID0+IHsKICAgICAgICAgIHZhciBjID0gYi5tYTsKICAgICAgICAgIGMuQWEgJiYgTWEucmVnaXN0ZXIoYiwgeyBtYTogYyB9LCBiKTsKICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH07CiAgICAgICAgT2EgPSAoYikgPT4gewogICAgICAgICAgTWEudW5yZWdpc3RlcihiKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBXYShhKTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gWWEoKSB7CiAgICAgIH0KICAgICAgdmFyIFphID0gKGEsIGIpID0+IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCAibmFtZSIsIHsgdmFsdWU6IGEgfSksICRhID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAodm9pZCAwID09PSBhW2JdLkJhKSB7CiAgICAgICAgICB2YXIgZCA9IGFbYl07CiAgICAgICAgICBhW2JdID0gZnVuY3Rpb24oLi4uZSkgewogICAgICAgICAgICBpZiAoIWFbYl0uQmEuaGFzT3duUHJvcGVydHkoZS5sZW5ndGgpKQogICAgICAgICAgICAgIHRocm93IG5ldyBSKAogICAgICAgICAgICAgICAgYEZ1bmN0aW9uICcke2N9JyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIG51bWJlciBvZiBhcmd1bWVudHMgKCR7ZS5sZW5ndGh9KSAtIGV4cGVjdHMgb25lIG9mICgke2FbYl0uQmF9KSFgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIGFbYl0uQmFbZS5sZW5ndGhdLmFwcGx5KHRoaXMsIGUpOwogICAgICAgICAgfTsKICAgICAgICAgIGFbYl0uQmEgPSBbXTsKICAgICAgICAgIGFbYl0uQmFbZC5PYV0gPSBkOwogICAgICAgIH0KICAgICAgfSwgYWIgPSAoYSwgYiwgYykgPT4gewogICAgICAgIGlmIChrLmhhc093blByb3BlcnR5KGEpKSB7CiAgICAgICAgICBpZiAodm9pZCAwID09PSBjIHx8IHZvaWQgMCAhPT0ga1thXS5CYSAmJiB2b2lkIDAgIT09IGtbYV0uQmFbY10pCiAgICAgICAgICAgIHRocm93IG5ldyBSKGBDYW5ub3QgcmVnaXN0ZXIgcHVibGljIG5hbWUgJyR7YX0nIHR3aWNlYCk7CiAgICAgICAgICAkYShrLCBhLCBhKTsKICAgICAgICAgIGlmIChrLmhhc093blByb3BlcnR5KGMpKQogICAgICAgICAgICB0aHJvdyBuZXcgUihgQ2Fubm90IHJlZ2lzdGVyIG11bHRpcGxlIG92ZXJsb2FkcyBvZiBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyAoJHtjfSkhYCk7CiAgICAgICAgICBrW2FdLkJhW2NdID0gYjsKICAgICAgICB9IGVsc2Uga1thXSA9IGIsIHZvaWQgMCAhPT0gYyAmJiAoa1thXS52YiA9IGMpOwogICAgICB9LCBiYiA9IChhKSA9PiB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYSkgcmV0dXJuICJfdW5rbm93biI7CiAgICAgICAgYSA9IGEucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCAiJCIpOwogICAgICAgIHZhciBiID0gYS5jaGFyQ29kZUF0KDApOwogICAgICAgIHJldHVybiA0OCA8PSBiICYmIDU3ID49IGIgPyBgXyR7YX1gIDogYTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gY2IoYSwgYiwgYywgZCwgZSwgZiwgbCwgaCkgewogICAgICAgIHRoaXMubmFtZSA9IGE7CiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGI7CiAgICAgICAgdGhpcy5MYSA9IGM7CiAgICAgICAgdGhpcy5GYSA9IGQ7CiAgICAgICAgdGhpcy5DYSA9IGU7CiAgICAgICAgdGhpcy5jYiA9IGY7CiAgICAgICAgdGhpcy5OYSA9IGw7CiAgICAgICAgdGhpcy5hYiA9IGg7CiAgICAgICAgdGhpcy5rYiA9IFtdOwogICAgICB9CiAgICAgIHZhciBkYiA9IChhLCBiLCBjKSA9PiB7CiAgICAgICAgZm9yICg7IGIgIT09IGM7ICkgewogICAgICAgICAgaWYgKCFiLk5hKSB0aHJvdyBuZXcgUihgRXhwZWN0ZWQgbnVsbCBvciBpbnN0YW5jZSBvZiAke2MubmFtZX0sIGdvdCBhbiBpbnN0YW5jZSBvZiAke2IubmFtZX1gKTsKICAgICAgICAgIGEgPSBiLk5hKGEpOwogICAgICAgICAgYiA9IGIuQ2E7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhOwogICAgICB9OwogICAgICBmdW5jdGlvbiBlYihhLCBiKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGIpIHsKICAgICAgICAgIGlmICh0aGlzLlRhKSB0aHJvdyBuZXcgUihgbnVsbCBpcyBub3QgYSB2YWxpZCAke3RoaXMubmFtZX1gKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoIWIubWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyAiJHtmYihiKX0iIGFzIGEgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCFiLm1hLnlhKSB0aHJvdyBuZXcgUihgQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgcmV0dXJuIGRiKGIubWEueWEsIGIubWEuemEueGEsIHRoaXMueGEpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdiKGEsIGIpIHsKICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgaWYgKHRoaXMuVGEpIHRocm93IG5ldyBSKGBudWxsIGlzIG5vdCBhIHZhbGlkICR7dGhpcy5uYW1lfWApOwogICAgICAgICAgaWYgKHRoaXMuUWEpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzLlVhKCk7CiAgICAgICAgICAgIG51bGwgIT09IGEgJiYgYS5wdXNoKHRoaXMuRmEsIGMpOwogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoIWIgfHwgIWIubWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyAiJHtmYihiKX0iIGFzIGEgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCFiLm1hLnlhKSB0aHJvdyBuZXcgUihgQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCF0aGlzLlBhICYmIGIubWEuemEuUGEpCiAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLkRhID8gYi5tYS5EYS5uYW1lIDogYi5tYS56YS5uYW1lfSB0byBwYXJhbWV0ZXIgdHlwZSAke3RoaXMubmFtZX1gCiAgICAgICAgICApOwogICAgICAgIGMgPSBkYihiLm1hLnlhLCBiLm1hLnphLnhhLCB0aGlzLnhhKTsKICAgICAgICBpZiAodGhpcy5RYSkgewogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gYi5tYS5BYSkgdGhyb3cgbmV3IFIoIlBhc3NpbmcgcmF3IHBvaW50ZXIgdG8gc21hcnQgcG9pbnRlciBpcyBpbGxlZ2FsIik7CiAgICAgICAgICBzd2l0Y2ggKHRoaXMucGIpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChiLm1hLkRhID09PSB0aGlzKSBjID0gYi5tYS5BYTsKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgICAgYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLkRhID8gYi5tYS5EYS5uYW1lIDogYi5tYS56YS5uYW1lfSB0byBwYXJhbWV0ZXIgdHlwZSAke3RoaXMubmFtZX1gCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgYyA9IGIubWEuQWE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoYi5tYS5EYSA9PT0gdGhpcykgYyA9IGIubWEuQWE7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGIuY2xvbmUoKTsKICAgICAgICAgICAgICAgIGMgPSB0aGlzLmxiKAogICAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgICBoYigoKSA9PiBkWyJkZWxldGUiXSgpKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIG51bGwgIT09IGEgJiYgYS5wdXNoKHRoaXMuRmEsIGMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBuZXcgUigiVW5zdXBwb3J0aW5nIHNoYXJpbmcgcG9saWN5Iik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGliKGEsIGIpIHsKICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgaWYgKHRoaXMuVGEpIHRocm93IG5ldyBSKGBudWxsIGlzIG5vdCBhIHZhbGlkICR7dGhpcy5uYW1lfWApOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICghYi5tYSkgdGhyb3cgbmV3IFIoYENhbm5vdCBwYXNzICIke2ZiKGIpfSIgYXMgYSAke3RoaXMubmFtZX1gKTsKICAgICAgICBpZiAoIWIubWEueWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyBkZWxldGVkIG9iamVjdCBhcyBhIHBvaW50ZXIgb2YgdHlwZSAke3RoaXMubmFtZX1gKTsKICAgICAgICBpZiAoYi5tYS56YS5QYSkgdGhyb3cgbmV3IFIoYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLnphLm5hbWV9IHRvIHBhcmFtZXRlciB0eXBlICR7dGhpcy5uYW1lfWApOwogICAgICAgIHJldHVybiBkYihiLm1hLnlhLCBiLm1hLnphLnhhLCB0aGlzLnhhKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBqYihhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuLCBtLCBwKSB7CiAgICAgICAgdGhpcy5uYW1lID0gYTsKICAgICAgICB0aGlzLnhhID0gYjsKICAgICAgICB0aGlzLlRhID0gYzsKICAgICAgICB0aGlzLlBhID0gZDsKICAgICAgICB0aGlzLlFhID0gZTsKICAgICAgICB0aGlzLmpiID0gZjsKICAgICAgICB0aGlzLnBiID0gbDsKICAgICAgICB0aGlzLlphID0gaDsKICAgICAgICB0aGlzLlVhID0gbjsKICAgICAgICB0aGlzLmxiID0gbTsKICAgICAgICB0aGlzLkZhID0gcDsKICAgICAgICBlIHx8IHZvaWQgMCAhPT0gYi5DYSA/IHRoaXMudG9XaXJlVHlwZSA9IGdiIDogKHRoaXMudG9XaXJlVHlwZSA9IGQgPyBlYiA6IGliLCB0aGlzLkVhID0gbnVsbCk7CiAgICAgIH0KICAgICAgdmFyIGtiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAoIWsuaGFzT3duUHJvcGVydHkoYSkpIHRocm93IG5ldyBJYSgiUmVwbGFjaW5nIG5vbmV4aXN0ZW50IHB1YmxpYyBzeW1ib2wiKTsKICAgICAgICB2b2lkIDAgIT09IGtbYV0uQmEgJiYgdm9pZCAwICE9PSBjID8ga1thXS5CYVtjXSA9IGIgOiAoa1thXSA9IGIsIGtbYV0uT2EgPSBjKTsKICAgICAgfSwgUywgbGIgPSAoYSwgYiwgYyA9IFtdKSA9PiB7CiAgICAgICAgYS5pbmNsdWRlcygiaiIpID8gKGEgPSBhLnJlcGxhY2UoL3AvZywgImkiKSwgYiA9ICgwLCBrWyJkeW5DYWxsXyIgKyBhXSkoYiwgLi4uYykpIDogYiA9IFMuZ2V0KGIpKC4uLmMpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBtYiA9IChhLCBiKSA9PiAoLi4uYykgPT4gbGIoYSwgYiwgYyksIFQgPSAoYSwgYikgPT4gewogICAgICAgIGEgPSBRKGEpOwogICAgICAgIHZhciBjID0gYS5pbmNsdWRlcygiaiIpID8gbWIoYSwgYikgOiBTLmdldChiKTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYykgdGhyb3cgbmV3IFIoYHVua25vd24gZnVuY3Rpb24gcG9pbnRlciB3aXRoIHNpZ25hdHVyZSAke2F9OiAke2J9YCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0sIG5iLCBwYiA9IChhKSA9PiB7CiAgICAgICAgYSA9IG9iKGEpOwogICAgICAgIHZhciBiID0gUShhKTsKICAgICAgICBVKGEpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBxYiA9IChhLCBiKSA9PiB7CiAgICAgICAgZnVuY3Rpb24gYyhmKSB7CiAgICAgICAgICBlW2ZdIHx8IE1bZl0gfHwgKEhhW2ZdID8gSGFbZl0uZm9yRWFjaChjKSA6IChkLnB1c2goZiksIGVbZl0gPSB0cnVlKSk7CiAgICAgICAgfQogICAgICAgIHZhciBkID0gW10sIGUgPSB7fTsKICAgICAgICBiLmZvckVhY2goYyk7CiAgICAgICAgdGhyb3cgbmV3IG5iKGAke2F9OiBgICsgZC5tYXAocGIpLmpvaW4oWyIsICJdKSk7CiAgICAgIH0sIHJiID0gKGEsIGIpID0+IHsKICAgICAgICBmb3IgKHZhciBjID0gW10sIGQgPSAwOyBkIDwgYTsgZCsrKSBjLnB1c2goRltiICsgNCAqIGQgPj4gMl0pOwogICAgICAgIHJldHVybiBjOwogICAgICB9OwogICAgICBmdW5jdGlvbiBzYihhKSB7CiAgICAgICAgZm9yICh2YXIgYiA9IDE7IGIgPCBhLmxlbmd0aDsgKytiKSBpZiAobnVsbCAhPT0gYVtiXSAmJiB2b2lkIDAgPT09IGFbYl0uRWEpIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0YihhLCBiLCBjLCBkLCBlKSB7CiAgICAgICAgdmFyIGYgPSBiLmxlbmd0aDsKICAgICAgICBpZiAoMiA+IGYpIHRocm93IG5ldyBSKCJhcmdUeXBlcyBhcnJheSBzaXplIG1pc21hdGNoISBNdXN0IGF0IGxlYXN0IGdldCByZXR1cm4gdmFsdWUgYW5kICd0aGlzJyB0eXBlcyEiKTsKICAgICAgICB2YXIgbCA9IG51bGwgIT09IGJbMV0gJiYgbnVsbCAhPT0gYywgaCA9IHNiKGIpLCBuID0gInZvaWQiICE9PSBiWzBdLm5hbWUsIG0gPSBmIC0gMiwgcCA9IEFycmF5KG0pLCB1ID0gW10sIHYgPSBbXTsKICAgICAgICByZXR1cm4gWmEoYSwgZnVuY3Rpb24oLi4uZykgewogICAgICAgICAgaWYgKGcubGVuZ3RoICE9PSBtKSB0aHJvdyBuZXcgUihgZnVuY3Rpb24gJHthfSBjYWxsZWQgd2l0aCAke2cubGVuZ3RofSBhcmd1bWVudHMsIGV4cGVjdGVkICR7bX1gKTsKICAgICAgICAgIHYubGVuZ3RoID0gMDsKICAgICAgICAgIHUubGVuZ3RoID0gbCA/IDIgOiAxOwogICAgICAgICAgdVswXSA9IGU7CiAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICB2YXIgcSA9IGJbMV0udG9XaXJlVHlwZSh2LCB0aGlzKTsKICAgICAgICAgICAgdVsxXSA9IHE7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IG07ICsrcikgcFtyXSA9IGJbciArIDJdLnRvV2lyZVR5cGUodiwgZ1tyXSksIHUucHVzaChwW3JdKTsKICAgICAgICAgIGcgPSBkKC4uLnUpOwogICAgICAgICAgaWYgKGgpIEdhKHYpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBmb3IgKHIgPSBsID8gMSA6IDI7IHIgPCBiLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgdmFyIHogPSAxID09PSByID8gcSA6IHBbciAtIDJdOwogICAgICAgICAgICAgIG51bGwgIT09IGJbcl0uRWEgJiYgYltyXS5FYSh6KTsKICAgICAgICAgICAgfQogICAgICAgICAgcSA9IG4gPyBiWzBdLmZyb21XaXJlVHlwZShnKSA6IHZvaWQgMDsKICAgICAgICAgIHJldHVybiBxOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciB1YiA9IChhKSA9PiB7CiAgICAgICAgYSA9IGEudHJpbSgpOwogICAgICAgIGNvbnN0IGIgPSBhLmluZGV4T2YoIigiKTsKICAgICAgICByZXR1cm4gLTEgIT09IGIgPyBhLnN1YnN0cigwLCBiKSA6IGE7CiAgICAgIH0sIHZiID0gW10sIFYgPSBbXSwgd2IgPSAoYSkgPT4gewogICAgICAgIDkgPCBhICYmIDAgPT09IC0tVlthICsgMV0gJiYgKFZbYV0gPSB2b2lkIDAsIHZiLnB1c2goYSkpOwogICAgICB9LCB5YiA9IChhKSA9PiB7CiAgICAgICAgaWYgKCFhKSB0aHJvdyBuZXcgUigiQ2Fubm90IHVzZSBkZWxldGVkIHZhbC4gaGFuZGxlID0gIiArIGEpOwogICAgICAgIHJldHVybiBWW2FdOwogICAgICB9LCBoYiA9IChhKSA9PiB7CiAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICBjYXNlIHZvaWQgMDoKICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgICBjYXNlIG51bGw6CiAgICAgICAgICAgIHJldHVybiA0OwogICAgICAgICAgY2FzZSB0cnVlOgogICAgICAgICAgICByZXR1cm4gNjsKICAgICAgICAgIGNhc2UgZmFsc2U6CiAgICAgICAgICAgIHJldHVybiA4OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgY29uc3QgYiA9IHZiLnBvcCgpIHx8IFYubGVuZ3RoOwogICAgICAgICAgICBWW2JdID0gYTsKICAgICAgICAgICAgVltiICsgMV0gPSAxOwogICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICB9CiAgICAgIH0sIHpiID0gewogICAgICAgIG5hbWU6ICJlbXNjcmlwdGVuOjp2YWwiLAogICAgICAgIGZyb21XaXJlVHlwZTogKGEpID0+IHsKICAgICAgICAgIHZhciBiID0geWIoYSk7CiAgICAgICAgICB3YihhKTsKICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH0sCiAgICAgICAgdG9XaXJlVHlwZTogKGEsIGIpID0+IGhiKGIpLAogICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBLLAogICAgICAgIEVhOiBudWxsCiAgICAgIH0sIEFiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBzd2l0Y2ggKGIpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKHlbZF0pOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShBW2RdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKEJbZCA+PiAxXSk7CiAgICAgICAgICAgIH0gOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKENbZCA+PiAxXSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBjID8gZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShFW2QgPj4gMl0pOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShGW2QgPj4gMl0pOwogICAgICAgICAgICB9OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgaW52YWxpZCBpbnRlZ2VyIHdpZHRoICgke2J9KTogJHthfWApOwogICAgICAgIH0KICAgICAgfSwgQmIgPSAoYSwgYikgPT4gewogICAgICAgIHZhciBjID0gTVthXTsKICAgICAgICBpZiAodm9pZCAwID09PSBjKSB0aHJvdyBhID0gYCR7Yn0gaGFzIHVua25vd24gdHlwZSAke3BiKGEpfWAsIG5ldyBSKGEpOwogICAgICAgIHJldHVybiBjOwogICAgICB9LCBmYiA9IChhKSA9PiB7CiAgICAgICAgaWYgKG51bGwgPT09IGEpIHJldHVybiAibnVsbCI7CiAgICAgICAgdmFyIGIgPSB0eXBlb2YgYTsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT09IGIgfHwgImFycmF5IiA9PT0gYiB8fCAiZnVuY3Rpb24iID09PSBiID8gYS50b1N0cmluZygpIDogIiIgKyBhOwogICAgICB9LCBDYiA9IChhLCBiKSA9PiB7CiAgICAgICAgc3dpdGNoIChiKSB7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKGphW2MgPj4gMl0pOwogICAgICAgICAgICB9OwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYykgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShrYVtjID4+IDNdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgZmxvYXQgd2lkdGggKCR7Yn0pOiAke2F9YCk7CiAgICAgICAgfQogICAgICB9LCBEYiA9IChhLCBiLCBjKSA9PiB7CiAgICAgICAgc3dpdGNoIChiKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBjID8gKGQpID0+IHlbZF0gOiAoZCkgPT4gQVtkXTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGMgPyAoZCkgPT4gQltkID4+IDFdIDogKGQpID0+IENbZCA+PiAxXTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIGMgPyAoZCkgPT4gRVtkID4+IDJdIDogKGQpID0+IEZbZCA+PiAyXTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgaW50ZWdlciB3aWR0aCAoJHtifSk6ICR7YX1gKTsKICAgICAgICB9CiAgICAgIH0sIEViID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFRleHREZWNvZGVyID8gbmV3IFRleHREZWNvZGVyKCJ1dGYtMTZsZSIpIDogdm9pZCAwLCBGYiA9IChhLCBiKSA9PiB7CiAgICAgICAgdmFyIGMgPSBhID4+IDE7CiAgICAgICAgZm9yICh2YXIgZCA9IGMgKyBiIC8gMjsgIShjID49IGQpICYmIENbY107ICkgKytjOwogICAgICAgIGMgPDw9IDE7CiAgICAgICAgaWYgKDMyIDwgYyAtIGEgJiYgRWIpIHJldHVybiBFYi5kZWNvZGUoQS5zdWJhcnJheShhLCBjKSk7CiAgICAgICAgYyA9ICIiOwogICAgICAgIGZvciAoZCA9IDA7ICEoZCA+PSBiIC8gMik7ICsrZCkgewogICAgICAgICAgdmFyIGUgPSBCW2EgKyAyICogZCA+PiAxXTsKICAgICAgICAgIGlmICgwID09IGUpIGJyZWFrOwogICAgICAgICAgYyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYzsKICAgICAgfSwgR2IgPSAoYSwgYiwgYykgPT4gewogICAgICAgIGMgPz8gKGMgPSAyMTQ3NDgzNjQ3KTsKICAgICAgICBpZiAoMiA+IGMpIHJldHVybiAwOwogICAgICAgIGMgLT0gMjsKICAgICAgICB2YXIgZCA9IGI7CiAgICAgICAgYyA9IGMgPCAyICogYS5sZW5ndGggPyBjIC8gMiA6IGEubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgYzsgKytlKSBCW2IgPj4gMV0gPSBhLmNoYXJDb2RlQXQoZSksIGIgKz0gMjsKICAgICAgICBCW2IgPj4gMV0gPSAwOwogICAgICAgIHJldHVybiBiIC0gZDsKICAgICAgfSwgSGIgPSAoYSkgPT4gMiAqIGEubGVuZ3RoLCBJYiA9IChhLCBiKSA9PiB7CiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGQgPSAiIjsgIShjID49IGIgLyA0KTsgKSB7CiAgICAgICAgICB2YXIgZSA9IEVbYSArIDQgKiBjID4+IDJdOwogICAgICAgICAgaWYgKDAgPT0gZSkgYnJlYWs7CiAgICAgICAgICArK2M7CiAgICAgICAgICA2NTUzNiA8PSBlID8gKGUgLT0gNjU1MzYsIGQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NiB8IGUgPj4gMTAsIDU2MzIwIHwgZSAmIDEwMjMpKSA6IGQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGQ7CiAgICAgIH0sIEpiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBjID8/IChjID0gMjE0NzQ4MzY0Nyk7CiAgICAgICAgaWYgKDQgPiBjKSByZXR1cm4gMDsKICAgICAgICB2YXIgZCA9IGI7CiAgICAgICAgYyA9IGQgKyBjIC0gNDsKICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGEubGVuZ3RoOyArK2UpIHsKICAgICAgICAgIHZhciBmID0gYS5jaGFyQ29kZUF0KGUpOwogICAgICAgICAgaWYgKDU1Mjk2IDw9IGYgJiYgNTczNDMgPj0gZikgewogICAgICAgICAgICB2YXIgbCA9IGEuY2hhckNvZGVBdCgrK2UpOwogICAgICAgICAgICBmID0gNjU1MzYgKyAoKGYgJiAxMDIzKSA8PCAxMCkgfCBsICYgMTAyMzsKICAgICAgICAgIH0KICAgICAgICAgIEVbYiA+PiAyXSA9IGY7CiAgICAgICAgICBiICs9IDQ7CiAgICAgICAgICBpZiAoYiArIDQgPiBjKSBicmVhazsKICAgICAgICB9CiAgICAgICAgRVtiID4+IDJdID0gMDsKICAgICAgICByZXR1cm4gYiAtIGQ7CiAgICAgIH0sIEtiID0gKGEpID0+IHsKICAgICAgICBmb3IgKHZhciBiID0gMCwgYyA9IDA7IGMgPCBhLmxlbmd0aDsgKytjKSB7CiAgICAgICAgICB2YXIgZCA9IGEuY2hhckNvZGVBdChjKTsKICAgICAgICAgIDU1Mjk2IDw9IGQgJiYgNTczNDMgPj0gZCAmJiArK2M7CiAgICAgICAgICBiICs9IDQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiOwogICAgICB9LCBMYiA9IFtdLCBNYiA9IChhKSA9PiB7CiAgICAgICAgdmFyIGIgPSBMYi5sZW5ndGg7CiAgICAgICAgTGIucHVzaChhKTsKICAgICAgICByZXR1cm4gYjsKICAgICAgfSwgTmIgPSAoYSwgYikgPT4gewogICAgICAgIGZvciAodmFyIGMgPSBBcnJheShhKSwgZCA9IDA7IGQgPCBhOyArK2QpIGNbZF0gPSBCYihGW2IgKyA0ICogZCA+PiAyXSwgInBhcmFtZXRlciAiICsgZCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0sIE9iID0gUmVmbGVjdC5jb25zdHJ1Y3QsIFBiID0ge30sIFJiID0gKCkgPT4gewogICAgICAgIGlmICghUWIpIHsKICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICBVU0VSOiAid2ViX3VzZXIiLAogICAgICAgICAgICBMT0dOQU1FOiAid2ViX3VzZXIiLAogICAgICAgICAgICBQQVRIOiAiLyIsCiAgICAgICAgICAgIFBXRDogIi8iLAogICAgICAgICAgICBIT01FOiAiL2hvbWUvd2ViX3VzZXIiLAogICAgICAgICAgICBMQU5HOiAoIm9iamVjdCIgPT0gdHlwZW9mIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IubGFuZ3VhZ2VzICYmIG5hdmlnYXRvci5sYW5ndWFnZXNbMF0gfHwgIkMiKS5yZXBsYWNlKAogICAgICAgICAgICAgICItIiwKICAgICAgICAgICAgICAiXyIKICAgICAgICAgICAgKSArICIuVVRGLTgiLAogICAgICAgICAgICBfOiBkYSB8fCAiLi90aGlzLnByb2dyYW0iCiAgICAgICAgICB9LCBiOwogICAgICAgICAgZm9yIChiIGluIFBiKSB2b2lkIDAgPT09IFBiW2JdID8gZGVsZXRlIGFbYl0gOiBhW2JdID0gUGJbYl07CiAgICAgICAgICB2YXIgYyA9IFtdOwogICAgICAgICAgZm9yIChiIGluIGEpIGMucHVzaChgJHtifT0ke2FbYl19YCk7CiAgICAgICAgICBRYiA9IGM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBRYjsKICAgICAgfSwgUWIsIFNiID0gW251bGwsIFtdLCBbXV0sIFRiID0gKCkgPT4gewogICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgY3J5cHRvICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpCiAgICAgICAgICByZXR1cm4gKGEpID0+IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYSk7CiAgICAgICAgcmEoImluaXRSYW5kb21EZXZpY2UiKTsKICAgICAgfSwgVWIgPSAoYSkgPT4gKFViID0gVGIoKSkoYSksIFZiID0gKGEpID0+IDAgPT09IGEgJSA0ICYmICgwICE9PSBhICUgMTAwIHx8IDAgPT09IGEgJSA0MDApLCBXYiA9IFszMSwgMjksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXSwgWGIgPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07CiAgICAgIGZ1bmN0aW9uIFliKGEpIHsKICAgICAgICB2YXIgYiA9IEFycmF5KERhKGEpICsgMSk7CiAgICAgICAgRWEoYSwgYiwgMCwgYi5sZW5ndGgpOwogICAgICAgIHJldHVybiBiOwogICAgICB9CiAgICAgIHZhciBaYiA9IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgZnVuY3Rpb24gZShnLCBxLCByKSB7CiAgICAgICAgICBmb3IgKGcgPSAibnVtYmVyIiA9PSB0eXBlb2YgZyA/IGcudG9TdHJpbmcoKSA6IGcgfHwgIiI7IGcubGVuZ3RoIDwgcTsgKSBnID0gclswXSArIGc7CiAgICAgICAgICByZXR1cm4gZzsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihnLCBxKSB7CiAgICAgICAgICByZXR1cm4gZShnLCBxLCAiMCIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGcsIHEpIHsKICAgICAgICAgIGZ1bmN0aW9uIHIoTikgewogICAgICAgICAgICByZXR1cm4gMCA+IE4gPyAtMSA6IDAgPCBOID8gMSA6IDA7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgejsKICAgICAgICAgIDAgPT09ICh6ID0gcihnLmdldEZ1bGxZZWFyKCkgLSBxLmdldEZ1bGxZZWFyKCkpKSAmJiAwID09PSAoeiA9IHIoZy5nZXRNb250aCgpIC0gcS5nZXRNb250aCgpKSkgJiYgKHogPSByKGcuZ2V0RGF0ZSgpIC0gcS5nZXREYXRlKCkpKTsKICAgICAgICAgIHJldHVybiB6OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoKGcpIHsKICAgICAgICAgIHN3aXRjaCAoZy5nZXREYXkoKSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSAtIDEsIDExLCAyOSk7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICByZXR1cm4gZzsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCksIDAsIDMpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSwgMCwgMik7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZy5nZXRGdWxsWWVhcigpLCAwLCAxKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCkgLSAxLCAxMSwgMzEpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSAtIDEsIDExLCAzMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG4oZykgewogICAgICAgICAgdmFyIHEgPSBnLklhOwogICAgICAgICAgZm9yIChnID0gbmV3IERhdGUobmV3IERhdGUoZy5KYSArIDE5MDAsIDAsIDEpLmdldFRpbWUoKSk7IDAgPCBxOyApIHsKICAgICAgICAgICAgdmFyIHIgPSBnLmdldE1vbnRoKCksIHogPSAoVmIoZy5nZXRGdWxsWWVhcigpKSA/IFdiIDogWGIpW3JdOwogICAgICAgICAgICBpZiAocSA+IHogLSBnLmdldERhdGUoKSkKICAgICAgICAgICAgICBxIC09IHogLSBnLmdldERhdGUoKSArIDEsIGcuc2V0RGF0ZSgxKSwgMTEgPiByID8gZy5zZXRNb250aChyICsgMSkgOiAoZy5zZXRNb250aCgwKSwgZy5zZXRGdWxsWWVhcihnLmdldEZ1bGxZZWFyKCkgKyAxKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGcuc2V0RGF0ZShnLmdldERhdGUoKSArIHEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByID0gbmV3IERhdGUoZy5nZXRGdWxsWWVhcigpICsgMSwgMCwgNCk7CiAgICAgICAgICBxID0gaChuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCksIDAsIDQpKTsKICAgICAgICAgIHIgPSBoKHIpOwogICAgICAgICAgcmV0dXJuIDAgPj0gbChxLCBnKSA/IDAgPj0gbChyLCBnKSA/IGcuZ2V0RnVsbFllYXIoKSArIDEgOiBnLmdldEZ1bGxZZWFyKCkgOiBnLmdldEZ1bGxZZWFyKCkgLSAxOwogICAgICAgIH0KICAgICAgICB2YXIgbSA9IEZbZCArIDQwID4+IDJdOwogICAgICAgIGQgPSB7CiAgICAgICAgICBzYjogRVtkID4+IDJdLAogICAgICAgICAgcmI6IEVbZCArIDQgPj4gMl0sCiAgICAgICAgICBSYTogRVtkICsgOCA+PiAyXSwKICAgICAgICAgIFZhOiBFW2QgKyAxMiA+PiAyXSwKICAgICAgICAgIFNhOiBFW2QgKyAxNiA+PiAyXSwKICAgICAgICAgIEphOiBFW2QgKyAyMCA+PiAyXSwKICAgICAgICAgIEdhOiBFW2QgKyAyNCA+PiAyXSwKICAgICAgICAgIElhOiBFW2QgKyAyOCA+PiAyXSwKICAgICAgICAgIHdiOiBFW2QgKyAzMiA+PiAyXSwKICAgICAgICAgIHFiOiBFW2QgKyAzNiA+PiAyXSwKICAgICAgICAgIHRiOiBtID8gbSA/IEooQSwgbSkgOiAiIiA6ICIiCiAgICAgICAgfTsKICAgICAgICBjID0gYyA/IEooQSwgYykgOiAiIjsKICAgICAgICBtID0gewogICAgICAgICAgIiVjIjogIiVhICViICVkICVIOiVNOiVTICVZIiwKICAgICAgICAgICIlRCI6ICIlbS8lZC8leSIsCiAgICAgICAgICAiJUYiOiAiJVktJW0tJWQiLAogICAgICAgICAgIiVoIjogIiViIiwKICAgICAgICAgICIlciI6ICIlSTolTTolUyAlcCIsCiAgICAgICAgICAiJVIiOiAiJUg6JU0iLAogICAgICAgICAgIiVUIjogIiVIOiVNOiVTIiwKICAgICAgICAgICIleCI6ICIlbS8lZC8leSIsCiAgICAgICAgICAiJVgiOiAiJUg6JU06JVMiLAogICAgICAgICAgIiVFYyI6ICIlYyIsCiAgICAgICAgICAiJUVDIjogIiVDIiwKICAgICAgICAgICIlRXgiOiAiJW0vJWQvJXkiLAogICAgICAgICAgIiVFWCI6ICIlSDolTTolUyIsCiAgICAgICAgICAiJUV5IjogIiV5IiwKICAgICAgICAgICIlRVkiOiAiJVkiLAogICAgICAgICAgIiVPZCI6ICIlZCIsCiAgICAgICAgICAiJU9lIjogIiVlIiwKICAgICAgICAgICIlT0giOiAiJUgiLAogICAgICAgICAgIiVPSSI6ICIlSSIsCiAgICAgICAgICAiJU9tIjogIiVtIiwKICAgICAgICAgICIlT00iOiAiJU0iLAogICAgICAgICAgIiVPUyI6ICIlUyIsCiAgICAgICAgICAiJU91IjogIiV1IiwKICAgICAgICAgICIlT1UiOiAiJVUiLAogICAgICAgICAgIiVPViI6ICIlViIsCiAgICAgICAgICAiJU93IjogIiV3IiwKICAgICAgICAgICIlT1ciOiAiJVciLAogICAgICAgICAgIiVPeSI6ICIleSIKICAgICAgICB9OwogICAgICAgIGZvciAodmFyIHAgaW4gbSkgYyA9IGMucmVwbGFjZShuZXcgUmVnRXhwKHAsICJnIiksIG1bcF0pOwogICAgICAgIHZhciB1ID0gIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5Ii5zcGxpdCgiICIpLCB2ID0gIkphbnVhcnkgRmVicnVhcnkgTWFyY2ggQXByaWwgTWF5IEp1bmUgSnVseSBBdWd1c3QgU2VwdGVtYmVyIE9jdG9iZXIgTm92ZW1iZXIgRGVjZW1iZXIiLnNwbGl0KCIgIik7CiAgICAgICAgbSA9IHsKICAgICAgICAgICIlYSI6IChnKSA9PiB1W2cuR2FdLnN1YnN0cmluZygwLCAzKSwKICAgICAgICAgICIlQSI6IChnKSA9PiB1W2cuR2FdLAogICAgICAgICAgIiViIjogKGcpID0+IHZbZy5TYV0uc3Vic3RyaW5nKDAsIDMpLAogICAgICAgICAgIiVCIjogKGcpID0+IHZbZy5TYV0sCiAgICAgICAgICAiJUMiOiAoZykgPT4gZigoZy5KYSArIDE5MDApIC8gMTAwIHwgMCwgMiksCiAgICAgICAgICAiJWQiOiAoZykgPT4gZihnLlZhLCAyKSwKICAgICAgICAgICIlZSI6IChnKSA9PiBlKGcuVmEsIDIsICIgIiksCiAgICAgICAgICAiJWciOiAoZykgPT4gbihnKS50b1N0cmluZygpLnN1YnN0cmluZygyKSwKICAgICAgICAgICIlRyI6IG4sCiAgICAgICAgICAiJUgiOiAoZykgPT4gZihnLlJhLCAyKSwKICAgICAgICAgICIlSSI6IChnKSA9PiB7CiAgICAgICAgICAgIGcgPSBnLlJhOwogICAgICAgICAgICAwID09IGcgPyBnID0gMTIgOiAxMiA8IGcgJiYgKGcgLT0gMTIpOwogICAgICAgICAgICByZXR1cm4gZihnLCAyKTsKICAgICAgICAgIH0sCiAgICAgICAgICAiJWoiOiAoZykgPT4gewogICAgICAgICAgICBmb3IgKHZhciBxID0gMCwgciA9IDA7IHIgPD0gZy5TYSAtIDE7IHEgKz0gKFZiKGcuSmEgKyAxOTAwKSA/IFdiIDogWGIpW3IrK10pIDsKICAgICAgICAgICAgcmV0dXJuIGYoZy5WYSArIHEsIDMpOwogICAgICAgICAgfSwKICAgICAgICAgICIlbSI6IChnKSA9PiBmKGcuU2EgKyAxLCAyKSwKICAgICAgICAgICIlTSI6IChnKSA9PiBmKGcucmIsIDIpLAogICAgICAgICAgIiVuIjogKCkgPT4gIlxuIiwKICAgICAgICAgICIlcCI6IChnKSA9PiAwIDw9IGcuUmEgJiYgMTIgPiBnLlJhID8gIkFNIiA6ICJQTSIsCiAgICAgICAgICAiJVMiOiAoZykgPT4gZihnLnNiLCAyKSwKICAgICAgICAgICIldCI6ICgpID0+ICIJIiwKICAgICAgICAgICIldSI6IChnKSA9PiBnLkdhIHx8IDcsCiAgICAgICAgICAiJVUiOiAoZykgPT4gZihNYXRoLmZsb29yKChnLklhICsgNyAtIGcuR2EpIC8gNyksIDIpLAogICAgICAgICAgIiVWIjogKGcpID0+IHsKICAgICAgICAgICAgdmFyIHEgPSBNYXRoLmZsb29yKChnLklhICsgNyAtIChnLkdhICsgNikgJSA3KSAvIDcpOwogICAgICAgICAgICAyID49IChnLkdhICsgMzcxIC0gZy5JYSAtIDIpICUgNyAmJiBxKys7CiAgICAgICAgICAgIGlmIChxKSA1MyA9PSBxICYmIChyID0gKGcuR2EgKyAzNzEgLSBnLklhKSAlIDcsIDQgPT0gciB8fCAzID09IHIgJiYgVmIoZy5KYSkgfHwgKHEgPSAxKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHEgPSA1MjsKICAgICAgICAgICAgICB2YXIgciA9IChnLkdhICsgNyAtIGcuSWEgLSAxKSAlIDc7CiAgICAgICAgICAgICAgKDQgPT0gciB8fCA1ID09IHIgJiYgVmIoZy5KYSAlIDQwMCAtIDEpKSAmJiBxKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGYocSwgMik7CiAgICAgICAgICB9LAogICAgICAgICAgIiV3IjogKGcpID0+IGcuR2EsCiAgICAgICAgICAiJVciOiAoZykgPT4gZihNYXRoLmZsb29yKChnLklhICsgNyAtIChnLkdhICsgNikgJSA3KSAvIDcpLCAyKSwKICAgICAgICAgICIleSI6IChnKSA9PiAoZy5KYSArIDE5MDApLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpLAogICAgICAgICAgIiVZIjogKGcpID0+IGcuSmEgKyAxOTAwLAogICAgICAgICAgIiV6IjogKGcpID0+IHsKICAgICAgICAgICAgZyA9IGcucWI7CiAgICAgICAgICAgIHZhciBxID0gMCA8PSBnOwogICAgICAgICAgICBnID0gTWF0aC5hYnMoZykgLyA2MDsKICAgICAgICAgICAgcmV0dXJuIChxID8gIisiIDogIi0iKSArIFN0cmluZygiMDAwMCIgKyAoZyAvIDYwICogMTAwICsgZyAlIDYwKSkuc2xpY2UoLTQpOwogICAgICAgICAgfSwKICAgICAgICAgICIlWiI6IChnKSA9PiBnLnRiLAogICAgICAgICAgIiUlIjogKCkgPT4gIiUiCiAgICAgICAgfTsKICAgICAgICBjID0gYy5yZXBsYWNlKC8lJS9nLCAiXDBcMCIpOwogICAgICAgIGZvciAocCBpbiBtKSBjLmluY2x1ZGVzKHApICYmIChjID0gYy5yZXBsYWNlKG5ldyBSZWdFeHAocCwgImciKSwgbVtwXShkKSkpOwogICAgICAgIGMgPSBjLnJlcGxhY2UoL1wwXDAvZywgIiUiKTsKICAgICAgICBwID0gWWIoYyk7CiAgICAgICAgaWYgKHAubGVuZ3RoID4gYikgcmV0dXJuIDA7CiAgICAgICAgeS5zZXQocCwgYSk7CiAgICAgICAgcmV0dXJuIHAubGVuZ3RoIC0gMTsKICAgICAgfTsKICAgICAgSWEgPSBrLkludGVybmFsRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgICAgICBjb25zdHJ1Y3RvcihhKSB7CiAgICAgICAgICBzdXBlcihhKTsKICAgICAgICAgIHRoaXMubmFtZSA9ICJJbnRlcm5hbEVycm9yIjsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZvciAodmFyICRiID0gQXJyYXkoMjU2KSwgYWMgPSAwOyAyNTYgPiBhYzsgKythYykgJGJbYWNdID0gU3RyaW5nLmZyb21DaGFyQ29kZShhYyk7CiAgICAgIEphID0gJGI7CiAgICAgIFIgPSBrLkJpbmRpbmdFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3IgewogICAgICAgIGNvbnN0cnVjdG9yKGEpIHsKICAgICAgICAgIHN1cGVyKGEpOwogICAgICAgICAgdGhpcy5uYW1lID0gIkJpbmRpbmdFcnJvciI7CiAgICAgICAgfQogICAgICB9OwogICAgICBPYmplY3QuYXNzaWduKFlhLnByb3RvdHlwZSwgewogICAgICAgIGlzQWxpYXNPZjogZnVuY3Rpb24oYSkgewogICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFlhICYmIGEgaW5zdGFuY2VvZiBZYSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgIHZhciBiID0gdGhpcy5tYS56YS54YSwgYyA9IHRoaXMubWEueWE7CiAgICAgICAgICBhLm1hID0gYS5tYTsKICAgICAgICAgIHZhciBkID0gYS5tYS56YS54YTsKICAgICAgICAgIGZvciAoYSA9IGEubWEueWE7IGIuQ2E7ICkgYyA9IGIuTmEoYyksIGIgPSBiLkNhOwogICAgICAgICAgZm9yICg7IGQuQ2E7ICkgYSA9IGQuTmEoYSksIGQgPSBkLkNhOwogICAgICAgICAgcmV0dXJuIGIgPT09IGQgJiYgYyA9PT0gYTsKICAgICAgICB9LAogICAgICAgIGNsb25lOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHRoaXMubWEueWEgfHwgTGEodGhpcyk7CiAgICAgICAgICBpZiAodGhpcy5tYS5NYSkgcmV0dXJuIHRoaXMubWEuY291bnQudmFsdWUgKz0gMSwgdGhpczsKICAgICAgICAgIHZhciBhID0gV2EsIGIgPSBPYmplY3QsIGMgPSBiLmNyZWF0ZSwgZCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSwgZSA9IHRoaXMubWE7CiAgICAgICAgICBhID0gYSgKICAgICAgICAgICAgYy5jYWxsKGIsIGQsIHsKICAgICAgICAgICAgICBtYTogeyB2YWx1ZTogeyBjb3VudDogZS5jb3VudCwgS2E6IGUuS2EsIE1hOiBlLk1hLCB5YTogZS55YSwgemE6IGUuemEsIEFhOiBlLkFhLCBEYTogZS5EYSB9IH0KICAgICAgICAgICAgfSkKICAgICAgICAgICk7CiAgICAgICAgICBhLm1hLmNvdW50LnZhbHVlICs9IDE7CiAgICAgICAgICBhLm1hLkthID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAogICAgICAgIFsiZGVsZXRlIl0oKSB7CiAgICAgICAgICB0aGlzLm1hLnlhIHx8IExhKHRoaXMpOwogICAgICAgICAgaWYgKHRoaXMubWEuS2EgJiYgIXRoaXMubWEuTWEpIHRocm93IG5ldyBSKCJPYmplY3QgYWxyZWFkeSBzY2hlZHVsZWQgZm9yIGRlbGV0aW9uIik7CiAgICAgICAgICBPYSh0aGlzKTsKICAgICAgICAgIHZhciBhID0gdGhpcy5tYTsKICAgICAgICAgIC0tYS5jb3VudC52YWx1ZTsKICAgICAgICAgIDAgPT09IGEuY291bnQudmFsdWUgJiYgKGEuQWEgPyBhLkRhLkZhKGEuQWEpIDogYS56YS54YS5GYShhLnlhKSk7CiAgICAgICAgICB0aGlzLm1hLk1hIHx8ICh0aGlzLm1hLkFhID0gdm9pZCAwLCB0aGlzLm1hLnlhID0gdm9pZCAwKTsKICAgICAgICB9LAogICAgICAgIGlzRGVsZXRlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gIXRoaXMubWEueWE7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVMYXRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLm1hLnlhIHx8IExhKHRoaXMpOwogICAgICAgICAgaWYgKHRoaXMubWEuS2EgJiYgIXRoaXMubWEuTWEpIHRocm93IG5ldyBSKCJPYmplY3QgYWxyZWFkeSBzY2hlZHVsZWQgZm9yIGRlbGV0aW9uIik7CiAgICAgICAgICBSYS5wdXNoKHRoaXMpOwogICAgICAgICAgMSA9PT0gUmEubGVuZ3RoICYmIFRhICYmIFRhKFNhKTsKICAgICAgICAgIHRoaXMubWEuS2EgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgay5nZXRJbmhlcml0ZWRJbnN0YW5jZUNvdW50ID0gKCkgPT4gT2JqZWN0LmtleXMoVWEpLmxlbmd0aDsKICAgICAgay5nZXRMaXZlSW5oZXJpdGVkSW5zdGFuY2VzID0gKCkgPT4gewogICAgICAgIHZhciBhID0gW10sIGI7CiAgICAgICAgZm9yIChiIGluIFVhKSBVYS5oYXNPd25Qcm9wZXJ0eShiKSAmJiBhLnB1c2goVWFbYl0pOwogICAgICAgIHJldHVybiBhOwogICAgICB9OwogICAgICBrLmZsdXNoUGVuZGluZ0RlbGV0ZXMgPSBTYTsKICAgICAgay5zZXREZWxheUZ1bmN0aW9uID0gKGEpID0+IHsKICAgICAgICBUYSA9IGE7CiAgICAgICAgUmEubGVuZ3RoICYmIFRhICYmIFRhKFNhKTsKICAgICAgfTsKICAgICAgT2JqZWN0LmFzc2lnbihqYi5wcm90b3R5cGUsIHsKICAgICAgICBlYihhKSB7CiAgICAgICAgICB0aGlzLlphICYmIChhID0gdGhpcy5aYShhKSk7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAogICAgICAgIFhhKGEpIHsKICAgICAgICAgIHRoaXMuRmE/LihhKTsKICAgICAgICB9LAogICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBLLAogICAgICAgIGZyb21XaXJlVHlwZTogZnVuY3Rpb24oYSkgewogICAgICAgICAgZnVuY3Rpb24gYigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuUWEgPyBYYSh0aGlzLnhhLkxhLCB7IHphOiB0aGlzLmpiLCB5YTogYywgRGE6IHRoaXMsIEFhOiBhIH0pIDogWGEodGhpcy54YS5MYSwgeyB6YTogdGhpcywgeWE6IGEgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYyA9IHRoaXMuZWIoYSk7CiAgICAgICAgICBpZiAoIWMpIHJldHVybiB0aGlzLlhhKGEpLCBudWxsOwogICAgICAgICAgdmFyIGQgPSBWYSh0aGlzLnhhLCBjKTsKICAgICAgICAgIGlmICh2b2lkIDAgIT09IGQpIHsKICAgICAgICAgICAgaWYgKDAgPT09IGQubWEuY291bnQudmFsdWUpIHJldHVybiBkLm1hLnlhID0gYywgZC5tYS5BYSA9IGEsIGQuY2xvbmUoKTsKICAgICAgICAgICAgZCA9IGQuY2xvbmUoKTsKICAgICAgICAgICAgdGhpcy5YYShhKTsKICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICB9CiAgICAgICAgICBkID0gdGhpcy54YS5jYihjKTsKICAgICAgICAgIGQgPSBRYVtkXTsKICAgICAgICAgIGlmICghZCkgcmV0dXJuIGIuY2FsbCh0aGlzKTsKICAgICAgICAgIGQgPSB0aGlzLlBhID8gZC4kYSA6IGQucG9pbnRlclR5cGU7CiAgICAgICAgICB2YXIgZSA9IFBhKGMsIHRoaXMueGEsIGQueGEpOwogICAgICAgICAgcmV0dXJuIG51bGwgPT09IGUgPyBiLmNhbGwodGhpcykgOiB0aGlzLlFhID8gWGEoZC54YS5MYSwgeyB6YTogZCwgeWE6IGUsIERhOiB0aGlzLCBBYTogYSB9KSA6IFhhKGQueGEuTGEsIHsgemE6IGQsIHlhOiBlIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG5iID0gay5VbmJvdW5kVHlwZUVycm9yID0gKChhLCBiKSA9PiB7CiAgICAgICAgdmFyIGMgPSBaYShiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICB0aGlzLm5hbWUgPSBiOwogICAgICAgICAgdGhpcy5tZXNzYWdlID0gZDsKICAgICAgICAgIGQgPSBFcnJvcihkKS5zdGFjazsKICAgICAgICAgIHZvaWQgMCAhPT0gZCAmJiAodGhpcy5zdGFjayA9IHRoaXMudG9TdHJpbmcoKSArICJcbiIgKyBkLnJlcGxhY2UoL15FcnJvcig6W15cbl0qKT9cbi8sICIiKSk7CiAgICAgICAgfSk7CiAgICAgICAgYy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTsKICAgICAgICBjLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGM7CiAgICAgICAgYy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMubWVzc2FnZSA/IHRoaXMubmFtZSA6IGAke3RoaXMubmFtZX06ICR7dGhpcy5tZXNzYWdlfWA7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gYzsKICAgICAgfSkoRXJyb3IsICJVbmJvdW5kVHlwZUVycm9yIik7CiAgICAgIFYucHVzaCgwLCAxLCB2b2lkIDAsIDEsIG51bGwsIDEsIHRydWUsIDEsIGZhbHNlLCAxKTsKICAgICAgay5jb3VudF9lbXZhbF9oYW5kbGVzID0gKCkgPT4gVi5sZW5ndGggLyAyIC0gNSAtIHZiLmxlbmd0aDsKICAgICAgdmFyIG1jID0gewogICAgICAgIGM6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICByYSgKICAgICAgICAgICAgYEFzc2VydGlvbiBmYWlsZWQ6ICR7YSA/IEooQSwgYSkgOiAiIn0sIGF0OiBgICsgW2IgPyBiID8gSihBLCBiKSA6ICIiIDogInVua25vd24gZmlsZW5hbWUiLCBjLCBkID8gZCA/IEooQSwgZCkgOiAiIiA6ICJ1bmtub3duIGZ1bmN0aW9uIl0KICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBtOiAoYSwgYiwgYykgPT4gewogICAgICAgICAgdmFyIGQgPSBuZXcgQWEoYSk7CiAgICAgICAgICBGW2QueWEgKyAxNiA+PiAyXSA9IDA7CiAgICAgICAgICBGW2QueWEgKyA0ID4+IDJdID0gYjsKICAgICAgICAgIEZbZC55YSArIDggPj4gMl0gPSBjOwogICAgICAgICAgQmEgPSBhOwogICAgICAgICAgQ2ErKzsKICAgICAgICAgIHRocm93IEJhOwogICAgICAgIH0sCiAgICAgICAgQjogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIFA6ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIE06ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIFI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICBOOiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBBOiBmdW5jdGlvbigpIHsKICAgICAgICB9LAogICAgICAgIE86ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIHY6IChhKSA9PiB7CiAgICAgICAgICB2YXIgYiA9IEZhW2FdOwogICAgICAgICAgZGVsZXRlIEZhW2FdOwogICAgICAgICAgdmFyIGMgPSBiLlVhLCBkID0gYi5GYSwgZSA9IGIuWWEsIGYgPSBlLm1hcCgobCkgPT4gbC5oYikuY29uY2F0KGUubWFwKChsKSA9PiBsLm5iKSk7CiAgICAgICAgICBQKFthXSwgZiwgKGwpID0+IHsKICAgICAgICAgICAgdmFyIGggPSB7fTsKICAgICAgICAgICAgZS5mb3JFYWNoKChuLCBtKSA9PiB7CiAgICAgICAgICAgICAgdmFyIHAgPSBsW21dLCB1ID0gbi5mYiwgdiA9IG4uZ2IsIGcgPSBsW20gKyBlLmxlbmd0aF0sIHEgPSBuLm1iLCByID0gbi5vYjsKICAgICAgICAgICAgICBoW24uYmJdID0gewogICAgICAgICAgICAgICAgcmVhZDogKHopID0+IHAuZnJvbVdpcmVUeXBlKHUodiwgeikpLAogICAgICAgICAgICAgICAgd3JpdGU6ICh6LCBOKSA9PiB7CiAgICAgICAgICAgICAgICAgIHZhciBEID0gW107CiAgICAgICAgICAgICAgICAgIHEociwgeiwgZy50b1dpcmVUeXBlKEQsIE4pKTsKICAgICAgICAgICAgICAgICAgR2EoRCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZTogYi5uYW1lLAogICAgICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiAobikgPT4gewogICAgICAgICAgICAgICAgICB2YXIgbSA9IHt9LCBwOwogICAgICAgICAgICAgICAgICBmb3IgKHAgaW4gaCkgbVtwXSA9IGhbcF0ucmVhZChuKTsKICAgICAgICAgICAgICAgICAgZChuKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdG9XaXJlVHlwZTogKG4sIG0pID0+IHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBoKSBpZiAoIShwIGluIG0pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBNaXNzaW5nIGZpZWxkOiAiJHtwfSJgKTsKICAgICAgICAgICAgICAgICAgdmFyIHUgPSBjKCk7CiAgICAgICAgICAgICAgICAgIGZvciAocCBpbiBoKSBoW3BdLndyaXRlKHUsIG1bcF0pOwogICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIG4ucHVzaChkLCB1KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXJnUGFja0FkdmFuY2U6IDgsCiAgICAgICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogSywKICAgICAgICAgICAgICAgIEVhOiBkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBJOiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBZOiAoYSwgYiwgYywgZCkgPT4gewogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBPKGEsIHsKICAgICAgICAgICAgbmFtZTogYiwKICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICEhZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9XaXJlVHlwZTogZnVuY3Rpb24oZSwgZikgewogICAgICAgICAgICAgIHJldHVybiBmID8gYyA6IGQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShBW2VdKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgRWE6IG51bGwKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgcjogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0sIHAsIHUsIHYpID0+IHsKICAgICAgICAgIHAgPSBRKHApOwogICAgICAgICAgZiA9IFQoZSwgZik7CiAgICAgICAgICBoICYmIChoID0gVChsLCBoKSk7CiAgICAgICAgICBtICYmIChtID0gVChuLCBtKSk7CiAgICAgICAgICB2ID0gVCh1LCB2KTsKICAgICAgICAgIHZhciBnID0gYmIocCk7CiAgICAgICAgICBhYihnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcWIoYENhbm5vdCBjb25zdHJ1Y3QgJHtwfSBkdWUgdG8gdW5ib3VuZCB0eXBlc2AsIFtkXSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIFAoW2EsIGIsIGNdLCBkID8gW2RdIDogW10sIChxKSA9PiB7CiAgICAgICAgICAgIHEgPSBxWzBdOwogICAgICAgICAgICBpZiAoZCkgewogICAgICAgICAgICAgIHZhciByID0gcS54YTsKICAgICAgICAgICAgICB2YXIgeiA9IHIuTGE7CiAgICAgICAgICAgIH0gZWxzZSB6ID0gWWEucHJvdG90eXBlOwogICAgICAgICAgICBxID0gWmEocCwgZnVuY3Rpb24oLi4uTmEpIHsKICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpICE9PSBOKSB0aHJvdyBuZXcgUigiVXNlICduZXcnIHRvIGNvbnN0cnVjdCAiICsgcCk7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gRC5IYSkgdGhyb3cgbmV3IFIocCArICIgaGFzIG5vIGFjY2Vzc2libGUgY29uc3RydWN0b3IiKTsKICAgICAgICAgICAgICB2YXIgeGIgPSBELkhhW05hLmxlbmd0aF07CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0geGIpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgICAgYFRyaWVkIHRvIGludm9rZSBjdG9yIG9mICR7cH0gd2l0aCBpbnZhbGlkIG51bWJlciBvZiBwYXJhbWV0ZXJzICgke05hLmxlbmd0aH0pIC0gZXhwZWN0ZWQgKCR7T2JqZWN0LmtleXMoRC5IYSkudG9TdHJpbmcoKX0pIHBhcmFtZXRlcnMgaW5zdGVhZCFgCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiB4Yi5hcHBseSh0aGlzLCBOYSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgTiA9IE9iamVjdC5jcmVhdGUoeiwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogcSB9IH0pOwogICAgICAgICAgICBxLnByb3RvdHlwZSA9IE47CiAgICAgICAgICAgIHZhciBEID0gbmV3IGNiKHAsIHEsIE4sIHYsIHIsIGYsIGgsIG0pOwogICAgICAgICAgICBpZiAoRC5DYSkgewogICAgICAgICAgICAgIHZhciBpYTsKICAgICAgICAgICAgICAoaWEgPSBELkNhKS5XYSA/PyAoaWEuV2EgPSBbXSk7CiAgICAgICAgICAgICAgRC5DYS5XYS5wdXNoKEQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHIgPSBuZXcgamIocCwgRCwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgaWEgPSBuZXcgamIocCArICIqIiwgRCwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CiAgICAgICAgICAgIHogPSBuZXcgamIocCArICIgY29uc3QqIiwgRCwgZmFsc2UsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgUWFbYV0gPSB7IHBvaW50ZXJUeXBlOiBpYSwgJGE6IHogfTsKICAgICAgICAgICAga2IoZywgcSk7CiAgICAgICAgICAgIHJldHVybiBbciwgaWEsIHpdOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBxOiAoYSwgYiwgYywgZCwgZSwgZikgPT4gewogICAgICAgICAgdmFyIGwgPSByYihiLCBjKTsKICAgICAgICAgIGUgPSBUKGQsIGUpOwogICAgICAgICAgUChbXSwgW2FdLCAoaCkgPT4gewogICAgICAgICAgICBoID0gaFswXTsKICAgICAgICAgICAgdmFyIG4gPSBgY29uc3RydWN0b3IgJHtoLm5hbWV9YDsKICAgICAgICAgICAgdm9pZCAwID09PSBoLnhhLkhhICYmIChoLnhhLkhhID0gW10pOwogICAgICAgICAgICBpZiAodm9pZCAwICE9PSBoLnhhLkhhW2IgLSAxXSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgIGBDYW5ub3QgcmVnaXN0ZXIgbXVsdGlwbGUgY29uc3RydWN0b3JzIHdpdGggaWRlbnRpY2FsIG51bWJlciBvZiBwYXJhbWV0ZXJzICgke2IgLSAxfSkgZm9yIGNsYXNzICcke2gubmFtZX0nISBPdmVybG9hZCByZXNvbHV0aW9uIGlzIGN1cnJlbnRseSBvbmx5IHBlcmZvcm1lZCB1c2luZyB0aGUgcGFyYW1ldGVyIGNvdW50LCBub3QgYWN0dWFsIHR5cGUgaW5mbyFgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgaC54YS5IYVtiIC0gMV0gPSAoKSA9PiB7CiAgICAgICAgICAgICAgcWIoYENhbm5vdCBjb25zdHJ1Y3QgJHtoLm5hbWV9IGR1ZSB0byB1bmJvdW5kIHR5cGVzYCwgbCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIFAoW10sIGwsIChtKSA9PiB7CiAgICAgICAgICAgICAgbS5zcGxpY2UoMSwgMCwgbnVsbCk7CiAgICAgICAgICAgICAgaC54YS5IYVtiIC0gMV0gPSB0YihuLCBtLCBudWxsLCBlLCBmKTsKICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGY6IChhLCBiLCBjLCBkLCBlLCBmLCBsLCBoKSA9PiB7CiAgICAgICAgICB2YXIgbiA9IHJiKGMsIGQpOwogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBiID0gdWIoYik7CiAgICAgICAgICBmID0gVChlLCBmKTsKICAgICAgICAgIFAoW10sIFthXSwgKG0pID0+IHsKICAgICAgICAgICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICAgICAgICBxYihgQ2Fubm90IGNhbGwgJHt1fSBkdWUgdG8gdW5ib3VuZCB0eXBlc2AsIG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG0gPSBtWzBdOwogICAgICAgICAgICB2YXIgdSA9IGAke20ubmFtZX0uJHtifWA7CiAgICAgICAgICAgIGIuc3RhcnRzV2l0aCgiQEAiKSAmJiAoYiA9IFN5bWJvbFtiLnN1YnN0cmluZygyKV0pOwogICAgICAgICAgICBoICYmIG0ueGEua2IucHVzaChiKTsKICAgICAgICAgICAgdmFyIHYgPSBtLnhhLkxhLCBnID0gdltiXTsKICAgICAgICAgICAgdm9pZCAwID09PSBnIHx8IHZvaWQgMCA9PT0gZy5CYSAmJiBnLmNsYXNzTmFtZSAhPT0gbS5uYW1lICYmIGcuT2EgPT09IGMgLSAyID8gKHAuT2EgPSBjIC0gMiwgcC5jbGFzc05hbWUgPSBtLm5hbWUsIHZbYl0gPSBwKSA6ICgkYSh2LCBiLCB1KSwgdltiXS5CYVtjIC0gMl0gPSBwKTsKICAgICAgICAgICAgUChbXSwgbiwgKHEpID0+IHsKICAgICAgICAgICAgICBxID0gdGIodSwgcSwgbSwgZiwgbCk7CiAgICAgICAgICAgICAgdm9pZCAwID09PSB2W2JdLkJhID8gKHEuT2EgPSBjIC0gMiwgdltiXSA9IHEpIDogdltiXS5CYVtjIC0gMl0gPSBxOwogICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgWDogKGEpID0+IE8oYSwgemIpLAogICAgICAgIHg6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgfQogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBlLnZhbHVlcyA9IHt9OwogICAgICAgICAgTyhhLCB7CiAgICAgICAgICAgIG5hbWU6IGIsCiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBlLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGZ1bmN0aW9uKGYpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci52YWx1ZXNbZl07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IChmLCBsKSA9PiBsLnZhbHVlLAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IEFiKGIsIGMsIGQpLAogICAgICAgICAgICBFYTogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgICBhYihiLCBlKTsKICAgICAgICB9LAogICAgICAgIGs6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICB2YXIgZCA9IEJiKGEsICJlbnVtIik7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIGEgPSBkLmNvbnN0cnVjdG9yOwogICAgICAgICAgZCA9IE9iamVjdC5jcmVhdGUoZC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHsKICAgICAgICAgICAgdmFsdWU6IHsgdmFsdWU6IGMgfSwKICAgICAgICAgICAgY29uc3RydWN0b3I6IHsgdmFsdWU6IFphKGAke2QubmFtZX1fJHtifWAsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB9KSB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGEudmFsdWVzW2NdID0gZDsKICAgICAgICAgIGFbYl0gPSBkOwogICAgICAgIH0sCiAgICAgICAgQzogKGEsIGIsIGMpID0+IHsKICAgICAgICAgIGIgPSBRKGIpOwogICAgICAgICAgTyhhLCB7CiAgICAgICAgICAgIG5hbWU6IGIsCiAgICAgICAgICAgIGZyb21XaXJlVHlwZTogKGQpID0+IGQsCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IChkLCBlKSA9PiBlLAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IENiKGIsIGMpLAogICAgICAgICAgICBFYTogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBFOiAoYSwgYiwgYywgZCwgZSwgZikgPT4gewogICAgICAgICAgdmFyIGwgPSByYihiLCBjKTsKICAgICAgICAgIGEgPSBRKGEpOwogICAgICAgICAgYSA9IHViKGEpOwogICAgICAgICAgZSA9IFQoZCwgZSk7CiAgICAgICAgICBhYigKICAgICAgICAgICAgYSwKICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcWIoYENhbm5vdCBjYWxsICR7YX0gZHVlIHRvIHVuYm91bmQgdHlwZXNgLCBsKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYiAtIDEKICAgICAgICAgICk7CiAgICAgICAgICBQKFtdLCBsLCAoaCkgPT4gewogICAgICAgICAgICBrYihhLCB0YihhLCBbaFswXSwgbnVsbF0uY29uY2F0KGguc2xpY2UoMSkpLCBudWxsLCBlLCBmKSwgYiAtIDEpOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGw6IChhLCBiLCBjLCBkLCBlKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIC0xID09PSBlICYmIChlID0gNDI5NDk2NzI5NSk7CiAgICAgICAgICBlID0gKGgpID0+IGg7CiAgICAgICAgICBpZiAoMCA9PT0gZCkgewogICAgICAgICAgICB2YXIgZiA9IDMyIC0gOCAqIGM7CiAgICAgICAgICAgIGUgPSAoaCkgPT4gaCA8PCBmID4+PiBmOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGwgPSBiLmluY2x1ZGVzKCJ1bnNpZ25lZCIpID8gZnVuY3Rpb24oaCwgbikgewogICAgICAgICAgICByZXR1cm4gbiA+Pj4gMDsKICAgICAgICAgIH0gOiBmdW5jdGlvbihoLCBuKSB7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgfTsKICAgICAgICAgIE8oYSwgewogICAgICAgICAgICBuYW1lOiBiLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGUsCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IGwsCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogRGIoYiwgYywgMCAhPT0gZCksCiAgICAgICAgICAgIEVhOiBudWxsCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGc6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICBmdW5jdGlvbiBkKGYpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBlKHkuYnVmZmVyLCBGW2YgKyA0ID4+IDJdLCBGW2YgPj4gMl0pOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGUgPSBbSW50OEFycmF5LCBVaW50OEFycmF5LCBJbnQxNkFycmF5LCBVaW50MTZBcnJheSwgSW50MzJBcnJheSwgVWludDMyQXJyYXksIEZsb2F0MzJBcnJheSwgRmxvYXQ2NEFycmF5XVtiXTsKICAgICAgICAgIGMgPSBRKGMpOwogICAgICAgICAgTyhhLCB7IG5hbWU6IGMsIGZyb21XaXJlVHlwZTogZCwgYXJnUGFja0FkdmFuY2U6IDgsIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBkIH0sIHsgaWI6IHRydWUgfSk7CiAgICAgICAgfSwKICAgICAgICB3OiAoYSkgPT4gewogICAgICAgICAgTyhhLCB6Yik7CiAgICAgICAgfSwKICAgICAgICBjYTogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0sIHAsIHUpID0+IHsKICAgICAgICAgIGMgPSBRKGMpOwogICAgICAgICAgZiA9IFQoZSwgZik7CiAgICAgICAgICBoID0gVChsLCBoKTsKICAgICAgICAgIG0gPSBUKG4sIG0pOwogICAgICAgICAgdSA9IFQocCwgdSk7CiAgICAgICAgICBQKFthXSwgW2JdLCAodikgPT4gewogICAgICAgICAgICB2ID0gdlswXTsKICAgICAgICAgICAgcmV0dXJuIFtuZXcgamIoYywgdi54YSwgZmFsc2UsIGZhbHNlLCB0cnVlLCB2LCBkLCBmLCBoLCBtLCB1KV07CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIEQ6IChhLCBiKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIHZhciBjID0gInN0ZDo6c3RyaW5nIiA9PT0gYjsKICAgICAgICAgIE8oYSwgewogICAgICAgICAgICBuYW1lOiBiLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICB2YXIgZSA9IEZbZCA+PiAyXSwgZiA9IGQgKyA0OwogICAgICAgICAgICAgIGlmIChjKQogICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IGYsIGggPSAwOyBoIDw9IGU7ICsraCkgewogICAgICAgICAgICAgICAgICB2YXIgbiA9IGYgKyBoOwogICAgICAgICAgICAgICAgICBpZiAoaCA9PSBlIHx8IDAgPT0gQVtuXSkgewogICAgICAgICAgICAgICAgICAgIGwgPSBsID8gSihBLCBsLCBuIC0gbCkgOiAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBtKSB2YXIgbSA9IGw7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBtICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIG0gKz0gbDsKICAgICAgICAgICAgICAgICAgICBsID0gbiArIDE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG0gPSBBcnJheShlKTsKICAgICAgICAgICAgICAgIGZvciAoaCA9IDA7IGggPCBlOyArK2gpIG1baF0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKEFbZiArIGhdKTsKICAgICAgICAgICAgICAgIG0gPSBtLmpvaW4oIiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBVKGQpOwogICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b1dpcmVUeXBlOiBmdW5jdGlvbihkLCBlKSB7CiAgICAgICAgICAgICAgZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIChlID0gbmV3IFVpbnQ4QXJyYXkoZSkpOwogICAgICAgICAgICAgIHZhciBmID0gInN0cmluZyIgPT0gdHlwZW9mIGU7CiAgICAgICAgICAgICAgaWYgKCEoZiB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBlIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkgfHwgZSBpbnN0YW5jZW9mIEludDhBcnJheSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigiQ2Fubm90IHBhc3Mgbm9uLXN0cmluZyB0byBzdGQ6OnN0cmluZyIpOwogICAgICAgICAgICAgIHZhciBsID0gYyAmJiBmID8gRGEoZSkgOiBlLmxlbmd0aDsKICAgICAgICAgICAgICB2YXIgaCA9IGJjKDQgKyBsICsgMSksIG4gPSBoICsgNDsKICAgICAgICAgICAgICBGW2ggPj4gMl0gPSBsOwogICAgICAgICAgICAgIGlmIChjICYmIGYpIEVhKGUsIEEsIG4sIGwgKyAxKTsKICAgICAgICAgICAgICBlbHNlIGlmIChmKQogICAgICAgICAgICAgICAgZm9yIChmID0gMDsgZiA8IGw7ICsrZikgewogICAgICAgICAgICAgICAgICB2YXIgbSA9IGUuY2hhckNvZGVBdChmKTsKICAgICAgICAgICAgICAgICAgaWYgKDI1NSA8IG0pIHRocm93IFUobiksIG5ldyBSKCJTdHJpbmcgaGFzIFVURi0xNiBjb2RlIHVuaXRzIHRoYXQgZG8gbm90IGZpdCBpbiA4IGJpdHMiKTsKICAgICAgICAgICAgICAgICAgQVtuICsgZl0gPSBtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgZm9yIChmID0gMDsgZiA8IGw7ICsrZikgQVtuICsgZl0gPSBlW2ZdOwogICAgICAgICAgICAgIG51bGwgIT09IGQgJiYgZC5wdXNoKFUsIGgpOwogICAgICAgICAgICAgIHJldHVybiBoOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IEssCiAgICAgICAgICAgIEVhKGQpIHsKICAgICAgICAgICAgICBVKGQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHU6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICBjID0gUShjKTsKICAgICAgICAgIGlmICgyID09PSBiKSB7CiAgICAgICAgICAgIHZhciBkID0gRmI7CiAgICAgICAgICAgIHZhciBlID0gR2I7CiAgICAgICAgICAgIHZhciBmID0gSGI7CiAgICAgICAgICAgIHZhciBsID0gKGgpID0+IENbaCA+PiAxXTsKICAgICAgICAgIH0gZWxzZSA0ID09PSBiICYmIChkID0gSWIsIGUgPSBKYiwgZiA9IEtiLCBsID0gKGgpID0+IEZbaCA+PiAyXSk7CiAgICAgICAgICBPKGEsIHsKICAgICAgICAgICAgbmFtZTogYywKICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiAoaCkgPT4gewogICAgICAgICAgICAgIGZvciAodmFyIG4gPSBGW2ggPj4gMl0sIG0sIHAgPSBoICsgNCwgdSA9IDA7IHUgPD0gbjsgKyt1KSB7CiAgICAgICAgICAgICAgICB2YXIgdiA9IGggKyA0ICsgdSAqIGI7CiAgICAgICAgICAgICAgICBpZiAodSA9PSBuIHx8IDAgPT0gbCh2KSkKICAgICAgICAgICAgICAgICAgcCA9IGQocCwgdiAtIHApLCB2b2lkIDAgPT09IG0gPyBtID0gcCA6IChtICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIG0gKz0gcCksIHAgPSB2ICsgYjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgVShoKTsKICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9XaXJlVHlwZTogKGgsIG4pID0+IHsKICAgICAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIG4pIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyBub24tc3RyaW5nIHRvIEMrKyBzdHJpbmcgdHlwZSAke2N9YCk7CiAgICAgICAgICAgICAgdmFyIG0gPSBmKG4pLCBwID0gYmMoNCArIG0gKyBiKTsKICAgICAgICAgICAgICBGW3AgPj4gMl0gPSBtIC8gYjsKICAgICAgICAgICAgICBlKG4sIHAgKyA0LCBtICsgYik7CiAgICAgICAgICAgICAgbnVsbCAhPT0gaCAmJiBoLnB1c2goVSwgcCk7CiAgICAgICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogSywKICAgICAgICAgICAgRWEoaCkgewogICAgICAgICAgICAgIFUoaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgczogKGEsIGIsIGMsIGQsIGUsIGYpID0+IHsKICAgICAgICAgIEZhW2FdID0geyBuYW1lOiBRKGIpLCBVYTogVChjLCBkKSwgRmE6IFQoZSwgZiksIFlhOiBbXSB9OwogICAgICAgIH0sCiAgICAgICAgajogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0pID0+IHsKICAgICAgICAgIEZhW2FdLllhLnB1c2goeyBiYjogUShiKSwgaGI6IGMsIGZiOiBUKGQsIGUpLCBnYjogZiwgbmI6IGwsIG1iOiBUKGgsIG4pLCBvYjogbSB9KTsKICAgICAgICB9LAogICAgICAgIFo6IChhLCBiKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIE8oYSwgeyB1YjogdHJ1ZSwgbmFtZTogYiwgYXJnUGFja0FkdmFuY2U6IDAsIGZyb21XaXJlVHlwZTogKCkgPT4gewogICAgICAgICAgfSwgdG9XaXJlVHlwZTogKCkgPT4gewogICAgICAgICAgfSB9KTsKICAgICAgICB9LAogICAgICAgIEo6ICgpID0+IHsKICAgICAgICAgIHRocm93IEluZmluaXR5OwogICAgICAgIH0sCiAgICAgICAgYWE6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBhID0gTGJbYV07CiAgICAgICAgICBiID0geWIoYik7CiAgICAgICAgICByZXR1cm4gYShudWxsLCBiLCBjLCBkKTsKICAgICAgICB9LAogICAgICAgIEY6IHdiLAogICAgICAgICQ6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICB2YXIgZCA9IE5iKGEsIGIpLCBlID0gZC5zaGlmdCgpOwogICAgICAgICAgYS0tOwogICAgICAgICAgdmFyIGYgPSBBcnJheShhKTsKICAgICAgICAgIGIgPSBgbWV0aG9kQ2FsbGVyPCgke2QubWFwKChsKSA9PiBsLm5hbWUpLmpvaW4oIiwgIil9KSA9PiAke2UubmFtZX0+YDsKICAgICAgICAgIHJldHVybiBNYigKICAgICAgICAgICAgWmEoYiwgKGwsIGgsIG4sIG0pID0+IHsKICAgICAgICAgICAgICBmb3IgKHZhciBwID0gMCwgdSA9IDA7IHUgPCBhOyArK3UpIGZbdV0gPSBkW3VdLnJlYWRWYWx1ZUZyb21Qb2ludGVyKG0gKyBwKSwgcCArPSBkW3VdLmFyZ1BhY2tBZHZhbmNlOwogICAgICAgICAgICAgIGggPSAxID09PSBjID8gT2IoaCwgZikgOiBoLmFwcGx5KGwsIGYpOwogICAgICAgICAgICAgIGwgPSBbXTsKICAgICAgICAgICAgICBoID0gZS50b1dpcmVUeXBlKGwsIGgpOwogICAgICAgICAgICAgIGwubGVuZ3RoICYmIChGW24gPj4gMl0gPSBoYihsKSk7CiAgICAgICAgICAgICAgcmV0dXJuIGg7CiAgICAgICAgICAgIH0pCiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgYmE6IChhKSA9PiB7CiAgICAgICAgICA5IDwgYSAmJiAoVlthICsgMV0gKz0gMSk7CiAgICAgICAgfSwKICAgICAgICBfOiAoYSkgPT4gewogICAgICAgICAgdmFyIGIgPSB5YihhKTsKICAgICAgICAgIEdhKGIpOwogICAgICAgICAgd2IoYSk7CiAgICAgICAgfSwKICAgICAgICBvOiAoYSwgYikgPT4gewogICAgICAgICAgYSA9IEJiKGEsICJfZW12YWxfdGFrZV92YWx1ZSIpOwogICAgICAgICAgYSA9IGEucmVhZFZhbHVlRnJvbVBvaW50ZXIoYik7CiAgICAgICAgICByZXR1cm4gaGIoYSk7CiAgICAgICAgfSwKICAgICAgICBXOiAoKSA9PiB7CiAgICAgICAgICByYSgiIik7CiAgICAgICAgfSwKICAgICAgICBWOiAoKSA9PiBwZXJmb3JtYW5jZS5ub3coKSwKICAgICAgICBMOiAoYSkgPT4gewogICAgICAgICAgdmFyIGIgPSBBLmxlbmd0aDsKICAgICAgICAgIGEgPj4+PSAwOwogICAgICAgICAgaWYgKDIxNDc0ODM2NDggPCBhKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICBmb3IgKHZhciBjID0gMTsgNCA+PSBjOyBjICo9IDIpIHsKICAgICAgICAgICAgdmFyIGQgPSBiICogKDEgKyAwLjIgLyBjKTsKICAgICAgICAgICAgZCA9IE1hdGgubWluKGQsIGEgKyAxMDA2NjMyOTYpOwogICAgICAgICAgICB2YXIgZSA9IE1hdGg7CiAgICAgICAgICAgIGQgPSBNYXRoLm1heChhLCBkKTsKICAgICAgICAgICAgYTogewogICAgICAgICAgICAgIGUgPSAoZS5taW4uY2FsbChlLCAyMTQ3NDgzNjQ4LCBkICsgKDY1NTM2IC0gZCAlIDY1NTM2KSAlIDY1NTM2KSAtIGZhLmJ1ZmZlci5ieXRlTGVuZ3RoICsgNjU1MzUpIC8gNjU1MzY7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZhLmdyb3coZSk7CiAgICAgICAgICAgICAgICBsYSgpOwogICAgICAgICAgICAgICAgdmFyIGYgPSAxOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9IGNhdGNoIChsKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGYgPSB2b2lkIDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGYpIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgUzogKGEsIGIpID0+IHsKICAgICAgICAgIHZhciBjID0gMDsKICAgICAgICAgIFJiKCkuZm9yRWFjaCgoZCwgZSkgPT4gewogICAgICAgICAgICB2YXIgZiA9IGIgKyBjOwogICAgICAgICAgICBlID0gRlthICsgNCAqIGUgPj4gMl0gPSBmOwogICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgZC5sZW5ndGg7ICsrZikgeVtlKytdID0gZC5jaGFyQ29kZUF0KGYpOwogICAgICAgICAgICB5W2VdID0gMDsKICAgICAgICAgICAgYyArPSBkLmxlbmd0aCArIDE7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0sCiAgICAgICAgVDogKGEsIGIpID0+IHsKICAgICAgICAgIHZhciBjID0gUmIoKTsKICAgICAgICAgIEZbYSA+PiAyXSA9IGMubGVuZ3RoOwogICAgICAgICAgdmFyIGQgPSAwOwogICAgICAgICAgYy5mb3JFYWNoKChlKSA9PiBkICs9IGUubGVuZ3RoICsgMSk7CiAgICAgICAgICBGW2IgPj4gMl0gPSBkOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICB0OiAoKSA9PiA1MiwKICAgICAgICB6OiAoKSA9PiA1MiwKICAgICAgICBIOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiA3MDsKICAgICAgICB9LAogICAgICAgIFE6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBmb3IgKHZhciBlID0gMCwgZiA9IDA7IGYgPCBjOyBmKyspIHsKICAgICAgICAgICAgdmFyIGwgPSBGW2IgPj4gMl0sIGggPSBGW2IgKyA0ID4+IDJdOwogICAgICAgICAgICBiICs9IDg7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgaDsgbisrKSB7CiAgICAgICAgICAgICAgdmFyIG0gPSBBW2wgKyBuXSwgcCA9IFNiW2FdOwogICAgICAgICAgICAgIDAgPT09IG0gfHwgMTAgPT09IG0gPyAoKDEgPT09IGEgPyBlYSA6IHcpKEoocCwgMCkpLCBwLmxlbmd0aCA9IDApIDogcC5wdXNoKG0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUgKz0gaDsKICAgICAgICAgIH0KICAgICAgICAgIEZbZCA+PiAyXSA9IGU7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIFU6IChhLCBiKSA9PiB7CiAgICAgICAgICBVYihBLnN1YmFycmF5KGEsIGEgKyBiKSk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIGk6IGNjLAogICAgICAgIGQ6IGRjLAogICAgICAgIGU6IGVjLAogICAgICAgIHA6IGZjLAogICAgICAgIHk6IGdjLAogICAgICAgIGI6IGhjLAogICAgICAgIGE6IGljLAogICAgICAgIGg6IGpjLAogICAgICAgIG46IGtjLAogICAgICAgIEc6IGxjLAogICAgICAgIEs6IChhLCBiLCBjLCBkKSA9PiBaYihhLCBiLCBjLCBkKQogICAgICB9LCBXID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZnVuY3Rpb24gYShjKSB7CiAgICAgICAgICBXID0gYy5leHBvcnRzOwogICAgICAgICAgZmEgPSBXLmRhOwogICAgICAgICAgbGEoKTsKICAgICAgICAgIFMgPSBXLmhhOwogICAgICAgICAgbmEudW5zaGlmdChXLmVhKTsKICAgICAgICAgIEctLTsKICAgICAgICAgIGsubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEcpOwogICAgICAgICAgMCA9PSBHICYmIChudWxsICE9PSBxYSAmJiAoY2xlYXJJbnRlcnZhbChxYSksIHFhID0gbnVsbCksIEggJiYgKGMgPSBILCBIID0gbnVsbCwgYygpKSk7CiAgICAgICAgICByZXR1cm4gVzsKICAgICAgICB9CiAgICAgICAgdmFyIGIgPSB7IGE6IG1jIH07CiAgICAgICAgRysrOwogICAgICAgIGsubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEcpOwogICAgICAgIGlmIChrLmluc3RhbnRpYXRlV2FzbSkKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBrLmluc3RhbnRpYXRlV2FzbShiLCBhKTsKICAgICAgICAgIH0gY2F0Y2ggKGMpIHsKICAgICAgICAgICAgdyhgTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogJHtjfWApLCBiYShjKTsKICAgICAgICAgIH0KICAgICAgICB4YShiLCBmdW5jdGlvbihjKSB7CiAgICAgICAgICBhKGMuaW5zdGFuY2UpOwogICAgICAgIH0pLmNhdGNoKGJhKTsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0oKSwgYmMgPSAoYSkgPT4gKGJjID0gVy5mYSkoYSksIG9iID0gKGEpID0+IChvYiA9IFcuZ2EpKGEpLCBVID0gKGEpID0+IChVID0gVy5pYSkoYSksIFggPSAoYSwgYikgPT4gKFggPSBXLmphKShhLCBiKSwgWSA9IChhKSA9PiAoWSA9IFcua2EpKGEpLCBaID0gKCkgPT4gKFogPSBXLmxhKSgpOwogICAgICBrLmR5bkNhbGxfaWlqaiA9IChhLCBiLCBjLCBkLCBlLCBmKSA9PiAoay5keW5DYWxsX2lpamogPSBXLm5hKShhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgay5keW5DYWxsX3ZpamogPSAoYSwgYiwgYywgZCwgZSwgZikgPT4gKGsuZHluQ2FsbF92aWpqID0gVy5vYSkoYSwgYiwgYywgZCwgZSwgZik7CiAgICAgIGsuZHluQ2FsbF9qaWlpID0gKGEsIGIsIGMsIGQpID0+IChrLmR5bkNhbGxfamlpaSA9IFcucGEpKGEsIGIsIGMsIGQpOwogICAgICBrLmR5bkNhbGxfamlpID0gKGEsIGIsIGMpID0+IChrLmR5bkNhbGxfamlpID0gVy5xYSkoYSwgYiwgYyk7CiAgICAgIHZhciBuYyA9IGsuZHluQ2FsbF92aWlpaiA9IChhLCBiLCBjLCBkLCBlLCBmKSA9PiAobmMgPSBrLmR5bkNhbGxfdmlpaWogPSBXLnJhKShhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgay5keW5DYWxsX2ppamkgPSAoYSwgYiwgYywgZCwgZSkgPT4gKGsuZHluQ2FsbF9qaWppID0gVy5zYSkoYSwgYiwgYywgZCwgZSk7CiAgICAgIGsuZHluQ2FsbF92aWlqaWkgPSAoYSwgYiwgYywgZCwgZSwgZiwgbCkgPT4gKGsuZHluQ2FsbF92aWlqaWkgPSBXLnRhKShhLCBiLCBjLCBkLCBlLCBmLCBsKTsKICAgICAgay5keW5DYWxsX2lpaWlpaiA9IChhLCBiLCBjLCBkLCBlLCBmLCBsKSA9PiAoay5keW5DYWxsX2lpaWlpaiA9IFcudWEpKGEsIGIsIGMsIGQsIGUsIGYsIGwpOwogICAgICBrLmR5bkNhbGxfaWlpaWlqaiA9IChhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuKSA9PiAoay5keW5DYWxsX2lpaWlpamogPSBXLnZhKShhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuKTsKICAgICAgay5keW5DYWxsX2lpaWlpaWpqID0gKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0pID0+IChrLmR5bkNhbGxfaWlpaWlpamogPSBXLndhKShhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuLCBtKTsKICAgICAgZnVuY3Rpb24gaGMoYSwgYikgewogICAgICAgIHZhciBjID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBTLmdldChhKShiKTsKICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICBZKGMpOwogICAgICAgICAgaWYgKGQgIT09IGQgKyAwKSB0aHJvdyBkOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaWMoYSwgYiwgYykgewogICAgICAgIHZhciBkID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBTLmdldChhKShiLCBjKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBZKGQpOwogICAgICAgICAgaWYgKGUgIT09IGUgKyAwKSB0aHJvdyBlOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZWMoYSwgYiwgYywgZCkgewogICAgICAgIHZhciBlID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUy5nZXQoYSkoYiwgYywgZCk7CiAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgWShlKTsKICAgICAgICAgIGlmIChmICE9PSBmICsgMCkgdGhyb3cgZjsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRjKGEsIGIsIGMpIHsKICAgICAgICB2YXIgZCA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIFMuZ2V0KGEpKGIsIGMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIFkoZCk7CiAgICAgICAgICBpZiAoZSAhPT0gZSArIDApIHRocm93IGU7CiAgICAgICAgICBYKDEsIDApOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjYyhhLCBiKSB7CiAgICAgICAgdmFyIGMgPSBaKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBTLmdldChhKShiKTsKICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICBZKGMpOwogICAgICAgICAgaWYgKGQgIT09IGQgKyAwKSB0aHJvdyBkOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmMoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgIHZhciBsID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUy5nZXQoYSkoYiwgYywgZCwgZSwgZik7CiAgICAgICAgfSBjYXRjaCAoaCkgewogICAgICAgICAgWShsKTsKICAgICAgICAgIGlmIChoICE9PSBoICsgMCkgdGhyb3cgaDsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGtjKGEsIGIsIGMsIGQsIGUpIHsKICAgICAgICB2YXIgZiA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoYiwgYywgZCwgZSk7CiAgICAgICAgfSBjYXRjaCAobCkgewogICAgICAgICAgWShmKTsKICAgICAgICAgIGlmIChsICE9PSBsICsgMCkgdGhyb3cgbDsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGpjKGEsIGIsIGMsIGQpIHsKICAgICAgICB2YXIgZSA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoYiwgYywgZCk7CiAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgWShlKTsKICAgICAgICAgIGlmIChmICE9PSBmICsgMCkgdGhyb3cgZjsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdjKGEpIHsKICAgICAgICB2YXIgYiA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoKTsKICAgICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgICBZKGIpOwogICAgICAgICAgaWYgKGMgIT09IGMgKyAwKSB0aHJvdyBjOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbGMoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgIHZhciBsID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBuYyhhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgICB9IGNhdGNoIChoKSB7CiAgICAgICAgICBZKGwpOwogICAgICAgICAgaWYgKGggIT09IGggKyAwKSB0aHJvdyBoOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIG9jOwogICAgICBIID0gZnVuY3Rpb24gcGMoKSB7CiAgICAgICAgb2MgfHwgcWMoKTsKICAgICAgICBvYyB8fCAoSCA9IHBjKTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gcWMoKSB7CiAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgIGlmICghb2MgJiYgKG9jID0gdHJ1ZSwgay5jYWxsZWRSdW4gPSB0cnVlLCAhaGEpKSB7CiAgICAgICAgICAgIHlhKG5hKTsKICAgICAgICAgICAgYWEoayk7CiAgICAgICAgICAgIGlmIChrLm9uUnVudGltZUluaXRpYWxpemVkKSBrLm9uUnVudGltZUluaXRpYWxpemVkKCk7CiAgICAgICAgICAgIGlmIChrLnBvc3RSdW4pCiAgICAgICAgICAgICAgZm9yICgiZnVuY3Rpb24iID09IHR5cGVvZiBrLnBvc3RSdW4gJiYgKGsucG9zdFJ1biA9IFtrLnBvc3RSdW5dKTsgay5wb3N0UnVuLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICB2YXIgYiA9IGsucG9zdFJ1bi5zaGlmdCgpOwogICAgICAgICAgICAgICAgb2EudW5zaGlmdChiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHlhKG9hKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCEoMCA8IEcpKSB7CiAgICAgICAgICBpZiAoay5wcmVSdW4pIGZvciAoImZ1bmN0aW9uIiA9PSB0eXBlb2Ygay5wcmVSdW4gJiYgKGsucHJlUnVuID0gW2sucHJlUnVuXSk7IGsucHJlUnVuLmxlbmd0aDsgKSBwYSgpOwogICAgICAgICAgeWEobWEpOwogICAgICAgICAgMCA8IEcgfHwgKGsuc2V0U3RhdHVzID8gKGsuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgay5zZXRTdGF0dXMoIiIpOwogICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgYSgpOwogICAgICAgICAgfSwgMSkpIDogYSgpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGsucHJlSW5pdCkKICAgICAgICBmb3IgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGsucHJlSW5pdCAmJiAoay5wcmVJbml0ID0gW2sucHJlSW5pdF0pOyAwIDwgay5wcmVJbml0Lmxlbmd0aDsgKSBrLnByZUluaXQucG9wKCkoKTsKICAgICAgcWMoKTsKICAgICAgcmV0dXJuIHJlYWR5UHJvbWlzZTsKICAgIH07CiAgfSkoKTsKICB2YXIgZG90bG90dGllX3BsYXllcl9kZWZhdWx0ID0gY3JlYXRlRG90TG90dGllUGxheWVyTW9kdWxlOwoKICAvLyBzcmMvY29yZS9kb3Rsb3R0aWUtd2FzbS1sb2FkZXIudHMKICB2YXIgRG90TG90dGllV2FzbUxvYWRlciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlbmRlcmVyTG9hZGVyIGlzIGEgc3RhdGljIGNsYXNzIGFuZCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkLiIpOwogICAgfQogICAgc3RhdGljIGFzeW5jIF90cnlMb2FkKHVybCkgewogICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBkb3Rsb3R0aWVfcGxheWVyX2RlZmF1bHQoeyBsb2NhdGVGaWxlOiAoKSA9PiB1cmwgfSk7CiAgICAgIHJldHVybiBtb2R1bGU7CiAgICB9CiAgICAvKioKICAgICAqIFRyaWVzIHRvIGxvYWQgdGhlIFdBU00gbW9kdWxlIGZyb20gdGhlIHByaW1hcnkgVVJMLCBmYWxsaW5nIGJhY2sgdG8gYSBiYWNrdXAgVVJMIGlmIG5lY2Vzc2FyeS4KICAgICAqIFRocm93cyBhbiBlcnJvciBpZiBib3RoIFVSTHMgZmFpbCB0byBsb2FkIHRoZSBtb2R1bGUuCiAgICAgKiBAcmV0dXJucyBQcm9taXNlPE1vZHVsZT4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbG9hZGVkIG1vZHVsZS4KICAgICAqLwogICAgc3RhdGljIGFzeW5jIF9sb2FkV2l0aEJhY2t1cCgpIHsKICAgICAgaWYgKCF0aGlzLl9Nb2R1bGVQcm9taXNlKSB7CiAgICAgICAgdGhpcy5fTW9kdWxlUHJvbWlzZSA9IHRoaXMuX3RyeUxvYWQodGhpcy5fd2FzbVVSTCkuY2F0Y2goYXN5bmMgKGluaXRpYWxFcnJvcikgPT4gewogICAgICAgICAgY29uc3QgYmFja3VwVXJsID0gYGh0dHBzOi8vdW5wa2cuY29tLyR7UEFDS0FHRV9OQU1FfUAke1BBQ0tBR0VfVkVSU0lPTn0vZGlzdC9kb3Rsb3R0aWUtcGxheWVyLndhc21gOwogICAgICAgICAgY29uc29sZS53YXJuKGBQcmltYXJ5IFdBU00gbG9hZCBmYWlsZWQgZnJvbSAke3RoaXMuX3dhc21VUkx9LiBFcnJvcjogJHtpbml0aWFsRXJyb3IubWVzc2FnZX1gKTsKICAgICAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGluZyB0byBsb2FkIFdBU00gZnJvbSBiYWNrdXAgVVJMOiAke2JhY2t1cFVybH1gKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl90cnlMb2FkKGJhY2t1cFVybCk7CiAgICAgICAgICB9IGNhdGNoIChiYWNrdXBFcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQcmltYXJ5IFdBU00gVVJMIGZhaWxlZDogJHtpbml0aWFsRXJyb3IubWVzc2FnZX1gKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQmFja3VwIFdBU00gVVJMIGZhaWxlZDogJHtiYWNrdXBFcnJvci5tZXNzYWdlfWApOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIldBU00gbG9hZGluZyBmYWlsZWQgZnJvbSBhbGwgc291cmNlcy4iKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fTW9kdWxlUHJvbWlzZTsKICAgIH0KICAgIC8qKgogICAgICogUHVibGljIG1ldGhvZCB0byBsb2FkIHRoZSBXZWJBc3NlbWJseSBtb2R1bGUuCiAgICAgKiBVdGlsaXplcyBhIHByaW1hcnkgYW5kIGJhY2t1cCBVUkwgZm9yIHJvYnVzdG5lc3MuCiAgICAgKiBAcmV0dXJucyBQcm9taXNlPE1vZHVsZT4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbG9hZGVkIG1vZHVsZS4KICAgICAqLwogICAgc3RhdGljIGFzeW5jIGxvYWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9sb2FkV2l0aEJhY2t1cCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGEgbmV3IFVSTCBmb3IgdGhlIFdBU00gZmlsZSBhbmQgaW52YWxpZGF0ZXMgdGhlIGN1cnJlbnQgbW9kdWxlIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAtICBUaGUgbmV3IFVSTCBmb3IgdGhlIFdBU00gZmlsZS4KICAgICAqLwogICAgc3RhdGljIHNldFdhc21VcmwodXJsKSB7CiAgICAgIHRoaXMuX3dhc21VUkwgPSB1cmw7CiAgICAgIHRoaXMuX01vZHVsZVByb21pc2UgPSBudWxsOwogICAgfQogIH07CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbgogIF9fcHVibGljRmllbGQoRG90TG90dGllV2FzbUxvYWRlciwgIl9Nb2R1bGVQcm9taXNlIiwgbnVsbCk7CiAgLy8gVVJMIGZvciB0aGUgV0FTTSBmaWxlLCBjb25zdHJ1Y3RlZCB1c2luZyBwYWNrYWdlIGluZm9ybWF0aW9uCiAgX19wdWJsaWNGaWVsZChEb3RMb3R0aWVXYXNtTG9hZGVyLCAiX3dhc21VUkwiLCBgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS8ke1BBQ0tBR0VfTkFNRX1AJHtQQUNLQUdFX1ZFUlNJT059L2Rpc3QvZG90bG90dGllLXBsYXllci53YXNtYCk7CgogIC8vIHNyYy9ldmVudC1tYW5hZ2VyLnRzCiAgdmFyIEV2ZW50TWFuYWdlciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfZXZlbnRMaXN0ZW5lcnMiLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTsKICAgIH0KICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzLmdldCh0eXBlKTsKICAgICAgaWYgKCFsaXN0ZW5lcnMpIHsKICAgICAgICBsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgIHRoaXMuX2V2ZW50TGlzdGVuZXJzLnNldCh0eXBlLCBsaXN0ZW5lcnMpOwogICAgICB9CiAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpOwogICAgfQogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudExpc3RlbmVycy5nZXQodHlwZSk7CiAgICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm47CiAgICAgIGlmIChsaXN0ZW5lcikgewogICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpOwogICAgICAgIGlmIChsaXN0ZW5lcnMuc2l6ZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMuZGVsZXRlKHR5cGUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9ldmVudExpc3RlbmVycy5kZWxldGUodHlwZSk7CiAgICAgIH0KICAgIH0KICAgIGRpc3BhdGNoKGV2ZW50KSB7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzLmdldChldmVudC50eXBlKTsKICAgICAgbGlzdGVuZXJzPy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQpKTsKICAgIH0KICAgIHJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzKCkgewogICAgICB0aGlzLl9ldmVudExpc3RlbmVycy5jbGVhcigpOwogICAgfQogIH07CgogIC8vIHNyYy91dGlscy50cwogIGZ1bmN0aW9uIGlzSGV4Q29sb3IoY29sb3IpIHsKICAgIHJldHVybiAvXiMoW1xkYS1mXXs2fXxbXGRhLWZdezh9KSQvaXUudGVzdChjb2xvcik7CiAgfQogIGZ1bmN0aW9uIGhleFN0cmluZ1RvUkdCQUludChjb2xvckhleCkgewogICAgaWYgKCFpc0hleENvbG9yKGNvbG9ySGV4KSkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIGxldCBoZXggPSBjb2xvckhleC5yZXBsYWNlKCIjIiwgIiIpOwogICAgaGV4ID0gaGV4Lmxlbmd0aCA9PT0gNiA/IGAke2hleH1mZmAgOiBoZXg7CiAgICByZXR1cm4gcGFyc2VJbnQoaGV4LCAxNik7CiAgfQogIGZ1bmN0aW9uIGlzRG90TG90dGllKGZpbGVEYXRhKSB7CiAgICBpZiAoZmlsZURhdGEuYnl0ZUxlbmd0aCA8IDQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY29uc3QgZmlsZVNpZ25hdHVyZSA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLnNsaWNlKDAsIFpJUF9TSUdOQVRVUkUuYnl0ZUxlbmd0aCkpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBaSVBfU0lHTkFUVVJFLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGlmIChaSVBfU0lHTkFUVVJFW2ldICE9PSBmaWxlU2lnbmF0dXJlW2ldKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gaXNMb3R0aWVKU09OKGpzb24pIHsKICAgIHJldHVybiBMT1RUSUVfSlNPTl9NQU5EQVRPUllfRklFTERTLmV2ZXJ5KChmaWVsZCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpzb24sIGZpZWxkKSk7CiAgfQogIGZ1bmN0aW9uIGlzTG90dGllKGZpbGVEYXRhKSB7CiAgICBpZiAodHlwZW9mIGZpbGVEYXRhID09PSAic3RyaW5nIikgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBpc0xvdHRpZUpTT04oSlNPTi5wYXJzZShmaWxlRGF0YSkpOwogICAgICB9IGNhdGNoIChfZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGlzTG90dGllSlNPTihmaWxlRGF0YSk7CiAgICB9CiAgfQoKICAvLyBzcmMvZG90bG90dGllLnRzCiAgdmFyIGNyZWF0ZUNvcmVNb2RlID0gKG1vZGUsIG1vZHVsZSkgPT4gewogICAgaWYgKG1vZGUgPT09ICJyZXZlcnNlIikgewogICAgICByZXR1cm4gbW9kdWxlLk1vZGUuUmV2ZXJzZTsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gImJvdW5jZSIpIHsKICAgICAgcmV0dXJuIG1vZHVsZS5Nb2RlLkJvdW5jZTsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gInJldmVyc2UtYm91bmNlIikgewogICAgICByZXR1cm4gbW9kdWxlLk1vZGUuUmV2ZXJzZUJvdW5jZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBtb2R1bGUuTW9kZS5Gb3J3YXJkOwogICAgfQogIH07CiAgdmFyIGNyZWF0ZUNvcmVGaXQgPSAoZml0LCBtb2R1bGUpID0+IHsKICAgIGlmIChmaXQgPT09ICJjb250YWluIikgewogICAgICByZXR1cm4gbW9kdWxlLkZpdC5Db250YWluOwogICAgfSBlbHNlIGlmIChmaXQgPT09ICJjb3ZlciIpIHsKICAgICAgcmV0dXJuIG1vZHVsZS5GaXQuQ292ZXI7CiAgICB9IGVsc2UgaWYgKGZpdCA9PT0gImZpbGwiKSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0LkZpbGw7CiAgICB9IGVsc2UgaWYgKGZpdCA9PT0gImZpdC1oZWlnaHQiKSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0LkZpdEhlaWdodDsKICAgIH0gZWxzZSBpZiAoZml0ID09PSAiZml0LXdpZHRoIikgewogICAgICByZXR1cm4gbW9kdWxlLkZpdC5GaXRXaWR0aDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0Lk5vbmU7CiAgICB9CiAgfTsKICB2YXIgY3JlYXRlQ29yZUFsaWduID0gKGFsaWduLCBtb2R1bGUpID0+IHsKICAgIGNvbnN0IGNvcmVBbGlnbiA9IG5ldyBtb2R1bGUuVmVjdG9yRmxvYXQoKTsKICAgIGNvcmVBbGlnbi5wdXNoX2JhY2soYWxpZ25bMF0pOwogICAgY29yZUFsaWduLnB1c2hfYmFjayhhbGlnblsxXSk7CiAgICByZXR1cm4gY29yZUFsaWduOwogIH07CiAgdmFyIGNyZWF0ZUNvcmVTZWdtZW50ID0gKHNlZ21lbnQsIG1vZHVsZSkgPT4gewogICAgY29uc3QgY29yZXNlZ21lbnQgPSBuZXcgbW9kdWxlLlZlY3RvckZsb2F0KCk7CiAgICBpZiAoc2VnbWVudC5sZW5ndGggIT09IDIpIHJldHVybiBjb3Jlc2VnbWVudDsKICAgIGNvcmVzZWdtZW50LnB1c2hfYmFjayhzZWdtZW50WzBdKTsKICAgIGNvcmVzZWdtZW50LnB1c2hfYmFjayhzZWdtZW50WzFdKTsKICAgIHJldHVybiBjb3Jlc2VnbWVudDsKICB9OwogIHZhciBfRG90TG90dGllID0gY2xhc3MgX0RvdExvdHRpZSB7CiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2NhbnZhcyIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfY29udGV4dCIsIG51bGwpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfZXZlbnRNYW5hZ2VyIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9hbmltYXRpb25GcmFtZUlkIiwgbnVsbCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9mcmFtZU1hbmFnZXIiKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2RvdExvdHRpZUNvcmUiLCBudWxsKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX3JlbmRlckNvbmZpZyIsIHt9KTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2lzRnJvemVuIiwgZmFsc2UpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfYmFja2dyb3VuZENvbG9yIiwgbnVsbCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyVXBNZXRob2QiKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX3BvaW50ZXJEb3duTWV0aG9kIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyTW92ZU1ldGhvZCIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfcG9pbnRlckVudGVyTWV0aG9kIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyRXhpdE1ldGhvZCIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfb25Db21wbGV0ZU1ldGhvZCIpOwogICAgICB0aGlzLl9jYW52YXMgPSBjb25maWcuY2FudmFzOwogICAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTsKICAgICAgdGhpcy5fZnJhbWVNYW5hZ2VyID0gbmV3IEFuaW1hdGlvbkZyYW1lTWFuYWdlcigpOwogICAgICB0aGlzLl9yZW5kZXJDb25maWcgPSBjb25maWcucmVuZGVyQ29uZmlnID8/IHt9OwogICAgICBEb3RMb3R0aWVXYXNtTG9hZGVyLmxvYWQoKS50aGVuKChtb2R1bGUpID0+IHsKICAgICAgICBfRG90TG90dGllLl93YXNtTW9kdWxlID0gbW9kdWxlOwogICAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUgPSBuZXcgbW9kdWxlLkRvdExvdHRpZVBsYXllcih7CiAgICAgICAgICBhdXRvcGxheTogY29uZmlnLmF1dG9wbGF5ID8/IGZhbHNlLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAwLAogICAgICAgICAgbG9vcEFuaW1hdGlvbjogY29uZmlnLmxvb3AgPz8gZmFsc2UsCiAgICAgICAgICBtb2RlOiBjcmVhdGVDb3JlTW9kZShjb25maWcubW9kZSA/PyAiZm9yd2FyZCIsIG1vZHVsZSksCiAgICAgICAgICBzZWdtZW50OiBjcmVhdGVDb3JlU2VnbWVudChjb25maWcuc2VnbWVudCA/PyBbXSwgbW9kdWxlKSwKICAgICAgICAgIHNwZWVkOiBjb25maWcuc3BlZWQgPz8gMSwKICAgICAgICAgIHVzZUZyYW1lSW50ZXJwb2xhdGlvbjogY29uZmlnLnVzZUZyYW1lSW50ZXJwb2xhdGlvbiA/PyB0cnVlLAogICAgICAgICAgbWFya2VyOiBjb25maWcubWFya2VyID8/ICIiLAogICAgICAgICAgbGF5b3V0OiBjb25maWcubGF5b3V0ID8gewogICAgICAgICAgICBhbGlnbjogY3JlYXRlQ29yZUFsaWduKGNvbmZpZy5sYXlvdXQuYWxpZ24sIG1vZHVsZSksCiAgICAgICAgICAgIGZpdDogY3JlYXRlQ29yZUZpdChjb25maWcubGF5b3V0LmZpdCwgbW9kdWxlKQogICAgICAgICAgfSA6IG1vZHVsZS5jcmVhdGVEZWZhdWx0TGF5b3V0KCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAicmVhZHkiIH0pOwogICAgICAgIGlmIChjb25maWcuZGF0YSkgewogICAgICAgICAgdGhpcy5fbG9hZEZyb21EYXRhKGNvbmZpZy5kYXRhKTsKICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zcmMpIHsKICAgICAgICAgIHRoaXMuX2xvYWRGcm9tU3JjKGNvbmZpZy5zcmMpOwogICAgICAgIH0KICAgICAgICBpZiAoY29uZmlnLmJhY2tncm91bmRDb2xvcikgewogICAgICAgICAgdGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IoY29uZmlnLmJhY2tncm91bmRDb2xvcik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogImxvYWRFcnJvciIsCiAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCB3YXNtIG1vZHVsZTogJHtlcnJvcn1gKQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5fcG9pbnRlclVwTWV0aG9kID0gdGhpcy5fb25Qb2ludGVyVXAuYmluZCh0aGlzKTsKICAgICAgdGhpcy5fcG9pbnRlckRvd25NZXRob2QgPSB0aGlzLl9vblBvaW50ZXJEb3duLmJpbmQodGhpcyk7CiAgICAgIHRoaXMuX3BvaW50ZXJNb3ZlTWV0aG9kID0gdGhpcy5fb25Qb2ludGVyTW92ZS5iaW5kKHRoaXMpOwogICAgICB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QgPSB0aGlzLl9vblBvaW50ZXJFbnRlci5iaW5kKHRoaXMpOwogICAgICB0aGlzLl9wb2ludGVyRXhpdE1ldGhvZCA9IHRoaXMuX29uUG9pbnRlckxlYXZlLmJpbmQodGhpcyk7CiAgICAgIHRoaXMuX29uQ29tcGxldGVNZXRob2QgPSB0aGlzLl9vbkNvbXBsZXRlLmJpbmQodGhpcyk7CiAgICB9CiAgICBfZGlzcGF0Y2hFcnJvcihtZXNzYWdlKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJsb2FkRXJyb3IiLCBlcnJvcjogbmV3IEVycm9yKG1lc3NhZ2UpIH0pOwogICAgfQogICAgYXN5bmMgX2ZldGNoRGF0YShzcmMpIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzcmMpOwogICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggYW5pbWF0aW9uIGRhdGEgZnJvbSBVUkw6ICR7c3JjfS4gJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7CiAgICAgIH0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7CiAgICAgIGlmIChpc0RvdExvdHRpZShkYXRhKSkgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSk7CiAgICB9CiAgICBfbG9hZEZyb21EYXRhKGRhdGEpIHsKICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUgPT09IG51bGwpIHJldHVybjsKICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGg7CiAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuX2NhbnZhcy5oZWlnaHQ7CiAgICAgIGxldCBsb2FkZWQgPSBmYWxzZTsKICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAic3RyaW5nIikgewogICAgICAgIGlmICghaXNMb3R0aWUoZGF0YSkpIHsKICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXJyb3IoCiAgICAgICAgICAgICJJbnZhbGlkIExvdHRpZSBKU09OIHN0cmluZzogVGhlIHByb3ZpZGVkIHN0cmluZyBkb2VzIG5vdCBjb25mb3JtIHRvIHRoZSBMb3R0aWUgSlNPTiBmb3JtYXQuIgogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbG9hZGVkID0gdGhpcy5fZG90TG90dGllQ29yZS5sb2FkQW5pbWF0aW9uRGF0YShkYXRhLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICBpZiAoIWlzRG90TG90dGllKGRhdGEpKSB7CiAgICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKAogICAgICAgICAgICAiSW52YWxpZCBkb3RMb3R0aWUgQXJyYXlCdWZmZXI6IFRoZSBwcm92aWRlZCBBcnJheUJ1ZmZlciBkb2VzIG5vdCBjb25mb3JtIHRvIHRoZSBkb3RMb3R0aWUgZm9ybWF0LiIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxvYWRlZCA9IHRoaXMuX2RvdExvdHRpZUNvcmUubG9hZERvdExvdHRpZURhdGEoZGF0YSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICJvYmplY3QiKSB7CiAgICAgICAgaWYgKCFpc0xvdHRpZShkYXRhKSkgewogICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFcnJvcigKICAgICAgICAgICAgIkludmFsaWQgTG90dGllIEpTT04gb2JqZWN0OiBUaGUgcHJvdmlkZWQgb2JqZWN0IGRvZXMgbm90IGNvbmZvcm0gdG8gdGhlIExvdHRpZSBKU09OIGZvcm1hdC4iCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRBbmltYXRpb25EYXRhKEpTT04uc3RyaW5naWZ5KGRhdGEpLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKAogICAgICAgICAgYFVuc3VwcG9ydGVkIGRhdGEgdHlwZSBmb3IgYW5pbWF0aW9uIGRhdGEuIEV4cGVjdGVkOiAKICAgICAgICAgIC0gc3RyaW5nIChMb3R0aWUgSlNPTiksCiAgICAgICAgICAtIEFycmF5QnVmZmVyIChkb3RMb3R0aWUpLAogICAgICAgICAgLSBvYmplY3QgKExvdHRpZSBKU09OKS4gCiAgICAgICAgICBSZWNlaXZlZDogJHt0eXBlb2YgZGF0YX1gCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGxvYWRlZCkgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJsb2FkIiB9KTsKICAgICAgICBpZiAoSVNfQlJPV1NFUikgewogICAgICAgICAgdGhpcy5yZXNpemUoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJmcmFtZSIsCiAgICAgICAgICBjdXJyZW50RnJhbWU6IHRoaXMuX2RvdExvdHRpZUNvcmUuY3VycmVudEZyYW1lKCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKS5hdXRvcGxheSkgewogICAgICAgICAgdGhpcy5fZG90TG90dGllQ29yZS5wbGF5KCk7CiAgICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5pc1BsYXlpbmcoKSkgewogICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAicGxheSIgfSk7CiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJzb21ldGhpbmcgd2VudCB3cm9uZywgdGhlIGFuaW1hdGlvbiB3YXMgc3VwcG9zZSB0byBhdXRvcGxheSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKCJGYWlsZWQgdG8gbG9hZCBhbmltYXRpb24gZGF0YSIpOwogICAgICB9CiAgICB9CiAgICBfbG9hZEZyb21TcmMoc3JjKSB7CiAgICAgIHRoaXMuX2ZldGNoRGF0YShzcmMpLnRoZW4oKGRhdGEpID0+IHRoaXMuX2xvYWRGcm9tRGF0YShkYXRhKSkuY2F0Y2goKGVycm9yKSA9PiB0aGlzLl9kaXNwYXRjaEVycm9yKGBGYWlsZWQgdG8gbG9hZCBhbmltYXRpb24gZGF0YSBmcm9tIFVSTDogJHtzcmN9LiAke2Vycm9yfWApKTsKICAgIH0KICAgIGdldCBhY3RpdmVBbmltYXRpb25JZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmFjdGl2ZUFuaW1hdGlvbklkKCk7CiAgICB9CiAgICBnZXQgYWN0aXZlVGhlbWVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmFjdGl2ZVRoZW1lSWQoKTsKICAgIH0KICAgIGdldCBsYXlvdXQoKSB7CiAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmxheW91dDsKICAgICAgaWYgKGxheW91dCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhbGlnbjogW2xheW91dC5hbGlnbi5nZXQoMCksIGxheW91dC5hbGlnbi5nZXQoMSldLAogICAgICAgICAgZml0OiAoKCkgPT4gewogICAgICAgICAgICBzd2l0Y2ggKGxheW91dC5maXQpIHsKICAgICAgICAgICAgICBjYXNlIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/LkZpdC5Db250YWluOgogICAgICAgICAgICAgICAgcmV0dXJuICJjb250YWluIjsKICAgICAgICAgICAgICBjYXNlIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/LkZpdC5Db3ZlcjoKICAgICAgICAgICAgICAgIHJldHVybiAiY292ZXIiOwogICAgICAgICAgICAgIGNhc2UgX0RvdExvdHRpZS5fd2FzbU1vZHVsZT8uRml0LkZpbGw6CiAgICAgICAgICAgICAgICByZXR1cm4gImZpbGwiOwogICAgICAgICAgICAgIGNhc2UgX0RvdExvdHRpZS5fd2FzbU1vZHVsZT8uRml0LkZpdEhlaWdodDoKICAgICAgICAgICAgICAgIHJldHVybiAiZml0LWhlaWdodCI7CiAgICAgICAgICAgICAgY2FzZSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5GaXQuRml0V2lkdGg6CiAgICAgICAgICAgICAgICByZXR1cm4gImZpdC13aWR0aCI7CiAgICAgICAgICAgICAgY2FzZSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5GaXQuTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiAibm9uZSI7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAiY29udGFpbiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKCkKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICBnZXQgbWFya2VyKCkgewogICAgICBjb25zdCBtYXJrZXIgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5jb25maWcoKS5tYXJrZXI7CiAgICAgIHJldHVybiBtYXJrZXI7CiAgICB9CiAgICBnZXQgbWFuaWZlc3QoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbWFuaWZlc3QgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5tYW5pZmVzdFN0cmluZygpOwogICAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8ICFtYW5pZmVzdCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgbWFuaWZlc3RKc29uID0gSlNPTi5wYXJzZShtYW5pZmVzdCk7CiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1hbmlmZXN0SnNvbikubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gbWFuaWZlc3RKc29uOwogICAgICB9IGNhdGNoIChfZXJyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIGdldCByZW5kZXJDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJDb25maWc7CiAgICB9CiAgICBnZXQgc2VnbWVudCgpIHsKICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnNlZ21lbnQ7CiAgICAgIGlmIChzZWdtZW50ICYmIHNlZ21lbnQuc2l6ZSgpID09PSAyKSB7CiAgICAgICAgcmV0dXJuIFtzZWdtZW50LmdldCgwKSwgc2VnbWVudC5nZXQoMSldOwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICBnZXQgbG9vcCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmxvb3BBbmltYXRpb24gPz8gZmFsc2U7CiAgICB9CiAgICBnZXQgbW9kZSgpIHsKICAgICAgY29uc3QgbW9kZSA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLm1vZGU7CiAgICAgIGlmIChtb2RlID09PSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5Nb2RlLlJldmVyc2UpIHsKICAgICAgICByZXR1cm4gInJldmVyc2UiOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/Lk1vZGUuQm91bmNlKSB7CiAgICAgICAgcmV0dXJuICJib3VuY2UiOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/Lk1vZGUuUmV2ZXJzZUJvdW5jZSkgewogICAgICAgIHJldHVybiAicmV2ZXJzZS1ib3VuY2UiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiZm9yd2FyZCI7CiAgICAgIH0KICAgIH0KICAgIGdldCBpc0Zyb3plbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2lzRnJvemVuOwogICAgfQogICAgZ2V0IGJhY2tncm91bmRDb2xvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvciA/PyAiIjsKICAgIH0KICAgIGdldCBhdXRvcGxheSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmF1dG9wbGF5ID8/IGZhbHNlOwogICAgfQogICAgZ2V0IHVzZUZyYW1lSW50ZXJwb2xhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnVzZUZyYW1lSW50ZXJwb2xhdGlvbiA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBzcGVlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnNwZWVkID8/IDA7CiAgICB9CiAgICBnZXQgaXNSZWFkeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmUgIT09IG51bGw7CiAgICB9CiAgICBnZXQgaXNMb2FkZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5pc0xvYWRlZCgpID8/IGZhbHNlOwogICAgfQogICAgZ2V0IGlzUGxheWluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmlzUGxheWluZygpID8/IGZhbHNlOwogICAgfQogICAgZ2V0IGlzUGF1c2VkKCkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uaXNQYXVzZWQoKSA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBpc1N0b3BwZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5pc1N0b3BwZWQoKSA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBjdXJyZW50RnJhbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5jdXJyZW50RnJhbWUoKSA/PyAwOwogICAgfQogICAgZ2V0IGxvb3BDb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/Lmxvb3BDb3VudCgpID8/IDA7CiAgICB9CiAgICBnZXQgdG90YWxGcmFtZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy50b3RhbEZyYW1lcygpID8/IDA7CiAgICB9CiAgICBnZXQgZHVyYXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5kdXJhdGlvbigpID8/IDA7CiAgICB9CiAgICBnZXQgc2VnbWVudER1cmF0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uc2VnbWVudER1cmF0aW9uKCkgPz8gMDsKICAgIH0KICAgIGdldCBjYW52YXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYW52YXM7CiAgICB9CiAgICBsb2FkKGNvbmZpZykgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCB8fCBfRG90TG90dGllLl93YXNtTW9kdWxlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICBhdXRvcGxheTogY29uZmlnLmF1dG9wbGF5ID8/IGZhbHNlLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogMCwKICAgICAgICBsb29wQW5pbWF0aW9uOiBjb25maWcubG9vcCA/PyBmYWxzZSwKICAgICAgICBtb2RlOiBjcmVhdGVDb3JlTW9kZShjb25maWcubW9kZSA/PyAiZm9yd2FyZCIsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpLAogICAgICAgIHNlZ21lbnQ6IGNyZWF0ZUNvcmVTZWdtZW50KGNvbmZpZy5zZWdtZW50ID8/IFtdLCBfRG90TG90dGllLl93YXNtTW9kdWxlKSwKICAgICAgICBzcGVlZDogY29uZmlnLnNwZWVkID8/IDEsCiAgICAgICAgdXNlRnJhbWVJbnRlcnBvbGF0aW9uOiBjb25maWcudXNlRnJhbWVJbnRlcnBvbGF0aW9uID8/IHRydWUsCiAgICAgICAgbWFya2VyOiBjb25maWcubWFya2VyID8/ICIiLAogICAgICAgIGxheW91dDogY29uZmlnLmxheW91dCA/IHsKICAgICAgICAgIGFsaWduOiBjcmVhdGVDb3JlQWxpZ24oY29uZmlnLmxheW91dC5hbGlnbiwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSksCiAgICAgICAgICBmaXQ6IGNyZWF0ZUNvcmVGaXQoY29uZmlnLmxheW91dC5maXQsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpCiAgICAgICAgfSA6IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUuY3JlYXRlRGVmYXVsdExheW91dCgpCiAgICAgIH0pOwogICAgICBpZiAoY29uZmlnLmRhdGEpIHsKICAgICAgICB0aGlzLl9sb2FkRnJvbURhdGEoY29uZmlnLmRhdGEpOwogICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zcmMpIHsKICAgICAgICB0aGlzLl9sb2FkRnJvbVNyYyhjb25maWcuc3JjKTsKICAgICAgfQogICAgICB0aGlzLnNldEJhY2tncm91bmRDb2xvcihjb25maWcuYmFja2dyb3VuZENvbG9yID8/ICIiKTsKICAgIH0KICAgIF9yZW5kZXIoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2NvbnRleHQgPT09IG51bGwpIHJldHVybiBmYWxzZTsKICAgICAgY29uc3QgcmVuZGVyZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnJlbmRlcigpOwogICAgICBpZiAocmVuZGVyZWQpIHsKICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmJ1ZmZlcigpOwogICAgICAgIGNvbnN0IGNsYW1wZWRCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYnVmZmVyLCAwLCB0aGlzLl9jYW52YXMud2lkdGggKiB0aGlzLl9jYW52YXMuaGVpZ2h0ICogNCk7CiAgICAgICAgbGV0IGltYWdlRGF0YSA9IG51bGw7CiAgICAgICAgaWYgKHR5cGVvZiBJbWFnZURhdGEgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBpbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpOwogICAgICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KGNsYW1wZWRCdWZmZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbWFnZURhdGEgPSBuZXcgSW1hZ2VEYXRhKGNsYW1wZWRCdWZmZXIsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJyZW5kZXIiLAogICAgICAgICAgY3VycmVudEZyYW1lOiB0aGlzLl9kb3RMb3R0aWVDb3JlLmN1cnJlbnRGcmFtZSgpCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgX2RyYXcoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2NvbnRleHQgPT09IG51bGwgfHwgIXRoaXMuX2RvdExvdHRpZUNvcmUuaXNQbGF5aW5nKCkpIHJldHVybjsKICAgICAgY29uc3QgbmV4dEZyYW1lID0gdGhpcy5fZG90TG90dGllQ29yZS5yZXF1ZXN0RnJhbWUoKTsKICAgICAgY29uc3QgdXBkYXRlZCA9IHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0RnJhbWUobmV4dEZyYW1lKTsKICAgICAgaWYgKHVwZGF0ZWQpIHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogImZyYW1lIiwKICAgICAgICAgIGN1cnJlbnRGcmFtZTogdGhpcy5fZG90TG90dGllQ29yZS5jdXJyZW50RnJhbWUoKQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlbmRlcmVkID0gdGhpcy5fcmVuZGVyKCk7CiAgICAgICAgaWYgKHJlbmRlcmVkKSB7CiAgICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5pc0NvbXBsZXRlKCkpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCkubG9vcEFuaW1hdGlvbikgewogICAgICAgICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAibG9vcCIsCiAgICAgICAgICAgICAgICBsb29wQ291bnQ6IHRoaXMuX2RvdExvdHRpZUNvcmUubG9vcENvdW50KCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAiY29tcGxldGUiIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICB9CiAgICBwbGF5KCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICBjb25zdCBvayA9IHRoaXMuX2RvdExvdHRpZUNvcmUucGxheSgpOwogICAgICBpZiAob2sgfHwgdGhpcy5fZG90TG90dGllQ29yZS5pc1BsYXlpbmcoKSkgewogICAgICAgIHRoaXMuX2lzRnJvemVuID0gZmFsc2U7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogInBsYXkiIH0pOwogICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICAgIH0KICAgIH0KICAgIHBhdXNlKCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICBjb25zdCBvayA9IHRoaXMuX2RvdExvdHRpZUNvcmUucGF1c2UoKTsKICAgICAgaWYgKG9rIHx8IHRoaXMuX2RvdExvdHRpZUNvcmUuaXNQYXVzZWQoKSkgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJwYXVzZSIgfSk7CiAgICAgIH0KICAgIH0KICAgIHN0b3AoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGNvbnN0IG9rID0gdGhpcy5fZG90TG90dGllQ29yZS5zdG9wKCk7CiAgICAgIGlmIChvaykgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJmcmFtZSIsIGN1cnJlbnRGcmFtZTogdGhpcy5fZG90TG90dGllQ29yZS5jdXJyZW50RnJhbWUoKSB9KTsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAic3RvcCIgfSk7CiAgICAgIH0KICAgIH0KICAgIHNldEZyYW1lKGZyYW1lKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGlmIChmcmFtZSA8IDAgfHwgZnJhbWUgPiB0aGlzLl9kb3RMb3R0aWVDb3JlLnRvdGFsRnJhbWVzKCkpIHJldHVybjsKICAgICAgY29uc3Qgb2sgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnNlZWsoZnJhbWUpOwogICAgICBpZiAob2spIHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAiZnJhbWUiLCBjdXJyZW50RnJhbWU6IHRoaXMuX2RvdExvdHRpZUNvcmUuY3VycmVudEZyYW1lKCkgfSk7CiAgICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIH0KICAgIH0KICAgIHNldFNwZWVkKHNwZWVkKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIHNwZWVkCiAgICAgIH0pOwogICAgfQogICAgc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGlmIChJU19CUk9XU0VSICYmIHRoaXMuX2NhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7CiAgICAgICAgdGhpcy5fY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAgIC4uLnRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCksCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGhleFN0cmluZ1RvUkdCQUludChjb2xvcikKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsKICAgIH0KICAgIHNldExvb3AobG9vcCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICBsb29wQW5pbWF0aW9uOiBsb29wCiAgICAgIH0pOwogICAgfQogICAgc2V0VXNlRnJhbWVJbnRlcnBvbGF0aW9uKHVzZUZyYW1lSW50ZXJwb2xhdGlvbikgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICB1c2VGcmFtZUludGVycG9sYXRpb24KICAgICAgfSk7CiAgICB9CiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTsKICAgIH0KICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpOwogICAgfQogICAgZGVzdHJveSgpIHsKICAgICAgdGhpcy5fZG90TG90dGllQ29yZT8uZGVsZXRlKCk7CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUgPSBudWxsOwogICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICB0eXBlOiAiZGVzdHJveSIKICAgICAgfSk7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5yZW1vdmVBbGxFdmVudExpc3RlbmVycygpOwogICAgICB0aGlzLl9jbGVhbnVwU3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICB9CiAgICBmcmVlemUoKSB7CiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZUlkID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2ZyYW1lTWFuYWdlci5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUlkKTsKICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7CiAgICAgIHRoaXMuX2lzRnJvemVuID0gdHJ1ZTsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogImZyZWV6ZSIgfSk7CiAgICB9CiAgICB1bmZyZWV6ZSgpIHsKICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgIT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IHRoaXMuX2ZyYW1lTWFuYWdlci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fZHJhdy5iaW5kKHRoaXMpKTsKICAgICAgdGhpcy5faXNGcm96ZW4gPSBmYWxzZTsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogInVuZnJlZXplIiB9KTsKICAgIH0KICAgIHJlc2l6ZSgpIHsKICAgICAgaWYgKElTX0JST1dTRVIgJiYgdGhpcy5fY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsKICAgICAgICBjb25zdCBkcHIgPSB0aGlzLl9yZW5kZXJDb25maWcuZGV2aWNlUGl4ZWxSYXRpbyB8fCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOwogICAgICAgIGNvbnN0IHsgaGVpZ2h0OiBjbGllbnRIZWlnaHQsIHdpZHRoOiBjbGllbnRXaWR0aCB9ID0gdGhpcy5fY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IGNsaWVudFdpZHRoICogZHByOwogICAgICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBjbGllbnRIZWlnaHQgKiBkcHI7CiAgICAgIH0KICAgICAgY29uc3Qgb2sgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5yZXNpemUodGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTsKICAgICAgaWYgKG9rKSB7CiAgICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIH0KICAgIH0KICAgIHNldFNlZ21lbnQoc3RhcnRGcmFtZSwgZW5kRnJhbWUpIHsKICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUgPT09IG51bGwgfHwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICBzZWdtZW50OiBjcmVhdGVDb3JlU2VnbWVudChbc3RhcnRGcmFtZSwgZW5kRnJhbWVdLCBfRG90TG90dGllLl93YXNtTW9kdWxlKQogICAgICB9KTsKICAgIH0KICAgIHNldE1vZGUobW9kZSkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCB8fCBfRG90TG90dGllLl93YXNtTW9kdWxlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIG1vZGU6IGNyZWF0ZUNvcmVNb2RlKG1vZGUsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpCiAgICAgIH0pOwogICAgfQogICAgc2V0UmVuZGVyQ29uZmlnKGNvbmZpZykgewogICAgICB0aGlzLl9yZW5kZXJDb25maWcgPSBjb25maWc7CiAgICB9CiAgICBsb2FkQW5pbWF0aW9uKGFuaW1hdGlvbklkKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2RvdExvdHRpZUNvcmUuYWN0aXZlQW5pbWF0aW9uSWQoKSA9PT0gYW5pbWF0aW9uSWQpIHJldHVybjsKICAgICAgY29uc3QgbG9hZGVkID0gdGhpcy5fZG90TG90dGllQ29yZS5sb2FkQW5pbWF0aW9uKGFuaW1hdGlvbklkLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpOwogICAgICBpZiAobG9hZGVkKSB7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogImxvYWQiIH0pOwogICAgICAgIHRoaXMucmVzaXplKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJsb2FkRXJyb3IiLAogICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFuaW1hdGlvbiA6JHthbmltYXRpb25JZH1gKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICBzZXRNYXJrZXIobWFya2VyKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIG1hcmtlcgogICAgICB9KTsKICAgIH0KICAgIG1hcmtlcnMoKSB7CiAgICAgIGNvbnN0IG1hcmtlcnMgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5tYXJrZXJzKCk7CiAgICAgIGlmIChtYXJrZXJzKSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrZXJzLnNpemUoKTsgaSArPSAxKSB7CiAgICAgICAgICBjb25zdCBtYXJrZXIgPSBtYXJrZXJzLmdldChpKTsKICAgICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgICAgbmFtZTogbWFya2VyLm5hbWUsCiAgICAgICAgICAgIHRpbWU6IG1hcmtlci50aW1lLAogICAgICAgICAgICBkdXJhdGlvbjogbWFya2VyLmR1cmF0aW9uCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICByZXR1cm4gW107CiAgICB9CiAgICBsb2FkVGhlbWUodGhlbWVJZCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRUaGVtZSh0aGVtZUlkKTsKICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIHJldHVybiBsb2FkZWQ7CiAgICB9CiAgICBsb2FkVGhlbWVEYXRhKHRoZW1lRGF0YSkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRUaGVtZURhdGEodGhlbWVEYXRhKTsKICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIHJldHVybiBsb2FkZWQ7CiAgICB9CiAgICBzZXRMYXlvdXQobGF5b3V0KSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUgPT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5fZG90TG90dGllQ29yZS5zZXRDb25maWcoewogICAgICAgIC4uLnRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCksCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICBhbGlnbjogY3JlYXRlQ29yZUFsaWduKGxheW91dC5hbGlnbiwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSksCiAgICAgICAgICBmaXQ6IGNyZWF0ZUNvcmVGaXQobGF5b3V0LmZpdCwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgc2V0Vmlld3BvcnQoeCwgeSwgd2lkdGgsIGhlaWdodCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZS5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICAgIH0KICAgIHN0YXRpYyBzZXRXYXNtVXJsKHVybCkgewogICAgICBEb3RMb3R0aWVXYXNtTG9hZGVyLnNldFdhc21VcmwodXJsKTsKICAgIH0KICAgIGxvYWRTdGF0ZU1hY2hpbmUoc3RhdGVNYWNoaW5lSWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmxvYWRTdGF0ZU1hY2hpbmUoc3RhdGVNYWNoaW5lSWQpID8/IGZhbHNlOwogICAgfQogICAgc3RhcnRTdGF0ZU1hY2hpbmUoKSB7CiAgICAgIGNvbnN0IHN0YXJ0ZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5zdGFydFN0YXRlTWFjaGluZSgpID8/IGZhbHNlOwogICAgICBpZiAoc3RhcnRlZCkgewogICAgICAgIHRoaXMuX3NldHVwU3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXJ0ZWQ7CiAgICB9CiAgICBzdG9wU3RhdGVNYWNoaW5lKCkgewogICAgICBjb25zdCBzdG9wcGVkID0gdGhpcy5fZG90TG90dGllQ29yZT8uc3RvcFN0YXRlTWFjaGluZSgpID8/IGZhbHNlOwogICAgICBpZiAoc3RvcHBlZCkgewogICAgICAgIHRoaXMuX2NsZWFudXBTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKTsKICAgICAgfQogICAgICByZXR1cm4gc3RvcHBlZDsKICAgIH0KICAgIF9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpIHsKICAgICAgY29uc3QgcmVjdCA9IHRoaXMuX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3Qgc2NhbGVYID0gdGhpcy5fY2FudmFzLndpZHRoIC8gcmVjdC53aWR0aDsKICAgICAgY29uc3Qgc2NhbGVZID0gdGhpcy5fY2FudmFzLmhlaWdodCAvIHJlY3QuaGVpZ2h0OwogICAgICBjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gdGhpcy5fcmVuZGVyQ29uZmlnLmRldmljZVBpeGVsUmF0aW8gfHwgd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTsKICAgICAgY29uc3QgeCA9IChldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0KSAqIHNjYWxlWCAvIGRldmljZVBpeGVsUmF0aW87CiAgICAgIGNvbnN0IHkgPSAoZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAqIHNjYWxlWSAvIGRldmljZVBpeGVsUmF0aW87CiAgICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICAgIH07CiAgICB9CiAgICBfb25Qb2ludGVyVXAoZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyVXA6ICR7eH0gJHt5fWApOwogICAgfQogICAgX29uUG9pbnRlckRvd24oZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyRG93bjogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Qb2ludGVyTW92ZShldmVudCkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuX2dldFBvaW50ZXJQb3NpdGlvbihldmVudCk7CiAgICAgIHRoaXMucG9zdFN0YXRlTWFjaGluZUV2ZW50KGBPblBvaW50ZXJNb3ZlOiAke3h9ICR7eX1gKTsKICAgIH0KICAgIF9vblBvaW50ZXJFbnRlcihldmVudCkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuX2dldFBvaW50ZXJQb3NpdGlvbihldmVudCk7CiAgICAgIHRoaXMucG9zdFN0YXRlTWFjaGluZUV2ZW50KGBPblBvaW50ZXJFbnRlcjogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Qb2ludGVyTGVhdmUoZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyRXhpdDogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Db21wbGV0ZSgpIHsKICAgICAgdGhpcy5wb3N0U3RhdGVNYWNoaW5lRXZlbnQoIk9uQ29tcGxldGUiKTsKICAgIH0KICAgIC8qKgogICAgICogQGV4cGVyaW1lbnRhbAogICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIGJlIHBvc3RlZCB0byB0aGUgc3RhdGUgbWFjaGluZQogICAgICogQHJldHVybnMgYm9vbGVhbiAtIHRydWUgaWYgdGhlIGV2ZW50IHdhcyBwb3N0ZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcG9zdFN0YXRlTWFjaGluZUV2ZW50KGV2ZW50KSB7CiAgICAgIGNvbnN0IHJ0ID0gdGhpcy5fZG90TG90dGllQ29yZT8ucG9zdEV2ZW50UGF5bG9hZChldmVudCkgPz8gMTsKICAgICAgaWYgKHJ0ID09PSAyKSB7CiAgICAgICAgdGhpcy5wbGF5KCk7CiAgICAgIH0gZWxzZSBpZiAocnQgPT09IDMpIHsKICAgICAgICB0aGlzLnBhdXNlKCk7CiAgICAgIH0gZWxzZSBpZiAocnQgPT09IDQpIHsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgfQogICAgICByZXR1cm4gcnQ7CiAgICB9CiAgICBnZXRTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKSB7CiAgICAgIGlmICghdGhpcy5fZG90TG90dGllQ29yZSkgcmV0dXJuIFtdOwogICAgICBjb25zdCBsaXN0ZW5lcnNWZWN0b3IgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnN0YXRlTWFjaGluZUZyYW1ld29ya1NldHVwKCk7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVyc1ZlY3Rvci5zaXplKCk7IGkgKz0gMSkgewogICAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyc1ZlY3Rvci5nZXQoaSkpOwogICAgICB9CiAgICAgIHJldHVybiBsaXN0ZW5lcnM7CiAgICB9CiAgICBfc2V0dXBTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKSB7CiAgICAgIGlmIChJU19CUk9XU0VSICYmIHRoaXMuX2NhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50ICYmIHRoaXMuX2RvdExvdHRpZUNvcmUgIT09IG51bGwgJiYgdGhpcy5pc0xvYWRlZCkgewogICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZ2V0U3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmNsdWRlcygiUG9pbnRlclVwIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLCB0aGlzLl9wb2ludGVyVXBNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJQb2ludGVyRG93biIpKSB7CiAgICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLl9wb2ludGVyRG93bk1ldGhvZCk7CiAgICAgICAgfQogICAgICAgIGlmIChsaXN0ZW5lcnMuaW5jbHVkZXMoIlBvaW50ZXJNb3ZlIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsIHRoaXMuX3BvaW50ZXJNb3ZlTWV0aG9kKTsKICAgICAgICB9CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmNsdWRlcygiUG9pbnRlckVudGVyIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZW50ZXIiLCB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJQb2ludGVyRXhpdCIpKSB7CiAgICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmxlYXZlIiwgdGhpcy5fcG9pbnRlckV4aXRNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJDb21wbGV0ZSIpKSB7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoImNvbXBsZXRlIiwgdGhpcy5fb25Db21wbGV0ZU1ldGhvZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBfY2xlYW51cFN0YXRlTWFjaGluZUxpc3RlbmVycygpIHsKICAgICAgaWYgKElTX0JST1dTRVIgJiYgdGhpcy5fY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsKICAgICAgICB0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgdGhpcy5fcG9pbnRlclVwTWV0aG9kKTsKICAgICAgICB0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLl9wb2ludGVyRG93bk1ldGhvZCk7CiAgICAgICAgdGhpcy5fY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJtb3ZlIiwgdGhpcy5fcG9pbnRlck1vdmVNZXRob2QpOwogICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZW50ZXIiLCB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QpOwogICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVybGVhdmUiLCB0aGlzLl9wb2ludGVyRXhpdE1ldGhvZCk7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCJjb21wbGV0ZSIsIHRoaXMuX29uQ29tcGxldGVNZXRob2QpOwogICAgICB9CiAgICB9CiAgICBsb2FkU3RhdGVNYWNoaW5lRGF0YShzdGF0ZU1hY2hpbmVEYXRhKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5sb2FkU3RhdGVNYWNoaW5lRGF0YShzdGF0ZU1hY2hpbmVEYXRhKSA/PyBmYWxzZTsKICAgIH0KICAgIGFuaW1hdGlvblNpemUoKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fZG90TG90dGllQ29yZT8uYW5pbWF0aW9uU2l6ZSgpLmdldCgwKSA/PyAwOwogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5hbmltYXRpb25TaXplKCkuZ2V0KDEpID8/IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH07CiAgICB9CiAgICBzZXRTdGF0ZU1hY2hpbmVCb29sZWFuQ29udGV4dChuYW1lLCB2YWx1ZSkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uc2V0U3RhdGVNYWNoaW5lQm9vbGVhbkNvbnRleHQobmFtZSwgdmFsdWUpID8/IGZhbHNlOwogICAgfQogICAgc2V0U3RhdGVNYWNoaW5lTnVtZXJpY0NvbnRleHQobmFtZSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LnNldFN0YXRlTWFjaGluZU51bWVyaWNDb250ZXh0KG5hbWUsIHZhbHVlKSA/PyBmYWxzZTsKICAgIH0KICAgIHNldFN0YXRlTWFjaGluZVN0cmluZ0NvbnRleHQobmFtZSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LnNldFN0YXRlTWFjaGluZVN0cmluZ0NvbnRleHQobmFtZSwgdmFsdWUpID8/IGZhbHNlOwogICAgfQogIH07CiAgX19wdWJsaWNGaWVsZChfRG90TG90dGllLCAiX3dhc21Nb2R1bGUiLCBudWxsKTsKICB2YXIgRG90TG90dGllID0gX0RvdExvdHRpZTsKCiAgLy8gc3JjL3dvcmtlci9kb3Rsb3R0aWUud29ya2VyLnRzCiAgdmFyIGluc3RhbmNlc01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgdmFyIGV2ZW50SGFuZGxlck1hcCA9IHsKICAgIHJlYWR5OiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblJlYWR5IiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudAogICAgICAgIH0KICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9LAogICAgY29tcGxldGU6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uQ29tcGxldGUiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBsb2FkOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IGxvYWRFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25Mb2FkIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogbG9hZEV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBsb2FkRXJyb3I6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgbG9hZEVycm9yRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uTG9hZEVycm9yIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogbG9hZEVycm9yRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIGxvb3A6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgbG9vcEV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvbkxvb3AiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBsb29wRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHBsYXk6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgcGxheUV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblBsYXkiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBwbGF5RXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHBhdXNlOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHBhdXNlRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uUGF1c2UiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBwYXVzZUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBzdG9wOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHN0b3BFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25TdG9wIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogc3RvcEV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBmcmFtZTogKGluc3RhbmNlSWQpID0+IChldmVudCkgPT4gewogICAgICBjb25zdCBmcmFtZUV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvbkZyYW1lIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZnJhbWVFdmVudAogICAgICAgIH0KICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9LAogICAgcmVuZGVyOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHJlbmRlckV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblJlbmRlciIsCiAgICAgICAgcmVzdWx0OiB7CiAgICAgICAgICBpbnN0YW5jZUlkLAogICAgICAgICAgZXZlbnQ6IHJlbmRlckV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBmcmVlemU6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgZnJlZXplRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uRnJlZXplIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZnJlZXplRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHVuZnJlZXplOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHVuZnJlZXplRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uVW5mcmVlemUiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiB1bmZyZWV6ZUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBkZXN0cm95OiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IGRlc3Ryb3lFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25EZXN0cm95IiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZGVzdHJveUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0KICB9OwogIHZhciBjb21tYW5kcyA9IHsKICAgIGdldERvdExvdHRpZUluc3RhbmNlU3RhdGUocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgY29uc3Qgc3RhdGUgPSB7CiAgICAgICAgaXNMb2FkZWQ6IGluc3RhbmNlLmlzTG9hZGVkLAogICAgICAgIGlzUGF1c2VkOiBpbnN0YW5jZS5pc1BhdXNlZCwKICAgICAgICBpc1BsYXlpbmc6IGluc3RhbmNlLmlzUGxheWluZywKICAgICAgICBpc1N0b3BwZWQ6IGluc3RhbmNlLmlzU3RvcHBlZCwKICAgICAgICBpc0Zyb3plbjogaW5zdGFuY2UuaXNGcm96ZW4sCiAgICAgICAgbG9vcDogaW5zdGFuY2UubG9vcCwKICAgICAgICBtb2RlOiBpbnN0YW5jZS5tb2RlLAogICAgICAgIHNwZWVkOiBpbnN0YW5jZS5zcGVlZCwKICAgICAgICBjdXJyZW50RnJhbWU6IGluc3RhbmNlLmN1cnJlbnRGcmFtZSwKICAgICAgICB0b3RhbEZyYW1lczogaW5zdGFuY2UudG90YWxGcmFtZXMsCiAgICAgICAgZHVyYXRpb246IGluc3RhbmNlLmR1cmF0aW9uLAogICAgICAgIHVzZUZyYW1lSW50ZXJwb2xhdGlvbjogaW5zdGFuY2UudXNlRnJhbWVJbnRlcnBvbGF0aW9uLAogICAgICAgIHJlbmRlckNvbmZpZzogaW5zdGFuY2UucmVuZGVyQ29uZmlnLAogICAgICAgIG1hcmtlcjogaW5zdGFuY2UubWFya2VyLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogaW5zdGFuY2UuYmFja2dyb3VuZENvbG9yLAogICAgICAgIG1hcmtlcnM6IGluc3RhbmNlLm1hcmtlcnMoKSwKICAgICAgICBhY3RpdmVBbmltYXRpb25JZDogaW5zdGFuY2UuYWN0aXZlQW5pbWF0aW9uSWQsCiAgICAgICAgYWN0aXZlVGhlbWVJZDogaW5zdGFuY2UuYWN0aXZlVGhlbWVJZCwKICAgICAgICBhdXRvcGxheTogaW5zdGFuY2UuYXV0b3BsYXksCiAgICAgICAgc2VnbWVudDogaW5zdGFuY2Uuc2VnbWVudCwKICAgICAgICBsYXlvdXQ6IGluc3RhbmNlLmxheW91dCwKICAgICAgICBzZWdtZW50RHVyYXRpb246IGluc3RhbmNlLnNlZ21lbnREdXJhdGlvbiwKICAgICAgICBpc1JlYWR5OiBpbnN0YW5jZS5pc1JlYWR5LAogICAgICAgIG1hbmlmZXN0OiBpbnN0YW5jZS5tYW5pZmVzdAogICAgICB9OwogICAgICByZXR1cm4gewogICAgICAgIHN0YXRlCiAgICAgIH07CiAgICB9LAogICAgc2V0TGF5b3V0KHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGxheW91dCA9IHJlcXVlc3QucGFyYW1zLmxheW91dDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TGF5b3V0KGxheW91dCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3VjY2VzczogdHJ1ZQogICAgICB9OwogICAgfSwKICAgIGdldFN0YXRlTWFjaGluZUxpc3RlbmVycyhyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0U3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICB9LAogICAgcG9zdFN0YXRlTWFjaGluZUV2ZW50KHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGV2ZW50ID0gcmVxdWVzdC5wYXJhbXMuZXZlbnQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5wb3N0U3RhdGVNYWNoaW5lRXZlbnQoZXZlbnQpOwogICAgfSwKICAgIHN0YXJ0U3RhdGVNYWNoaW5lKHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5zdGFydFN0YXRlTWFjaGluZSgpOwogICAgfSwKICAgIHN0b3BTdGF0ZU1hY2hpbmUocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLnN0b3BTdGF0ZU1hY2hpbmUoKTsKICAgIH0sCiAgICBsb2FkU3RhdGVNYWNoaW5lKHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHN0YXRlTWFjaGluZUlkID0gcmVxdWVzdC5wYXJhbXMuc3RhdGVNYWNoaW5lSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5sb2FkU3RhdGVNYWNoaW5lKHN0YXRlTWFjaGluZUlkKTsKICAgIH0sCiAgICBsb2FkU3RhdGVNYWNoaW5lRGF0YShyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBzdGF0ZU1hY2hpbmVEYXRhID0gcmVxdWVzdC5wYXJhbXMuc3RhdGVNYWNoaW5lRGF0YTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLmxvYWRTdGF0ZU1hY2hpbmVEYXRhKHN0YXRlTWFjaGluZURhdGEpOwogICAgfSwKICAgIGNyZWF0ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHJlcXVlc3QucGFyYW1zLmNvbmZpZzsKICAgICAgY29uc3Qgd2lkdGggPSByZXF1ZXN0LnBhcmFtcy53aWR0aDsKICAgICAgY29uc3QgaGVpZ2h0ID0gcmVxdWVzdC5wYXJhbXMuaGVpZ2h0OwogICAgICBpZiAoaW5zdGFuY2VzTWFwLmhhcyhpbnN0YW5jZUlkKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGFscmVhZHkgZXhpc3RzLmApOwogICAgICB9CiAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IERvdExvdHRpZShjb25maWcpOwogICAgICBpbnN0YW5jZS5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICBpbnN0YW5jZS5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgaW5zdGFuY2VzTWFwLnNldChpbnN0YW5jZUlkLCBpbnN0YW5jZSk7CiAgICAgIGNvbnN0IGV2ZW50cyA9IFsKICAgICAgICAiY29tcGxldGUiLAogICAgICAgICJmcmFtZSIsCiAgICAgICAgImxvYWQiLAogICAgICAgICJsb2FkRXJyb3IiLAogICAgICAgICJsb29wIiwKICAgICAgICAicGF1c2UiLAogICAgICAgICJwbGF5IiwKICAgICAgICAic3RvcCIsCiAgICAgICAgImRlc3Ryb3kiLAogICAgICAgICJmcmVlemUiLAogICAgICAgICJ1bmZyZWV6ZSIsCiAgICAgICAgInJlbmRlciIsCiAgICAgICAgInJlYWR5IgogICAgICBdOwogICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHsKICAgICAgICBpbnN0YW5jZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBldmVudEhhbmRsZXJNYXBbZXZlbnRdKGluc3RhbmNlSWQpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaW5zdGFuY2VJZAogICAgICB9OwogICAgfSwKICAgIGRlc3Ryb3k6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHJldHVybjsKICAgICAgaW5zdGFuY2UuZGVzdHJveSgpOwogICAgICBpbnN0YW5jZXNNYXAuZGVsZXRlKGluc3RhbmNlSWQpOwogICAgfSwKICAgIGZyZWV6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLmZyZWV6ZSgpOwogICAgfSwKICAgIGxvYWQ6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBjb25maWcgPSByZXF1ZXN0LnBhcmFtcy5jb25maWc7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLmxvYWQoY29uZmlnKTsKICAgIH0sCiAgICBsb2FkQW5pbWF0aW9uOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgYW5pbWF0aW9uSWQgPSByZXF1ZXN0LnBhcmFtcy5hbmltYXRpb25JZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2UubG9hZEFuaW1hdGlvbihhbmltYXRpb25JZCk7CiAgICB9LAogICAgbG9hZFRoZW1lOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgdGhlbWVJZCA9IHJlcXVlc3QucGFyYW1zLnRoZW1lSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5sb2FkVGhlbWUodGhlbWVJZCk7CiAgICB9LAogICAgbG9hZFRoZW1lRGF0YTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHRoZW1lRGF0YSA9IHJlcXVlc3QucGFyYW1zLnRoZW1lRGF0YTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLmxvYWRUaGVtZURhdGEodGhlbWVEYXRhKTsKICAgIH0sCiAgICBwYXVzZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5wYXVzZSgpOwogICAgfSwKICAgIHBsYXk6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICByZXR1cm4gaW5zdGFuY2UucGxheSgpOwogICAgfSwKICAgIHJlc2l6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHdpZHRoID0gcmVxdWVzdC5wYXJhbXMud2lkdGg7CiAgICAgIGNvbnN0IGhlaWdodCA9IHJlcXVlc3QucGFyYW1zLmhlaWdodDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2UuY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgICAgaW5zdGFuY2UuY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIGluc3RhbmNlLnJlc2l6ZSgpOwogICAgICByZXR1cm4gewogICAgICAgIHN1Y2Nlc3M6IHRydWUKICAgICAgfTsKICAgIH0sCiAgICBzZXRCYWNrZ3JvdW5kQ29sb3I6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSByZXF1ZXN0LnBhcmFtcy5iYWNrZ3JvdW5kQ29sb3I7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpOwogICAgfSwKICAgIHNldEZyYW1lOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgZnJhbWUgPSByZXF1ZXN0LnBhcmFtcy5mcmFtZTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0RnJhbWUoZnJhbWUpOwogICAgfSwKICAgIHNldE1vZGU6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBtb2RlID0gcmVxdWVzdC5wYXJhbXMubW9kZTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TW9kZShtb2RlKTsKICAgIH0sCiAgICBzZXRSZW5kZXJDb25maWc6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCByZW5kZXJDb25maWcgPSByZXF1ZXN0LnBhcmFtcy5yZW5kZXJDb25maWc7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFJlbmRlckNvbmZpZyhyZW5kZXJDb25maWcpOwogICAgfSwKICAgIHNldFNlZ21lbnQ6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBzZWdtZW50ID0gcmVxdWVzdC5wYXJhbXMuc2VnbWVudDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0U2VnbWVudChzZWdtZW50WzBdLCBzZWdtZW50WzFdKTsKICAgIH0sCiAgICBzZXRTcGVlZDogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHNwZWVkID0gcmVxdWVzdC5wYXJhbXMuc3BlZWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFNwZWVkKHNwZWVkKTsKICAgIH0sCiAgICBzZXRVc2VGcmFtZUludGVycG9sYXRpb246IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCB1c2VGcmFtZUludGVycG9sYXRpb24gPSByZXF1ZXN0LnBhcmFtcy51c2VGcmFtZUludGVycG9sYXRpb247CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFVzZUZyYW1lSW50ZXJwb2xhdGlvbih1c2VGcmFtZUludGVycG9sYXRpb24pOwogICAgfSwKICAgIHNldFdhc21Vcmw6IChyZXF1ZXN0KSA9PiB7CiAgICAgIERvdExvdHRpZS5zZXRXYXNtVXJsKHJlcXVlc3QucGFyYW1zLnVybCk7CiAgICB9LAogICAgc3RvcDogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnN0b3AoKTsKICAgIH0sCiAgICB1bmZyZWV6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnVuZnJlZXplKCk7CiAgICB9LAogICAgc2V0Vmlld3BvcnQocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgeCA9IHJlcXVlc3QucGFyYW1zLng7CiAgICAgIGNvbnN0IHkgPSByZXF1ZXN0LnBhcmFtcy55OwogICAgICBjb25zdCB3aWR0aCA9IHJlcXVlc3QucGFyYW1zLndpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSByZXF1ZXN0LnBhcmFtcy5oZWlnaHQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICAgIH0sCiAgICBzZXRNYXJrZXIocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgbWFya2VyID0gcmVxdWVzdC5wYXJhbXMubWFya2VyOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICBpbnN0YW5jZS5zZXRNYXJrZXIobWFya2VyKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH07CiAgICB9LAogICAgc2V0TG9vcChyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBsb29wID0gcmVxdWVzdC5wYXJhbXMubG9vcDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TG9vcChsb29wKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH07CiAgICB9CiAgfTsKICBmdW5jdGlvbiBleGVjdXRlQ29tbWFuZChycGNSZXF1ZXN0KSB7CiAgICBjb25zdCBtZXRob2QgPSBycGNSZXF1ZXN0Lm1ldGhvZDsKICAgIGlmICh0eXBlb2YgY29tbWFuZHNbbWV0aG9kXSA9PT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gY29tbWFuZHNbbWV0aG9kXShycGNSZXF1ZXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgTWV0aG9kICR7bWV0aG9kfSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gY29tbWFuZHMuYCk7CiAgICB9CiAgfQogIHNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXN1bHQgPSBleGVjdXRlQ29tbWFuZChldmVudC5kYXRhKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6IGV2ZW50LmRhdGEuaWQsCiAgICAgICAgbWV0aG9kOiBldmVudC5kYXRhLm1ldGhvZCwKICAgICAgICByZXN1bHQKICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zdCBlcnJvclJlc3BvbnNlID0gewogICAgICAgIGlkOiBldmVudC5kYXRhLmlkLAogICAgICAgIG1ldGhvZDogZXZlbnQuZGF0YS5tZXRob2QsCiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UKICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShlcnJvclJlc3BvbnNlKTsKICAgIH0KICB9OwogIHZhciBkdW1teSA9ICIiOwogIHZhciBkb3Rsb3R0aWVfd29ya2VyX2RlZmF1bHQgPSBkdW1teTsKfSkoKTsK",{type:"classic"})}};function pe(t){if(t instanceof OffscreenCanvas)return{width:t.width,height:t.height};let{height:e,width:i}=t.getBoundingClientRect();return{width:i*window.devicePixelRatio,height:e*window.devicePixelRatio}}function me(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}var ue=class t{constructor(e){Nt(this,"_eventManager",new se),Nt(this,"_id"),Nt(this,"_worker"),Nt(this,"_canvas"),Nt(this,"_dotLottieInstanceState",{markers:[],autoplay:!1,backgroundColor:"",currentFrame:0,duration:0,loop:!1,mode:"forward",segment:[0,0],segmentDuration:0,speed:1,totalFrames:0,isLoaded:!1,isPlaying:!1,isPaused:!1,isStopped:!0,isFrozen:!1,useFrameInterpolation:!1,renderConfig:{devicePixelRatio:window.devicePixelRatio},activeAnimationId:"",activeThemeId:"",layout:void 0,marker:void 0,isReady:!1,manifest:null}),Nt(this,"_created",!1),Nt(this,"_pointerUpMethod"),Nt(this,"_pointerDownMethod"),Nt(this,"_pointerMoveMethod"),Nt(this,"_pointerEnterMethod"),Nt(this,"_pointerExitMethod"),Nt(this,"_onCompleteMethod"),this._canvas=e.canvas,this._id=`dotlottie-${me()}`;let i=e.workerId||"defaultWorker";this._worker=t._workerManager.getWorker(i),t._workerManager.assignAnimationToWorker(this._id,i),t._wasmUrl&&this._sendMessage("setWasmUrl",{url:t._wasmUrl}),this._create(e),this._worker.addEventListener("message",this._handleWorkerEvent.bind(this)),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this),this._onCompleteMethod=this._onComplete.bind(this)}async _handleWorkerEvent(t){let e=t.data;e.id||("onLoad"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onComplete"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onDestroy"===e.method&&e.result.instanceId===this._id&&this._eventManager.dispatch(e.result.event),"onUnfreeze"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._dotLottieInstanceState.isFrozen=!1,this._eventManager.dispatch(e.result.event)),"onFrame"===e.method&&e.result.instanceId===this._id&&(this._dotLottieInstanceState.currentFrame=e.result.event.currentFrame,this._eventManager.dispatch(e.result.event)),"onRender"===e.method&&e.result.instanceId===this._id&&this._eventManager.dispatch(e.result.event),"onFreeze"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onPause"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onPlay"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onStop"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onLoadError"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)),"onReady"===e.method&&e.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(e.result.event)))}async _create(t){let e;e=this._canvas instanceof HTMLCanvasElement?this._canvas.transferControlToOffscreen():this._canvas;let{instanceId:i}=await this._sendMessage("create",{instanceId:this._id,config:{...t,canvas:e},...pe(this._canvas)},[e]);if(i!==this._id)throw new Error("Instance ID mismatch");this._created=!0,await this._updateDotLottieInstanceState()}get isLoaded(){return this._dotLottieInstanceState.isLoaded}get isPlaying(){return this._dotLottieInstanceState.isPlaying}get isPaused(){return this._dotLottieInstanceState.isPaused}get isStopped(){return this._dotLottieInstanceState.isStopped}get currentFrame(){return this._dotLottieInstanceState.currentFrame}get isFrozen(){return this._dotLottieInstanceState.isFrozen}get segmentDuration(){return this._dotLottieInstanceState.segmentDuration}get totalFrames(){return this._dotLottieInstanceState.totalFrames}get segment(){return this._dotLottieInstanceState.segment}get speed(){return this._dotLottieInstanceState.speed}get duration(){return this._dotLottieInstanceState.duration}get isReady(){return this._dotLottieInstanceState.isReady}get mode(){return this._dotLottieInstanceState.mode}get canvas(){return this._canvas}get autoplay(){return this._dotLottieInstanceState.autoplay}get backgroundColor(){return this._dotLottieInstanceState.backgroundColor}get loop(){return this._dotLottieInstanceState.loop}get useFrameInterpolation(){return this._dotLottieInstanceState.useFrameInterpolation}get renderConfig(){return this._dotLottieInstanceState.renderConfig}get manifest(){return this._dotLottieInstanceState.manifest}get activeAnimationId(){return this._dotLottieInstanceState.activeAnimationId}get marker(){return this._dotLottieInstanceState.marker}get activeThemeId(){return this._dotLottieInstanceState.activeThemeId}get layout(){return this._dotLottieInstanceState.layout}async play(){this._created&&(await this._sendMessage("play",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async pause(){this._created&&(await this._sendMessage("pause",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async stop(){this._created&&(await this._sendMessage("stop",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSpeed(t){this._created&&(await this._sendMessage("setSpeed",{instanceId:this._id,speed:t}),await this._updateDotLottieInstanceState())}async setMode(t){this._created&&(await this._sendMessage("setMode",{instanceId:this._id,mode:t}),await this._updateDotLottieInstanceState())}async setFrame(t){this._created&&(await this._sendMessage("setFrame",{frame:t,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSegment(t,e){this._created&&(await this._sendMessage("setSegment",{instanceId:this._id,segment:[t,e]}),await this._updateDotLottieInstanceState())}async setRenderConfig(t){this._created&&(await this._sendMessage("setRenderConfig",{instanceId:this._id,renderConfig:t}),await this._updateDotLottieInstanceState())}async setUseFrameInterpolation(t){this._created&&(await this._sendMessage("setUseFrameInterpolation",{instanceId:this._id,useFrameInterpolation:t}),await this._updateDotLottieInstanceState())}async loadTheme(t){if(!this._created)return!1;let e=this._sendMessage("loadTheme",{instanceId:this._id,themeId:t});return await this._updateDotLottieInstanceState(),e}async load(t){this._created&&(await this._sendMessage("load",{config:t,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLoop(t){this._created&&(await this._sendMessage("setLoop",{instanceId:this._id,loop:t}),await this._updateDotLottieInstanceState())}async resize(){if(!this._created)return;let{height:t,width:e}=pe(this._canvas);this._canvas.width=e,this._canvas.height=t,await this._sendMessage("resize",{height:t,instanceId:this._id,width:e}),await this._updateDotLottieInstanceState()}async destroy(){this._created&&(this._created=!1,await this._sendMessage("destroy",{instanceId:this._id}),this._cleanupStateMachineListeners(),t._workerManager.unassignAnimationFromWorker(this._id),this._eventManager.removeAllEventListeners())}async freeze(){this._created&&(await this._sendMessage("freeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async unfreeze(){this._created&&(await this._sendMessage("unfreeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setBackgroundColor(t){this._created&&(await this._sendMessage("setBackgroundColor",{instanceId:this._id,backgroundColor:t}),await this._updateDotLottieInstanceState())}async loadAnimation(t){this._created&&(await this._sendMessage("loadAnimation",{animationId:t,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLayout(t){this._created&&(await this._sendMessage("setLayout",{instanceId:this._id,layout:t}),await this._updateDotLottieInstanceState())}async _updateDotLottieInstanceState(){if(!this._created)return;let t=await this._sendMessage("getDotLottieInstanceState",{instanceId:this._id});this._dotLottieInstanceState=t.state}markers(){return this._dotLottieInstanceState.markers}async setMarker(t){this._created&&(await this._sendMessage("setMarker",{instanceId:this._id,marker:t}),await this._updateDotLottieInstanceState())}async loadThemeData(t){if(!this._created)return!1;let e=await this._sendMessage("loadThemeData",{instanceId:this._id,themeData:t});return await this._updateDotLottieInstanceState(),e}async setViewport(t,e,i,s){return!!this._created&&this._sendMessage("setViewport",{x:t,y:e,width:i,height:s,instanceId:this._id})}async _sendMessage(t,e,i){let s={id:`dotlottie-request-${me()}`,method:t,params:e};return this._worker.postMessage(s,i||[]),new Promise(((e,i)=>{let a=n=>{let r=n.data;r.id===s.id&&(this._worker.removeEventListener("message",a),r.error?i(new Error(`Failed to execute method ${t}: ${r.error}`)):e(r.result))};this._worker.addEventListener("message",a)}))}addEventListener(t,e){this._eventManager.addEventListener(t,e)}removeEventListener(t,e){this._eventManager.removeEventListener(t,e)}static setWasmUrl(e){t._wasmUrl=e}async loadStateMachine(t){if(!this._created)return!1;let e=await this._sendMessage("loadStateMachine",{instanceId:this._id,stateMachineId:t});return await this._updateDotLottieInstanceState(),e}async loadStateMachineData(t){if(!this._created)return!1;let e=await this._sendMessage("loadStateMachineData",{instanceId:this._id,stateMachineData:t});return await this._updateDotLottieInstanceState(),e}async startStateMachine(){if(!this._created)return!1;this._setupStateMachineListeners();let t=await this._sendMessage("startStateMachine",{instanceId:this._id});return await this._updateDotLottieInstanceState(),t}async stopStateMachine(){return!!this._created&&(this._cleanupStateMachineListeners(),this._sendMessage("stopStateMachine",{instanceId:this._id}))}async postStateMachineEvent(t){return this._created?this._sendMessage("postStateMachineEvent",{event:t,instanceId:this._id}):1}async getStateMachineListeners(){return this._created?this._sendMessage("getStateMachineListeners",{instanceId:this._id}):[]}_getPointerPosition(t){let e=this._canvas.getBoundingClientRect(),i=this._canvas.width/e.width,s=this._canvas.height/e.height,a=this._dotLottieInstanceState.renderConfig.devicePixelRatio||window.devicePixelRatio||1;return{x:(t.clientX-e.left)*i/a,y:(t.clientY-e.top)*s/a}}_onPointerUp(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerUp: ${e} ${i}`)}_onPointerDown(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerDown: ${e} ${i}`)}_onPointerMove(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerMove: ${e} ${i}`)}_onPointerEnter(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerEnter: ${e} ${i}`)}_onPointerLeave(t){let{x:e,y:i}=this._getPointerPosition(t);this.postStateMachineEvent(`OnPointerExit: ${e} ${i}`)}_onComplete(){this.postStateMachineEvent("OnComplete")}async _setupStateMachineListeners(){if(jt&&this._canvas instanceof HTMLCanvasElement&&this.isLoaded){let t=await this._sendMessage("getStateMachineListeners",{instanceId:this._id});t.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),t.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),t.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),t.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),t.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod),t.includes("Complete")&&this.addEventListener("complete",this._onCompleteMethod)}}_cleanupStateMachineListeners(){jt&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod),this.removeEventListener("complete",this._onCompleteMethod))}};Nt(ue,"_workerManager",new class{constructor(){Nt(this,"_workers",new Map),Nt(this,"_animationWorkerMap",new Map)}getWorker(t){return this._workers.has(t)||this._workers.set(t,new de),this._workers.get(t)}assignAnimationToWorker(t,e){this._animationWorkerMap.set(t,e)}unassignAnimationFromWorker(t){this._animationWorkerMap.delete(t)}sendMessage(t,e,i){this.getWorker(t).postMessage(e,i||[])}terminateWorker(t){let e=this._workers.get(t);e&&(e.terminate(),this._workers.delete(t))}}),Nt(ue,"_wasmUrl",""),function(t){Pt.setPlayerFactory(((e,i,s)=>new Et(t,e,i,s))),Pt.defineTrigger("in",Yt),Pt.defineTrigger("click",Ft),Pt.defineTrigger("hover",Kt),Pt.defineTrigger("loop",Tt),Pt.defineTrigger("loop-on-hover",_t),Pt.defineTrigger("morph",Mt),Pt.defineTrigger("boomerang",Vt),Pt.defineTrigger("sequence",Ht),Pt.defineTrigger("morph-two-way",Vt),customElements.get&&customElements.get("lord-icon")||customElements.define("lord-icon",Pt)}(ot().loadAnimation);const Ae=document.querySelector(".footer__phone");let fe=new Ce({canvas:document.querySelector(".dotlottie-phone"),src:"./img/icons/phone_3.json"});Ae.addEventListener("mouseover",(()=>{fe.play()}));const ye=document.querySelector(".footer__email");let be=new Ce({canvas:document.querySelector(".dotlottie-mail"),src:"./img/icons/mail_3.json"});ye.addEventListener("mouseover",(()=>{be.play()})),__webpack_require__(952),__webpack_require__(442);const ve=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),Se=function(t,e=void 0){return!(!t||t===document.body||e&&t===e)&&(function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,i=window.getComputedStyle(t).overflowY,s=-1!==i.indexOf("hidden"),a=-1!==i.indexOf("visible");return e&&!s&&!a}(t)?t:Se(t.parentElement,e))},Ge=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var i=document.createElement("div");e.firstChild;)i.appendChild(e.firstChild);return i}return e.firstChild},Be=t=>`${t||""}`.split(" ").filter((t=>!!t)),we=(t,e,i)=>{t&&Be(e).forEach((e=>{t.classList.toggle(e,i||!1)}))};class Ze{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}}const ke={passive:!1};class Pe{constructor(t,{start:e=(()=>!0),move:i=(()=>{}),end:s=(()=>{})}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=s;for(const t of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[t]=this[t].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,ke),this.element.addEventListener("touchstart",this.onTouchStart,ke),this.element.addEventListener("touchmove",this.onMove,ke),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||0!==t.button)return;const e=new Ze(t);this.currentPointers.some((t=>t.id===e.id))||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new Ze(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){const e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map((t=>new Ze(t))):[new Ze(t)],s=[];for(const t of i){const e=this.currentPointers.findIndex((e=>e.id===t.id));e<0||(s.push(t),this.currentPointers[e]=t)}s.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&0!==t.button||(this.triggerPointerEnd(t,new Ze(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new Ze(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){const i=this.currentPointers.findIndex((t=>t.id===e.id));i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,ke),this.element.removeEventListener("touchstart",this.onTouchStart,ke),this.element.removeEventListener("touchmove",this.onMove,ke),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function We(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function xe(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const Ee=t=>"object"==typeof t&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t),Ve=(t,...e)=>{const i=e.length;for(let s=0;s<i;s++){const i=e[s]||{};Object.entries(i).forEach((([e,i])=>{const s=Array.isArray(i)?[]:{};t[e]||Object.assign(t,{[e]:s}),Ee(i)?Object.assign(t[e],Ve(s,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},Re=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class Fe{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?Ve({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=Re(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...s){let a=Re(e,t);var n;"string"!=typeof(n=a)||isNaN(n)||isNaN(parseFloat(n))||(a=parseFloat(a)),"true"===a&&(a=!0),"false"===a&&(a=!1),a&&"function"==typeof a&&(a=a.call(this,this,t,...s));let r=Re(e,this.options);return r&&"function"==typeof r?a=r.call(this,this,t,...s,a):void 0===a&&(a=r),void 0===a?i:a}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let s="";return i?s=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(s=this.option(`l10n.${e}`)),s||(s=t),s}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(Fe,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Fe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Ke extends Fe{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){const e=new Map;for(const[i,s]of Object.entries(t)){const t=this.option(i),a=this.plugins[i];a||!1===t?a&&!1===t&&(a.detach(),delete this.plugins[i]):e.set(i,new s(this,t||{}))}for(const[t,i]of e)this.plugins[t]=i,i.attach()}detachPlugins(t){t=t||Object.keys(this.plugins);for(const e of t){const t=this.plugins[e];t&&t.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}}var Ye;!function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"}(Ye||(Ye={}));const Te=["a","b","c","d","e","f"],_e='<circle cx="25" cy="25" r="20"></circle>',Me='<div class="f-spinner"><svg viewBox="0 0 50 50">'+_e+_e+"</svg></div>",De=t=>t&&null!==t&&t instanceof Element&&"nodeType"in t,Le=(t,e)=>{t&&Be(e).forEach((e=>{t.classList.remove(e)}))},He=(t,e)=>{t&&Be(e).forEach((e=>{t.classList.add(e)}))},Xe={a:1,b:0,c:0,d:1,e:0,f:0},Ne=1e4,ze="mousemove",Oe="drag",Je="content",je="auto";let Ue=null,Qe=null;class qe extends Ke{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return null===Qe&&(Qe=window.matchMedia("(hover: none)").matches),Qe}get isMobile(){return null===Ue&&(Ue=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Ue}get panMode(){return this.options.panMode!==ze||this.isTouchDevice?Oe:ze}get panOnlyZoomed(){const t=this.options.panOnlyZoomed;return t===je?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){const{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const t of Te){const e="e"==t||"f"===t?1e-4:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var s;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ye.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Xe)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Xe)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},qe.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const a=this.content;if(a.addEventListener("load",this.onLoad),a.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));const e=Ge(Me);!t.contains(a)||a.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(e):this.spinner=(null===(s=a.parentElement)||void 0===s?void 0:s.insertBefore(e,a))||null}this.emit("beforeLoad")}else queueMicrotask((()=>{this.enable()}))}initContent(){const{container:t}=this,e=this.cn(Je);let i=this.option(Je)||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&He(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:t,container:e,state:i}=this;t&&(t.remove(),this.spinner=null),this.option("spinner")&&e.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===Ye.Init?this.enable():this.updateMetrics()}onError(){this.state!==Ye.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=Ye.Error,this.emit("error"))}getNextScale(t){const{fullScale:e,targetScale:i,coverScale:s,maxScale:a,minScale:n}=this;let r=n;switch(t){case"toggleMax":r=i-n<.5*(a-n)?a:n;break;case"toggleCover":r=i-n<.5*(s-n)?s:n;break;case"toggleZoom":r=i-n<.5*(e-n)?e:n;break;case"iterateZoom":let t=[1,e,a].sort(((t,e)=>t-e)),o=t.findIndex((t=>t>i+1e-5));r=t[o]||1}return r}attachObserver(){var t;const e=()=>{const{container:t,containerRect:e}=this;return Math.abs(e.width-t.getBoundingClientRect().width)>.1||Math.abs(e.height-t.getBoundingClientRect().height)>.1};this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver((()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout((()=>{e()&&this.onResize(),this.updateTimer=null}),500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))}))),null===(t=this.resizeObserver)||void 0===t||t.observe(this.container)}detachObserver(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}attachEvents(){const{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new Pe(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(ze,this.onMouseMove)}detachEvents(){var t;const{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(t=this.pointerTracker)||void 0===t||t.stop(),this.pointerTracker=null,document.removeEventListener(ze,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const t=this.friction,e=this.option("maxVelocity");for(const i of Te)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame((()=>this.animate())):this.stop("current")}setTargetForce(){for(const t of Te)"e"===t&&this.isBouncingX||"f"===t&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){const{current:i}=this,s=i.e+t,a=i.f+e,n=this.getBounds(),{x:r,y:o}=n,g=r.min,l=r.max,h=o.min,I=o.max;let c=0,C=0;return g!==1/0&&s<g?c=g-s:l!==1/0&&s>l&&(c=l-s),h!==1/0&&a<h?C=h-a:I!==1/0&&a>I&&(C=I-a),Math.abs(c)<1e-4&&(c=0),Math.abs(C)<1e-4&&(C=0),Object.assign(Object.assign({},n),{xDiff:c,yDiff:C,inBounds:!c&&!C})}clampTargetBounds(){const{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){const{content:e,contentRect:i}=this,{fitWidth:s,fitHeight:a,fullWidth:n,fullHeight:r}=i;let o=n,g=r;if(this.option("zoom")||0!==this.angle){const i=!(e instanceof HTMLImageElement||"none"!==window.getComputedStyle(e).maxWidth&&"none"!==window.getComputedStyle(e).maxHeight),l=i?n:s,h=i?r:a,I=this.getMatrix(t),c=new DOMPoint(0,0).matrixTransform(I),C=new DOMPoint(0+l,0).matrixTransform(I),d=new DOMPoint(0+l,0+h).matrixTransform(I),p=new DOMPoint(0,0+h).matrixTransform(I),m=Math.abs(d.x-c.x),u=Math.abs(d.y-c.y),A=Math.abs(p.x-C.x),f=Math.abs(p.y-C.y);o=Math.max(m,A),g=Math.max(u,f)}return{contentWidth:o,contentHeight:g}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===ze||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:t}=this,{x:e,y:i,xDiff:s,yDiff:a}=this.checkBounds(),n=this.option("maxVelocity");let r=this.velocity.e,o=this.velocity.f;0!==s?(this.isBouncingX=!0,s*r<=0?r+=.14*s:(r=.14*s,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),n&&(r=Math.max(Math.min(r,n),-1*n))):this.isBouncingX=!1,0!==a?(this.isBouncingY=!0,a*o<=0?o+=.14*a:(o=.14*a,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),n&&(o=Math.max(Math.min(o,n),-1*n))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=r),this.isBouncingY&&(this.velocity.f=o)}enable(){const{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(const t of Te)this.current[t]=this.target[t]=e[t];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=Ye.Ready,this.emit("ready")}onClick(t){var e;"click"===t.type&&0===t.detail&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&(null===(e=this.pointerTracker)||void 0===e||e.clear(),this.trackingPoints=[],this.startDecelAnim());const i=t.target;if(!i||t.defaultPrevented)return;if(i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{const t=window.getSelection();return t&&"Range"===t.type})()&&!i.closest("button"))return;const s=i.closest("[data-panzoom-action]"),a=i.closest("[data-panzoom-change]"),n=s||a,r=n&&De(n)?n.dataset:null;if(r){const e=r.panzoomChange,i=r.panzoomAction;if((e||i)&&t.preventDefault(),e){let i={};try{i=JSON.parse(e)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(i)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();if(i.closest("[data-fancybox]"))return;const o=this.content.getBoundingClientRect(),g=this.dragStart;if(g.time&&!this.canZoomOut()&&(Math.abs(o.x-g.x)>2||Math.abs(o.y-g.y)>2))return;this.dragStart.time=0;const l=e=>{this.option("zoom",t)&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof this[e]&&(t.preventDefault(),this[e]({event:t}))},h=this.option("click",t),I=this.option("dblClick",t);I?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout((()=>{1===this.clicks?(this.emit("click",t),!t.defaultPrevented&&h&&l(h)):(this.emit("dblClick",t),t.defaultPrevented||l(I)),this.clicks=0,this.clickTimer=null}),350))):(this.emit("click",t),!t.defaultPrevented&&h&&l(h))}addTrackingPoint(t){const e=this.trackingPoints.filter((t=>t.time>Date.now()-100));e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var s;if(!1===this.option("touch",t))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const a=this.content.getBoundingClientRect();if(this.dragStart={x:a.x,y:a.y,top:a.top,left:a.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===ze&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;const n=t.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(n.nodeName)||n.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;null===(s=window.getSelection())||void 0===s||s.removeAllRanges()}if("mousedown"===t.type)["A","BUTTON"].includes(n.nodeName)||t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(t,e,i){if(!1===this.option("touch",t))return;if(!this.isDragging)return;if(e.length<2&&this.panOnlyZoomed&&ve(this.targetScale)<=ve(this.minScale))return;if(this.emit("touchMove",t),t.defaultPrevented)return;this.addTrackingPoint(e[0]);const{content:s}=this,a=xe(i[0],i[1]),n=xe(e[0],e[1]);let r=0,o=0;if(e.length>1){const t=s.getBoundingClientRect();r=a.clientX-t.left-.5*t.width,o=a.clientY-t.top-.5*t.height}const g=We(i[0],i[1]),l=We(e[0],e[1]);let h=g?l/g:1,I=n.clientX-a.clientX,c=n.clientY-a.clientY;this.dragOffset.x+=I,this.dragOffset.y+=c,this.dragOffset.time=Date.now()-this.dragStart.time;let C=ve(this.targetScale)===ve(this.minScale)&&this.option("lockAxis");if(C&&!this.lockedAxis)if("xy"===C||"y"===C||"touchmove"===t.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void t.preventDefault();const e=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=e>45&&e<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,I=0,c=0}else this.lockedAxis=C;if(Se(t.target,this.content)&&(C="x",this.dragOffset.y=0),C&&"xy"!==C&&this.lockedAxis!==C&&ve(this.targetScale)===ve(this.minScale))return;t.cancelable&&t.preventDefault(),this.container.classList.add(this.cn("isDragging"));const d=this.checkBounds(I,c);this.option("rubberband")?("x"!==this.isInfinite&&(d.xDiff>0&&I<0||d.xDiff<0&&I>0)&&(I*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*d.xDiff))),"y"!==this.isInfinite&&(d.yDiff>0&&c<0||d.yDiff<0&&c>0)&&(c*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*d.yDiff)))):(d.xDiff&&(I=0),d.yDiff&&(c=0));const p=this.targetScale,m=this.minScale,u=this.maxScale;p<.5*m&&(h=Math.max(h,m)),p>1.5*u&&(h=Math.min(h,u)),"y"===this.lockedAxis&&ve(p)===ve(m)&&(I=0),"x"===this.lockedAxis&&ve(p)===ve(m)&&(c=0),this.applyChange({originX:r,originY:o,panX:I,panY:c,scale:h,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,e,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(e),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Se(t.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==Ye.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var t;const e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of Te)this.velocity[t]=0;this.target.e=this.current.e,this.target.f=this.current.f,Le(this.container,"is-scaling"),Le(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,s=i[0],a=i[i.length-1];let n=0,r=0,o=0;a&&s&&(n=a.clientX-s.clientX,r=a.clientY-s.clientY,o=a.time-s.time);const g=(null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1;1!==g&&(n*=g,r*=g);let l=0,h=0,I=0,c=0,C=this.option("decelFriction");const d=this.targetScale;if(o>0){I=Math.abs(n)>3?n/(o/30):0,c=Math.abs(r)>3?r/(o/30):0;const t=this.option("maxVelocity");t&&(I=Math.max(Math.min(I,t),-1*t),c=Math.max(Math.min(c,t),-1*t))}I&&(l=I/(1/(1-C)-1)),c&&(h=c/(1/(1-C)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&ve(d)===this.minScale)&&(l=I=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&ve(d)===this.minScale)&&(h=c=0);const p=this.dragOffset.x,m=this.dragOffset.y,u=this.option("dragMinThreshold")||0;Math.abs(p)<u&&Math.abs(m)<u&&(l=h=0,I=c=0),(this.option("zoom")&&(d<this.minScale-1e-5||d>this.maxScale+1e-5)||e&&!l&&!h)&&(C=.35),this.applyChange({panX:l,panY:h,friction:C}),this.emit("decel",I,c,p,m)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),this.panMode===ze)return;if(t.defaultPrevented)return;const s=this.option("wheel");"pan"===s?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):"zoom"===s&&!1!==this.option("zoom")&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){"Escape"===t.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:t,target:e,content:i,contentRect:s}=this,a=Object.assign({},Xe);for(const i of Te){const s="e"==i||"f"===i?Ne:1e5;a[i]=ve(t[i],s),Math.abs(e[i]-t[i])<("e"==i||"f"===i?.51:.001)&&(t[i]=e[i])}let{a:n,b:r,c:o,d:g,e:l,f:h}=a,I=`matrix(${n}, ${r}, ${o}, ${g}, ${l}, ${h})`,c=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(c=c.parentElement||c),c.style.transform===I)return;c.style.transform=I;const{contentWidth:C,contentHeight:d}=this.calculateContentDim();s.width=C,s.height=d,this.emit("afterTransform")}updateMetrics(t=!1){var e;if(!this||this.state===Ye.Destroy)return;if(this.isContentLoading)return;const i=Math.max(1,(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1),{container:s,content:a}=this,n=a instanceof HTMLImageElement,r=s.getBoundingClientRect(),o=getComputedStyle(this.container);let g=r.width*i,l=r.height*i;const h=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),I=g-(parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)),c=l-h;this.containerRect={width:g,height:l,innerWidth:I,innerHeight:c};const C=parseFloat(a.dataset.width||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalWidth:t instanceof SVGElement?t.width.baseVal.value:Math.max(t.offsetWidth,t.scrollWidth),e||0})(a),d=parseFloat(a.dataset.height||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalHeight:t instanceof SVGElement?t.height.baseVal.value:Math.max(t.offsetHeight,t.scrollHeight),e||0})(a);let p=this.option("width",C)||je,m=this.option("height",d)||je;const u=p===je,A=m===je;"number"!=typeof p&&(p=C),"number"!=typeof m&&(m=d),u&&(p=C*(m/d)),A&&(m=d/(C/p));let f=a.parentElement instanceof HTMLPictureElement?a.parentElement:a;this.option("transformParent")&&(f=f.parentElement||f);const y=f.getAttribute("style")||"";f.style.setProperty("transform","none","important"),n&&(f.style.width="",f.style.height=""),f.offsetHeight;const b=a.getBoundingClientRect();let v=b.width*i,S=b.height*i,G=v,B=S;v=Math.min(v,p),S=Math.min(S,m),n?({width:v,height:S}=((t,e,i,s)=>{const a=i/t,n=s/e,r=Math.min(a,n);return{width:t*=r,height:e*=r}})(p,m,v,S)):(v=Math.min(v,p),S=Math.min(S,m));let w=.5*(B-S),Z=.5*(G-v);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:b.top-r.top+w,bottom:r.bottom-b.bottom+w,left:b.left-r.left+Z,right:r.right-b.right+Z,fitWidth:v,fitHeight:S,width:v,height:S,fullWidth:p,fullHeight:m}),f.style.cssText=y,n&&(f.style.width=`${v}px`,f.style.height=`${S}px`),this.setTransform(),!0!==t&&this.emit("refresh"),this.ignoreBounds||(ve(this.targetScale)<ve(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===Ye.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:t,contentHeight:e}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:s}=this,{fitWidth:a,fitHeight:n}=this.contentRect;let r=0,o=0,g=0,l=0;const h=this.option("infinite");if(!0===h||s&&h===s)r=-1/0,g=1/0,o=-1/0,l=1/0;else{let{containerRect:s,contentRect:h}=this,I=ve(a*i,Ne),c=ve(n*i,Ne),{innerWidth:C,innerHeight:d}=s;if(s.width===I&&(C=s.width),s.width===c&&(d=s.height),t>C){g=.5*(t-C),r=-1*g;let e=.5*(h.right-h.left);r+=e,g+=e}if(a>C&&t<C&&(r-=.5*(a-C),g-=.5*(a-C)),e>d){l=.5*(e-d),o=-1*l;let t=.5*(h.bottom-h.top);o+=t,l+=t}n>d&&e<d&&(r-=.5*(n-d),g-=.5*(n-d))}return{x:{min:r,max:g},y:{min:o,max:l}}}getBounds(){const t=this.option("bounds");return t!==je?t:this.calculateBounds()}updateControls(){const t=this,e=t.container,{panMode:i,contentRect:s,targetScale:a,minScale:n}=t;let r=n,o=t.option("click")||!1;o&&(r=t.getNextScale(o));let g=t.canZoomIn(),l=t.canZoomOut(),h=i===Oe&&!!this.option("touch"),I=l&&h;if(h&&(ve(a)<ve(n)&&!this.panOnlyZoomed&&(I=!0),(ve(s.width,1)>ve(s.fitWidth,1)||ve(s.height,1)>ve(s.fitHeight,1))&&(I=!0)),ve(s.width*a,1)<ve(s.fitWidth,1)&&(I=!1),i===ze&&(I=!1),we(e,this.cn("isDraggable"),I),!this.option("zoom"))return;let c=g&&ve(r)>ve(a),C=!c&&!I&&l&&ve(r)<ve(a);we(e,this.cn("canZoomIn"),c),we(e,this.cn("canZoomOut"),C);for(const t of e.querySelectorAll("[data-panzoom-action]")){let e=!1,i=!1;switch(t.dataset.panzoomAction){case"zoomIn":g?e=!0:i=!0;break;case"zoomOut":l?e=!0:i=!0;break;case"toggleZoom":case"iterateZoom":g||l?e=!0:i=!0;const s=t.querySelector("g");s&&(s.style.display=g?"":"none")}e?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):i&&(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"))}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:s=this.option("friction"),angle:a=0,originX:n=0,originY:r=0,flipX:o=!1,flipY:g=!1,ignoreBounds:l=!1}){this.state!==Ye.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:a,originX:n,originY:r,friction:s,flipX:o,flipY:g,ignoreBounds:l})}applyChange({panX:t=0,panY:e=0,scale:i=1,angle:s=0,originX:a=-this.current.e,originY:n=-this.current.f,friction:r=this.option("friction"),flipX:o=!1,flipY:g=!1,ignoreBounds:l=!1,bounce:h=this.option("bounce")}){const I=this.state;if(I===Ye.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=l;const{current:c}=this,C=c.e,d=c.f,p=this.getMatrix(this.target);let m=(new DOMMatrix).translate(C,d).translate(a,n).translate(t,e);if(this.option("zoom")){if(!l){const t=this.targetScale,e=this.minScale,s=this.maxScale;t*i<e&&(i=e/t),t*i>s&&(i=s/t)}m=m.scale(i)}m=m.translate(-a,-n).translate(-C,-d).multiply(p),s&&(m=m.rotate(s)),o&&(m=m.scale(-1,1)),g&&(m=m.scale(1,-1));for(const t of Te)"e"!==t&&"f"!==t&&(m[t]>this.minScale+1e-5||m[t]<this.minScale-1e-5)?this.target[t]=m[t]:this.target[t]=ve(m[t],Ne);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===ze||!1===h)&&!l&&this.clampTargetBounds(),I===Ye.Init?this.animate():this.isResting||(this.state=Ye.Panning,this.requestTick())}stop(t=!1){if(this.state===Ye.Init||this.state===Ye.Destroy)return;const e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of Te)this.velocity[e]=0,"current"===t?this.current[e]=this.target[e]:"target"===t&&(this.target[e]=this.current[e]);this.setTransform(),Le(this.container,"is-scaling"),Le(this.container,"is-animating"),this.isTicking=!1,this.state=Ye.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),He(this.container,"is-animating"),this.isScaling&&He(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame((()=>this.animate())))}panWithMouse(t,e=this.option("mouseMoveFriction")){if(this.pmme=t,this.panMode!==ze||!t)return;if(ve(this.targetScale)<=ve(this.minScale))return;this.emit("mouseMove",t);const{container:i,containerRect:s,contentRect:a}=this,n=s.width,r=s.height,o=i.getBoundingClientRect(),g=(t.clientX||0)-o.left,l=(t.clientY||0)-o.top;let{contentWidth:h,contentHeight:I}=this.calculateContentDim(this.target);const c=this.option("mouseMoveFactor");c>1&&(h!==n&&(h*=c),I!==r&&(I*=c));let C=.5*(h-n)-g/n*100/100*(h-n);C+=.5*(a.right-a.left);let d=.5*(I-r)-l/r*100/100*(I-r);d+=.5*(a.bottom-a.top),this.applyChange({panX:C-this.target.e,panY:d-this.target.f,friction:e})}zoomWithWheel(t){if(this.state===Ye.Destroy||this.state===Ye.Init)return;const e=Date.now();if(e-this.pwt<45)return void t.preventDefault();this.pwt=e;var i=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const s=Math.max(-1,Math.min(1,i)),{targetScale:a,maxScale:n,minScale:r}=this;let o=a*(100+45*s)/100;ve(o)<ve(r)&&ve(a)<=ve(r)?(this.cwd+=Math.abs(s),o=r):ve(o)>ve(n)&&ve(a)>=ve(n)?(this.cwd+=Math.abs(s),o=n):(this.cwd=0,o=Math.max(Math.min(o,n),r)),this.cwd>this.option("wheelLimit")||(t.preventDefault(),ve(o)!==ve(a)&&this.zoomTo(o,{event:t}))}canZoomIn(){return this.option("zoom")&&(ve(this.contentRect.width,1)<ve(this.contentRect.fitWidth,1)||ve(this.targetScale)<ve(this.maxScale))}canZoomOut(){return this.option("zoom")&&ve(this.targetScale)>ve(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.getNextScale("toggleZoom"),t)}toggleMax(t){this.zoomTo(this.getNextScale("toggleMax"),t)}toggleCover(t){this.zoomTo(this.getNextScale("toggleCover"),t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e=je,originX:i=je,originY:s=je,event:a}={}){if(this.isContentLoading||this.state===Ye.Destroy)return;const{targetScale:n,fullScale:r,maxScale:o,coverScale:g}=this;if(this.stop(),this.panMode===ze&&(a=this.pmme||a),a||i===je||s===je){const t=this.content.getBoundingClientRect(),e=this.container.getBoundingClientRect(),n=a?a.clientX:e.left+.5*e.width,r=a?a.clientY:e.top+.5*e.height;i=n-t.left-.5*t.width,s=r-t.top-.5*t.height}let l=1;"number"==typeof t?l=t:"full"===t?l=r:"cover"===t?l=g:"max"===t?l=o:"fit"===t?l=1:"next"===t&&(l=this.getNextScale("iterateZoom")),l=l/n||1,e=e===je?l>1?.15:.25:e,this.applyChange({scale:l,originX:i,originY:s,friction:e}),a&&this.panMode===ze&&this.panWithMouse(a,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);const s=t.classList.contains(e);s?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(t=this.current){const{a:e,b:i,c:s,d:a,e:n,f:r}=t;return new DOMMatrix([e,i,s,a,n,r])}reset(t){if(this.state!==Ye.Init&&this.state!==Ye.Destroy){this.stop("current");for(const t of Te)this.target[t]=Xe[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===t?this.option("friction"):t,this.state=Ye.Panning,this.requestTick())}}destroy(){this.stop(),this.state=Ye.Destroy,this.detachEvents(),this.detachObserver();const{container:t,content:e}=this,i=this.option("classes")||{};for(const e of Object.values(i))t.classList.remove(e+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(qe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:{PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"}}}),Object.defineProperty(qe,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const $e=function(t,e){let i=!0;return(...s)=>{i&&(i=!1,t(...s),setTimeout((()=>{i=!0}),e))}},ti=(t,e)=>{let i=[];return t.childNodes.forEach((t=>{t.nodeType!==Node.ELEMENT_NODE||e&&!t.matches(e)||i.push(t)})),i};var ei;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"}(ei||(ei={}));const ii=t=>{if("string"==typeof t||t instanceof HTMLElement)t={html:t};else{const e=t.thumb;void 0!==e&&("string"==typeof e&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},si=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class ai extends Fe{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}class ni extends ai{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;if(!t){t=document.createElement("ul"),He(t,this.cn("list")),t.setAttribute("role","tablist");const e=this.instance.container;e.appendChild(t),He(e,this.cn("hasDots")),this.list=t}return t}refresh(){var t;const e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),a=this.option("dynamicFrom");if(e<i||e>s)return void this.cleanup();const n="number"==typeof a&&e>5&&e>=a,r=!this.list||this.isDynamic!==n||this.list.children.length!==e;r&&this.cleanup();const o=this.build();if(we(o,this.cn("isDynamic"),!!n),r)for(let t=0;t<e;t++)o.append(this.createItem(t));let g,l=0;for(const e of[...o.children]){const i=l===this.instance.page;i&&(g=e),we(e,this.cn("isCurrent"),i),null===(t=e.children[0])||void 0===t||t.setAttribute("aria-selected",i?"true":"false");for(const t of["isBeforePrev","isPrev","isNext","isAfterNext"])Le(e,this.cn(t));l++}if(g=g||o.firstChild,n&&g){const t=g.previousElementSibling,e=t&&t.previousElementSibling;He(t,this.cn("isPrev")),He(e,this.cn("isBeforePrev"));const i=g.nextElementSibling,s=i&&i.nextElementSibling;He(i,this.cn("isNext")),He(s,this.cn("isAfterNext"))}this.isDynamic=n}createItem(t=0){var e;const i=document.createElement("li");i.setAttribute("role","presentation");const s=Ge(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(s),null===(e=i.children[0])||void 0===e||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,Le(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(ni,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});const ri="disabled",oi="next",gi="prev";class li extends ai{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let s=this.prev,a=this.next;s&&a&&(s.removeAttribute(ri),a.removeAttribute(ri),t.isInfinite||(i<=0&&s.setAttribute(ri,""),i>=e-1&&a.setAttribute(ri,"")))}addBtn(t){var e;const i=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",i.localize(`{{${t.toUpperCase()}}}`)),He(s,this.cn("button")+" "+this.cn(t===oi?"isNext":"isPrev"));const a=i.isRTL?t===oi?gi:oi:t;var n;return s.innerHTML=i.localize(this.option(`${a}Tpl`)),s.dataset[`carousel${n=t,n?n.match("^[a-z]")?n.charAt(0).toUpperCase()+n.substring(1):n:""}`]="true",null===(e=this.container)||void 0===e||e.appendChild(s),s}build(){const t=this.instance.container,e=this.cn("container");let{container:i,prev:s,next:a}=this;i||(i=t.querySelector("."+e),this.isDom=!!i),i||(i=document.createElement("div"),He(i,e),t.appendChild(i)),this.container=i,a||(a=i.querySelector("[data-carousel-next]")),a||(a=this.addBtn(oi)),this.next=a,s||(s=i.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(gi)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(li,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class hi extends ai{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){const{nav:t,target:e}=this;t&&e&&(t.options.initialSlide=e.options.initialPage,t.state===ei.Ready?this.onNavReady(t):t.on("ready",this.onNavReady),e.state===ei.Ready?this.onTargetReady(e):e.on("ready",this.onTargetReady))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var s,a;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;const n=i.target,{nav:r,target:o}=this;if(!r||!o||!n)return;const g=n.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!g)return;const l=parseInt(g.dataset.index||"",10)||0,h=o.getPageForSlide(l),I=r.getPageForSlide(l);r.slideTo(I),o.slideTo(h,{friction:(null===(a=null===(s=this.nav)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.Sync.option("friction"))||0}),this.markSelectedSlide(l)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){var t,e;const{target:i,nav:s}=this;if(!i||!s)return;if(s.state!==ei.Ready||i.state!==ei.Ready)return;const a=null===(e=null===(t=i.pages[i.page])||void 0===t?void 0:t.slides[0])||void 0===e?void 0:e.index,n=s.getPageForSlide(a);this.markSelectedSlide(a),s.slideTo(n,null===s.prevPage&&null===i.prevPage?{friction:0}:void 0)}markSelectedSlide(t){const e=this.nav;e&&e.state===ei.Ready&&(this.selectedIndex=t,[...e.slides].map((e=>{e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")})))}attach(){const t=this;let e=t.options.target,i=t.options.nav;e?t.addAsNavFor(e):i&&t.addAsTargetFor(i)}detach(){const t=this,e=t.nav,i=t.target;e&&(e.off("ready",t.onNavReady),e.off("createSlide",t.onNavCreateSlide),e.off("Panzoom.click",t.onNavClick),e.off("Panzoom.touchEnd",t.onNavTouch)),t.nav=null,i&&(i.off("ready",t.onTargetReady),i.off("refresh",t.onTargetChange),i.off("change",t.onTargetChange)),t.target=null}}Object.defineProperty(hi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const Ii={Navigation:li,Dots:ni,Sync:hi},ci="animationend",Ci="isSelected",di="slide";class pi extends Ke{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===ei.Ready}get isInfinite(){let t=!1;const{contentDim:e,viewportDim:i,pages:s,slides:a}=this,n=a[0];return s.length>=2&&n&&e+n.dim>=i&&(t=this.option("infinite")),t}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ei.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof t&&(t=document.querySelector(t)),!t||!De(t))throw new Error("No Element found");this.container=t,this.slideNext=$e(this.slideNext.bind(this),150),this.slidePrev=$e(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask((()=>{this.processOptions()}))}processOptions(){var t,e;const i=Ve({},pi.defaults,this.userOptions);let s="";const a=i.breakpoints;if(a&&Ee(a))for(const[t,e]of Object.entries(a))window.matchMedia(t).matches&&Ee(e)&&(s+=t,Ve(i,e));s===this.bp&&this.state!==ei.Init||(this.bp=s,this.state===ei.Ready&&(i.initialSlide=(null===(e=null===(t=this.pages[this.page])||void 0===t?void 0:t.slides[0])||void 0===e?void 0:e.index)||0),this.state!==ei.Init&&this.destroy(),super.setOptions(i),!1===this.option("enabled")?this.attachEvents():setTimeout((()=>{this.init()}),0))}init(){this.state=ei.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},pi.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=ei.Ready,this.emit("ready")}initLayout(){const{container:t}=this,e=this.option("classes");He(t,this.cn("container")),we(t,e.isLTR,!this.isRTL),we(t,e.isRTL,this.isRTL),we(t,e.isVertical,!this.isHorizontal),we(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),He(i,e.viewport),i.append(...ti(t,`.${e.slide}`)),t.prepend(i)),i.addEventListener("scroll",this.onScroll);let s=this.option("track")||t.querySelector(`.${e.track}`);s||(s=document.createElement("div"),He(s,e.track),s.append(...Array.from(i.childNodes))),s.setAttribute("aria-live","polite"),i.contains(s)||i.prepend(s),this.viewport=i,this.track=s,this.emit("initLayout")}initSlides(){const{track:t}=this;if(!t)return;const e=[...this.slides],i=[];[...ti(t,`.${this.cn(di)}`)].forEach((t=>{if(De(t)){const e=ii({el:t,isDom:!0,index:this.slides.length});i.push(e)}}));for(let t of[...this.option("slides",[])||[],...e])i.push(ii(t));this.slides=i;for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;for(const t of i)this.emit("beforeInitSlide",t,t.index),this.emit("initSlide",t,t.index);this.emit("initSlides")}setInitialPage(){const t=this.option("initialSlide");this.page="number"==typeof t?this.getPageForSlide(t):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:t,pages:e,isHorizontal:i}=this;if(!t||!e.length)return;let s=this.page;e[s]||(this.page=s=0);const a=(e[s].pos||0)*(this.isRTL&&i?1:-1),n=i?`${a}px`:"0",r=i?"0":`${a}px`;t.style.transform=`translate3d(${n}, ${r}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const t=this.option("Panzoom")||{};this.panzoom=new qe(this.viewport,Ve({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",((t,e,...i)=>{this.emit(`Panzoom.${e}`,t,...i)})),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[];const{contentDim:e,viewportDim:i}=this;let s=this.option("slidesPerPage");s=("auto"===s||e<=i)&&!1!==this.option("fill")?1/0:parseFloat(s+"");let a=0,n=0,r=0;for(const e of this.slides)(!t.length||n+e.dim-i>.05||r>=s)&&(t.push(si()),a=t.length-1,n=0,r=0),t[a].slides.push(e),n+=e.dim+e.gap,r++;return t}processPages(){const t=this.pages,{contentDim:e,viewportDim:i,isInfinite:s}=this,a=this.option("center"),n=this.option("fill"),r=n&&a&&e>i&&!s;if(t.forEach(((t,s)=>{var n;t.index=s,t.pos=(null===(n=t.slides[0])||void 0===n?void 0:n.pos)||0,t.dim=0;for(const[e,i]of t.slides.entries())t.dim+=i.dim,e<t.slides.length-1&&(t.dim+=i.gap);r&&t.pos+.5*t.dim<.5*i?t.pos=0:r&&t.pos+.5*t.dim>=e-.5*i?t.pos=e-i:a&&(t.pos+=-.5*(i-t.dim))})),t.forEach((t=>{n&&!s&&e>i&&(t.pos=Math.max(t.pos,0),t.pos=Math.min(t.pos,e-i)),t.pos=ve(t.pos,1e3),t.dim=ve(t.dim,1e3),Math.abs(t.pos)<=.1&&(t.pos=0)})),s)return t;const o=[];let g;return t.forEach((t=>{const e=Object.assign({},t);g&&e.pos===g.pos?(g.dim+=e.dim,g.slides=[...g.slides,...e.slides]):(e.index=o.length,g=e,o.push(e))})),o}getPageFromIndex(t=0){const e=this.pages.length;let i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(t){var e,i;const s=this.isHorizontal?"width":"height";let a=0,n=0,r=t.el;const o=!(!r||r.parentNode);if(r?a=parseFloat(r.dataset[s]||"")||0:(r=document.createElement("div"),r.style.visibility="hidden",(this.track||document.body).prepend(r)),He(r,this.cn(di)+" "+t.class+" "+t.customClass),a)r.style[s]=`${a}px`,r.style["width"===s?"height":"width"]="";else{o&&(this.track||document.body).prepend(r),a=r.getBoundingClientRect()[s]*Math.max(1,(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1);let t=r[this.isHorizontal?"offsetWidth":"offsetHeight"];t-1>a&&(a=t)}const g=getComputedStyle(r);return"content-box"===g.boxSizing&&(this.isHorizontal?(a+=parseFloat(g.paddingLeft)||0,a+=parseFloat(g.paddingRight)||0):(a+=parseFloat(g.paddingTop)||0,a+=parseFloat(g.paddingBottom)||0)),n=parseFloat(g[this.isHorizontal?"marginRight":"marginBottom"])||0,o?null===(i=r.parentElement)||void 0===i||i.removeChild(r):t.el||r.remove(),{dim:ve(a,1e3),gap:ve(n,1e3)}}getBounds(){const{isInfinite:t,isRTL:e,isHorizontal:i,pages:s}=this;let a={min:0,max:0};if(t)a={min:-1/0,max:1/0};else if(s.length){const t=s[0].pos,n=s[s.length-1].pos;a=e&&i?{min:t,max:n}:{min:-1*n,max:-1*t}}return{x:i?a:{min:0,max:0},y:i?{min:0,max:0}:a}}repositionSlides(){let t,{isHorizontal:e,isRTL:i,isInfinite:s,viewport:a,viewportDim:n,contentDim:r,page:o,pages:g,slides:l,panzoom:h}=this,I=0,c=0,C=0,d=0;h?d=-1*h.current[this.axis]:g[o]&&(d=g[o].pos||0),t=e?i?"right":"left":"top",i&&e&&(d*=-1);for(const e of l){const i=e.el;i?("top"===t?(i.style.right="",i.style.left=""):i.style.top="",e.index!==I?i.style[t]=0===c?"":`${ve(c,1e3)}px`:i.style[t]="",C+=e.dim+e.gap,I++):c+=e.dim+e.gap}if(s&&C&&a){let i=getComputedStyle(a),s="padding",o=e?"Right":"Bottom",g=parseFloat(i[s+(e?"Left":"Top")]);d-=g,n+=g,n+=parseFloat(i[s+o]);for(const e of l)e.el&&(ve(e.pos)<ve(n)&&ve(e.pos+e.dim+e.gap)<ve(d)&&ve(d)>ve(r-n)&&(e.el.style[t]=`${ve(c+C,1e3)}px`),ve(e.pos+e.gap)>=ve(r-n)&&ve(e.pos)>ve(d+n)&&ve(d)<ve(n)&&(e.el.style[t]=`-${ve(C,1e3)}px`))}let p,m,u=[...this.inTransition];if(u.length>1&&(p=g[u[0]],m=g[u[1]]),p&&m){let e=0;for(const i of l)i.el?this.inTransition.has(i.index)&&p.slides.indexOf(i)<0&&(i.el.style[t]=`${ve(e+(p.pos-m.pos),1e3)}px`):e+=i.dim+i.gap}}createSlideEl(t){const{track:e,slides:i}=this;if(!e||!t)return;if(t.el&&t.el.parentNode)return;const s=t.el||document.createElement("div");He(s,this.cn(di)),He(s,t.class),He(s,t.customClass);const a=t.html;a&&(a instanceof HTMLElement?s.appendChild(a):s.innerHTML=t.html+"");const n=[];i.forEach(((t,e)=>{t.el&&n.push(e)}));const r=t.index;let o=null;n.length&&(o=i[n.reduce(((t,e)=>Math.abs(e-r)<Math.abs(t-r)?e:t))]);const g=o&&o.el&&o.el.parentNode?o.index<t.index?o.el.nextSibling:o.el:null;e.insertBefore(s,e.contains(g)?g:null),t.el=s,this.emit("createSlide",t)}removeSlideEl(t,e=!1){const i=null==t?void 0:t.el;if(!i||!i.parentNode)return;const s=this.cn(Ci);if(i.classList.contains(s)&&(Le(i,s),this.emit("unselectSlide",t)),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",t);const a=new CustomEvent(ci);i.dispatchEvent(a),t.el&&(t.el.remove(),t.el=null)}transitionTo(t=0,e=this.option("transition")){var i,s,a,n;if(!e)return!1;const r=this.page,{pages:o,panzoom:g}=this;t=parseInt((t||0).toString())||0;const l=this.getPageFromIndex(t);if(!g||!o[l]||o.length<2||Math.abs(((null===(s=null===(i=o[r])||void 0===i?void 0:i.slides[0])||void 0===s?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let h=t>r?1:-1;this.isInfinite&&(0===r&&t===o.length-1&&(h=-1),r===o.length-1&&0===t&&(h=1));const I=o[l].pos*(this.isRTL?1:-1);if(r===l&&Math.abs(I-g.target[this.axis])<1)return!1;this.clearTransitions();const c=g.isResting;He(this.container,this.cn("inTransition"));const C=(null===(a=o[r])||void 0===a?void 0:a.slides[0])||null,d=(null===(n=o[l])||void 0===n?void 0:n.slides[0])||null;this.inTransition.add(d.index),this.createSlideEl(d);let p=C.el,m=d.el;c||e===di||(e="fadeFast",p=null);const u=this.isRTL?"next":"prev",A=this.isRTL?"prev":"next";return p&&(this.inTransition.add(C.index),C.transition=e,p.addEventListener(ci,this.onAnimationEnd),p.classList.add(`f-${e}Out`,`to-${h>0?A:u}`)),m&&(d.transition=e,m.addEventListener(ci,this.onAnimationEnd),m.classList.add(`f-${e}In`,`from-${h>0?u:A}`)),g.current[this.axis]=I,g.target[this.axis]=I,g.requestTick(),this.onChange(l),!0}manageSlideVisiblity(){const t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)i.has(s)?t.add(s):e.add(s);for(const e of this.inTransition)t.add(this.slides[e]);for(const e of t)this.createSlideEl(e),this.lazyLoadSlide(e);for(const i of e)t.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const t="aria-hidden";let e=this.cn(Ci);if(e)for(const i of this.slides){const s=i.el;s&&(s.dataset.index=`${i.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?s.removeAttribute(t):s.setAttribute(t,"true"):this.pages[this.page].slides.includes(i)?(s.classList.contains(e)||(He(s,e),this.emit("selectSlide",i)),s.removeAttribute(t)):(s.classList.contains(e)&&(Le(s,e),this.emit("unselectSlide",i)),s.setAttribute(t,"true")))}}flipInfiniteTrack(){const{axis:t,isHorizontal:e,isInfinite:i,isRTL:s,viewportDim:a,contentDim:n}=this,r=this.panzoom;if(!r||!i)return;let o=r.current[t],g=r.target[t]-o,l=0,h=.5*a;s&&e?(o<-h&&(l=-1,o+=n),o>n-h&&(l=1,o-=n)):(o>h&&(l=1,o-=n),o<-n+h&&(l=-1,o+=n)),l&&(r.current[t]=o,r.target[t]=o+g)}lazyLoadImg(t,e){const i=this,s="f-fadeIn",a="is-preloading";let n=!1,r=null;const o=()=>{n||(n=!0,r&&(r.remove(),r=null),Le(e,a),e.complete&&(He(e,s),setTimeout((()=>{Le(e,s)}),350)),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",t))};He(e,a),e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.addEventListener("error",(()=>{o()})),e.addEventListener("load",(()=>{o()})),setTimeout((()=>{const i=e.parentNode;i&&t.el&&(e.complete?o():n||(r=Ge(Me),i.insertBefore(r,e)))}),300)}lazyLoadSlide(t){const e=t&&t.el;if(!e)return;const i=new Set;let s=Array.from(e.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));e.dataset.lazySrc&&s.push(e),s.map((t=>{t instanceof HTMLImageElement?i.add(t):t instanceof HTMLElement&&t.dataset.lazySrc&&(t.style.backgroundImage=`url('${t.dataset.lazySrc}')`,delete t.dataset.lazySrc)}));for(const e of i)this.lazyLoadImg(t,e)}onAnimationEnd(t){var e;const i=t.target,s=i?parseInt(i.dataset.index||"",10)||0:-1,a=this.slides[s],n=t.animationName;if(!i||!a||!n)return;const r=!!this.inTransition.has(s)&&a.transition;r&&n.substring(0,r.length+2)===`f-${r}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(null===(e=this.panzoom)||void 0===e?void 0:e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0,s=0,a=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:n,isHorizontal:r,axis:o,pages:g}=this,l=g.length,h=Math.abs(Math.atan2(i,e)/(Math.PI/180));let I=0;if(I=h>45&&h<135?r?0:i:r?e:0,!l)return;let c=this.page,C=n&&r?1:-1;const d=t.current[o]*C;let{pageIndex:p}=this.getPageFromPosition(d);Math.abs(I)>5?(g[c].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(c=p),c=n&&r?I<0?c-1:c+1:I<0?c+1:c-1):c=0===s&&0===a?c:p,this.slideTo(c,{transition:!1,friction:t.option("decelFriction")})}onClick(t){const e=t.target,i=e&&De(e)?e.dataset:null;let s,a;i&&(void 0!==i.carouselPage?(a="slideTo",s=i.carouselPage):void 0!==i.carouselNext?a="slideNext":void 0!==i.carouselPrev&&(a="slidePrev")),a?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[a](s)):this.emit("click",t)}onSlideTo(t){const e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){const i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var t;null===(t=this.viewport)||void 0===t||t.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=ei.Init,this.prevPage=null,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===ei.Destroy)return;t=parseInt((t||0).toString())||0;const s=this.getPageFromIndex(t),{axis:a,isHorizontal:n,isRTL:r,pages:o,panzoom:g}=this,l=o.length,h=r&&n?1:-1;if(!g||!l)return;if(this.page!==s){const e=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",e,t),e.defaultPrevented)return}if(this.transitionTo(t,i))return;let I=o[s].pos;if(this.isInfinite){const e=this.contentDim,i=g.target[a]*h;2===l?I+=e*Math.floor(parseFloat(t+"")/2):I=[I,I-e,I+e].reduce((function(t,e){return Math.abs(e-i)<Math.abs(t-i)?e:t}))}I*=h,Math.abs(g.target[a]-I)<1||(g.panTo({x:n?I:0,y:n?0:I,friction:e}),this.onChange(s))}slideToClosest(t){if(this.panzoom){const{pageIndex:e}=this.getPageFromPosition();this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),Le(this.container,this.cn("inTransition"));const t=["to-prev","to-next","from-prev","from-next"];for(const e of this.slides){const i=e.el;if(i){i.removeEventListener(ci,this.onAnimationEnd),i.classList.remove(...t);const s=e.transition;s&&i.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(t,e){var i,s,a,n;const r=this.panzoom,o=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0,g=(null===(s=this.pages[this.page])||void 0===s?void 0:s.dim)||0,l=this.contentDim<this.viewportDim;let h=Array.isArray(e)?e:[e];const I=[];for(const t of h)I.push(ii(t));this.slides.splice(t,0,...I);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;for(const t of I)this.emit("beforeInitSlide",t,t.index);if(this.page>=t&&(this.page+=I.length),this.updateMetrics(),r){const e=(null===(a=this.pages[this.page])||void 0===a?void 0:a.pos)||0,i=(null===(n=this.pages[this.page])||void 0===n?void 0:n.dim)||0,s=this.pages.length||1,h=this.isRTL?g-i:i-g,I=this.isRTL?o-e:e-o;l&&1===s?(t<=this.page&&(r.current[this.axis]-=h,r.target[this.axis]-=h),r.panTo({[this.isHorizontal?"x":"y"]:-1*e})):I&&t<=this.page&&(r.target[this.axis]-=I,r.current[this.axis]-=I,r.requestTick())}for(const t of I)this.emit("initSlide",t,t.index)}prependSlide(t){this.addSlide(0,t)}appendSlide(t){this.addSlide(this.slides.length,t)}removeSlide(t){const e=this.slides.length;t=(t%e+e)%e;const i=this.slides[t];if(i){this.removeSlideEl(i,!0),this.slides.splice(t,1);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:t,viewport:e,track:i,slides:s,isHorizontal:a,isInfinite:n}=this;if(!i)return;const r=a?"width":"height",o=a?"offsetWidth":"offsetHeight";if(e){let t=Math.max(e[o],ve(e.getBoundingClientRect()[r],1e3)),i=getComputedStyle(e),s="padding",n=a?"Right":"Bottom";t-=parseFloat(i[s+(a?"Left":"Top")])+parseFloat(i[s+n]),this.viewportDim=t}let g,l=0;for(const[t,e]of s.entries()){let i=0,a=0;!e.el&&g?(i=g.dim,a=g.gap):(({dim:i,gap:a}=this.getSlideMetrics(e)),g=e),i=ve(i,1e3),a=ve(a,1e3),e.dim=i,e.gap=a,e.pos=l,l+=i,(n||t<s.length-1)&&(l+=a)}l=ve(l,1e3),this.contentDim=l,t&&(t.contentRect[r]=l,t.contentRect[a?"fullWidth":"fullHeight"]=l),this.pages=this.createPages(),this.pages=this.processPages(),this.state===ei.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(t,e=!1,i=!1){void 0===t&&(t=this.page);const s=this,a=s.panzoom,n=s.contentDim,r=s.pages[t]||0;if(!r||!a)return t>this.page?-1:1;let o=-1*a.current.e,g=ve((o-r.pos)/(1*r.dim),1e3),l=g,h=g;this.isInfinite&&!0!==i&&(l=ve((o-r.pos+n)/(1*r.dim),1e3),h=ve((o-r.pos-n)/(1*r.dim),1e3));let I=[g,l,h].reduce((function(t,e){return Math.abs(e)<Math.abs(t)?e:t}));return e?I:I>1?1:I<-1?-1:I}setViewportHeight(){const{page:t,pages:e,viewport:i,isHorizontal:s}=this;if(!i||!e[t])return;let a=0;s&&this.track&&(this.track.style.height="auto",e[t].slides.forEach((t=>{t.el&&(a=Math.max(a,t.el.offsetHeight))}))),i.style.height=a?`${a}px`:""}getPageForSlide(t){for(const e of this.pages)for(const i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;const i=new Set;let{panzoom:s,contentDim:a,viewportDim:n,pages:r,page:o}=this;if(n){a=a+(null===(e=this.slides[this.slides.length-1])||void 0===e?void 0:e.gap)||0;let g=0;g=s&&s.state!==Ye.Init&&s.state!==Ye.Destroy?-1*s.current[this.axis]:r[o]&&r[o].pos||0,this.isInfinite&&(g-=Math.floor(g/a)*a),this.isRTL&&this.isHorizontal&&(g*=-1);const l=g-n*t,h=g+n*(t+1),I=this.isInfinite?[-1,0,1]:[0];for(const t of this.slides)for(const e of I){const s=t.pos+e*a,n=s+t.dim+t.gap;s<h&&n>l&&i.add(t)}}return i}getPageFromPosition(t){const{viewportDim:e,contentDim:i,slides:s,pages:a,panzoom:n}=this,r=a.length,o=s.length,g=s[0],l=s[o-1],h=this.option("center");let I=0,c=0,C=0,d=void 0===t?-1*((null==n?void 0:n.target[this.axis])||0):t;h&&(d+=.5*e),this.isInfinite?(d<g.pos-.5*l.gap&&(d-=i,C=-1),d>l.pos+l.dim+.5*l.gap&&(d-=i,C=1)):d=Math.max(g.pos||0,Math.min(d,l.pos));let p=l,m=s.find((t=>{const e=t.pos-.5*p.gap,i=t.pos+t.dim+.5*t.gap;return p=t,d>=e&&d<i}));return m||(m=l),c=this.getPageForSlide(m.index),I=c+C*r,{page:I,pageIndex:c}}setPageFromPosition(){const{pageIndex:t}=this.getPageFromPosition();this.onChange(t)}destroy(){if([ei.Destroy].includes(this.state))return;this.state=ei.Destroy;const{container:t,viewport:e,track:i,slides:s,panzoom:a}=this,n=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),a&&(a.destroy(),this.panzoom=null),s&&s.forEach((t=>{this.removeSlideEl(t)})),this.detachPlugins(),e&&(e.removeEventListener("scroll",this.onScroll),e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes));for(const[e,i]of Object.entries(n))"container"!==e&&i&&t.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const r=this.events.get("ready");this.events=new Map,r&&this.events.set("ready",r)}}Object.defineProperty(pi,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:qe}),Object.defineProperty(pi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(pi,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Ii});var mi=__webpack_require__(379),ui=__webpack_require__.n(mi),Ai=__webpack_require__(795),fi=__webpack_require__.n(Ai),yi=__webpack_require__(569),bi=__webpack_require__.n(yi),vi=__webpack_require__(565),Si=__webpack_require__.n(vi),Gi=__webpack_require__(216),Bi=__webpack_require__.n(Gi),wi=__webpack_require__(589),Zi=__webpack_require__.n(wi),ki=__webpack_require__(755),Pi={};Pi.styleTagTransform=Zi(),Pi.setAttributes=Si(),Pi.insert=bi().bind(null,"head"),Pi.domAPI=fi(),Pi.insertStyleElement=Bi(),ui()(ki.Z,Pi),ki.Z&&ki.Z.locals&&ki.Z.locals;const Wi=(t,...e)=>{const i=e.length;for(let s=0;s<i;s++){const i=e[s]||{};Object.entries(i).forEach((([e,i])=>{const s=Array.isArray(i)?[]:{};var a;t[e]||Object.assign(t,{[e]:s}),"object"==typeof(a=i)&&null!==a&&a.constructor===Object&&"[object Object]"===Object.prototype.toString.call(a)?Object.assign(t[e],Wi(s,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},xi=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class Ei{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?Wi({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=xi(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...s){let a=xi(e,t);var n;"string"!=typeof(n=a)||isNaN(n)||isNaN(parseFloat(n))||(a=parseFloat(a)),"true"===a&&(a=!0),"false"===a&&(a=!1),a&&"function"==typeof a&&(a=a.call(this,this,t,...s));let r=xi(e,this.options);return r&&"function"==typeof r?a=r.call(this,this,t,...s,a):void 0===a&&(a=r),void 0===a?i:a}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let s="";return i?s=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(s=this.option(`l10n.${e}`)),s||(s=t),s}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(Ei,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Ei,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Vi extends Ei{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}const Ri=t=>`${t||""}`.split(" ").filter((t=>!!t)),Fi=(t,e)=>{t&&Ri(e).forEach((e=>{t.classList.add(e)}))},Ki="play",Yi="pause",Ti="ready";class _i extends Vi{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ti}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==Ti}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)&&this.resume()}onTimerEnd(){const t=this.instance;"play"===this.state&&(t.isInfinite||t.page!==t.pages.length-1?t.slideNext():t.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();const e=this.instance,i=(null===(t=e.pages[e.page])||void 0===t?void 0:t.slides)||[];let s=this.option("progressParentEl");if(s||(s=(1===i.length?i[0].el:null)||e.viewport),!s)return null;const a=document.createElement("div");return Fi(a,"f-progress"),s.prepend(a),this.progressBar=a,a.offsetHeight,a}set(){const t=this,e=t.instance;if(e.pages.length<2)return;if(t.timer)return;const i=t.option("timeout");t.state=Ki,Fi(e.container,"has-autoplay");let s=t.createProgressBar();s&&(s.style.transitionDuration=`${i}ms`,s.style.transform="scaleX(1)"),t.timer=setTimeout((()=>{t.timer=null,t.inHover||t.onTimerEnd()}),i),t.emit("set")}clear(){const t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.removeProgressBar()}start(){const t=this;if(t.set(),t.state!==Ti){if(t.option("pauseOnHover")){const e=t.instance.container;e.addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)}document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start")}}stop(){const t=this,e=t.state,i=t.instance.container;var s;t.clear(),t.state=Ti,i.removeEventListener("mouseenter",t.onMouseEnter,!1),i.removeEventListener("mouseleave",t.onMouseLeave,!1),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),(s=i)&&Ri("has-autoplay").forEach((t=>{s.classList.remove(t)})),e!==Ti&&t.emit("stop")}pause(){const t=this;t.state===Ki&&(t.state=Yi,t.clear(),t.emit(Yi))}resume(){const t=this,e=t.instance;if(e.isInfinite||e.page!==e.pages.length-1)if(t.state!==Ki){if(t.state===Yi&&!t.inHover){const e=new Event("resume",{bubbles:!0,cancelable:!0});t.emit("resume",e),e.defaultPrevented||t.set()}}else t.set();else t.stop()}toggle(){this.state===Ki||this.state===Yi?this.stop():this.start()}attach(){const t=this,e=t.instance;e.on("ready",t.onReady),e.on("Panzoom.startAnimation",t.onChange),e.on("Panzoom.endAnimation",t.onSettle),e.on("Panzoom.touchMove",t.onChange)}detach(){const t=this,e=t.instance;e.off("ready",t.onReady),e.off("Panzoom.startAnimation",t.onChange),e.off("Panzoom.endAnimation",t.onSettle),e.off("Panzoom.touchMove",t.onChange),t.stop()}}Object.defineProperty(_i,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});var Mi=__webpack_require__(124),Di={};Di.styleTagTransform=Zi(),Di.setAttributes=Si(),Di.insert=bi().bind(null,"head"),Di.domAPI=fi(),Di.insertStyleElement=Bi(),ui()(Mi.Z,Di),Mi.Z&&Mi.Z.locals&&Mi.Z.locals;const Li=document.querySelectorAll(".popular .catalog__item"),Hi=document.querySelectorAll(".new-items .catalog__item"),Xi=t=>{t.forEach((t=>{t.classList.add("f-carousel__slide")}))};Xi(Li),Xi(Hi);const Ni=document.getElementById("popularCarousel");new pi(Ni,{infinite:!0,Autoplay:{timeout:7e3},slidesPerPage:1,center:!1},{Autoplay:_i});const zi=document.getElementById("newItemsCarousel");new pi(zi,{infinite:!0,Autoplay:{timeout:5e3},slidesPerPage:1,center:!1},{Autoplay:_i});var Oi=__webpack_require__(709),Ji=new(__webpack_require__.n(Oi)())("list-container",{valueNames:["name","category"],page:12,pagination:!0});const ji=()=>{const t=document.querySelectorAll(".page");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(t=>{t.preventDefault()}))};ji(),Ji.on("updated",(()=>{setTimeout((()=>{ji()}),0)}));const Ui=document.querySelectorAll(".catalog__categories-link"),Qi=t=>{Ui.forEach((t=>{t.classList.remove("catalog__categories-link--active")})),t.classList.add("catalog__categories-link--active")};Ui.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const i=e.target.dataset.cat;Qi(t),Ji.filter((function(t){return t.values().category==i||"all"==i}))}))}));const qi=document.querySelector(".search-and-pagination-wrapper .cross-search"),$i=document.querySelector(".search-and-pagination-wrapper .search");qi.addEventListener("click",(()=>{$i.value="",Ji.search()}));const ts=document.querySelectorAll(".header a[data-sub-nav]"),es=()=>{setTimeout((()=>{let t=window.location.hash.substring(1);window.location.href.includes(`${t}`)&&((t=>{Ji.filter((function(e){return e.values().category==t||""==t}))})(t),(t=>{Ui.forEach((e=>{e.dataset.cat==t&&Qi(e)}))})(t))}),0)};es(),ts.forEach((t=>{t.addEventListener("click",es)})),function(){const t=document.querySelector(".mobile-burger__btn"),e=document.querySelector(".mobile-nav__wrapper"),i=document.querySelector(".mobile-nav__close-btn");t.onclick=function(){e.classList.toggle("mobile-nav--active")},i.onclick=function(){e.classList.toggle("mobile-nav--active")}}(),document.title=" : "}()})();